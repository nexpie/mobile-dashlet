(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.mqtt=e()}})(function(){var F,e,t;return function(){function f(s,o,a){function l(i,e){if(!o[i]){if(!s[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(u)return u(i,!0);var r=new Error("Cannot find module '"+i+"'");throw r.code="MODULE_NOT_FOUND",r}var n=o[i]={exports:{}};s[i][0].call(n.exports,function(e){var t=s[i][1][e];return l(t||e)},n,n.exports,f,s,o,a)}return o[i].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}return f}()({1:[function(T,B,e){(function(i,I){(function(){"use strict";const r=T("events").EventEmitter;const n=T("./store");const o=T("./topic-alias-recv");const s=T("./topic-alias-send");const f=T("mqtt-packet");const a=T("./default-message-id-provider");const c=T("readable-stream").Writable;const e=T("inherits");const t=T("reinterval");const l=T("rfdc/default");const h=T("./validations");const d=T("xtend");const p=T("debug")("mqttjs:client");const g=i?i.nextTick:function(e){setTimeout(e,0)};const m=I.setImmediate||function(e){g(e)};const u={keepalive:60,reschedulePings:true,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:true,resubscribe:true};const y=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"];const v={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function b(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function w(t,i){if(t.options.protocolVersion===5){if(i.cmd==="publish"){let e;if(i.properties){e=i.properties.topicAlias}const r=i.topic.toString();if(t.topicAliasSend){if(e){if(r.length!==0){p("applyTopicAlias :: register topic: %s - alias: %d",r,e);if(!t.topicAliasSend.put(r,e)){p("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,e);return new Error("Sending Topic Alias out of range")}}}else{if(r.length!==0){if(t.options.autoAssignTopicAlias){e=t.topicAliasSend.getAliasByTopic(r);if(e){i.topic="";i.properties={...i.properties,topicAlias:e};p("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,e)}else{e=t.topicAliasSend.getLruAlias();t.topicAliasSend.put(r,e);i.properties={...i.properties,topicAlias:e};p("applyTopicAlias :: auto assign topic: %s - alias: %d",r,e)}}else if(t.options.autoUseTopicAlias){e=t.topicAliasSend.getAliasByTopic(r);if(e){i.topic="";i.properties={...i.properties,topicAlias:e};p("applyTopicAlias :: auto use topic: %s - alias: %d",r,e)}}}}}else if(e){p("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,e);return new Error("Sending Topic Alias out of range")}}}}function _(e,t){let i;if(t.properties){i=t.properties.topicAlias}let r=t.topic.toString();if(r.length===0){if(typeof i==="undefined"){return new Error("Unregistered Topic Alias")}else{r=e.topicAliasSend.getTopicByAlias(i);if(typeof r==="undefined"){return new Error("Unregistered Topic Alias")}else{t.topic=r}}}if(i){delete t.properties.topicAlias}}function x(e,t,i){p("sendPacket :: packet: %O",t);p("sendPacket :: emitting `packetsend`");e.emit("packetsend",t);p("sendPacket :: writing to stream");const r=f.writeToStream(t,e.stream,e.options);p("sendPacket :: writeToStream result %s",r);if(!r&&i&&i!==C){p("sendPacket :: handle events on `drain` once through callback.");e.stream.once("drain",i)}else if(i){p("sendPacket :: invoking cb");i()}}function k(t){if(t){p("flush: queue exists? %b",!!t);Object.keys(t).forEach(function(e){if(typeof t[e].cb==="function"){t[e].cb(new Error("Connection closed"));delete t[e]}})}}function S(t){if(t){p("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function");Object.keys(t).forEach(function(e){if(t[e].volatile&&typeof t[e].cb==="function"){t[e].cb(new Error("Connection closed"));delete t[e]}})}}function E(i,r,n,s){p("storeAndSend :: store packet with cmd %s to outgoingStore",r.cmd);let e=r;let t;if(e.cmd==="publish"){e=l(r);t=_(i,e);if(t){return n&&n(t)}}i.outgoingStore.put(e,function e(t){if(t){return n&&n(t)}s();x(i,r,n)})}function C(e){p("nop ::",e)}function A(e,t){let i;const s=this;if(!(this instanceof A)){return new A(e,t)}this.options=t||{};for(i in u){if(typeof this.options[i]==="undefined"){this.options[i]=u[i]}else{this.options[i]=t[i]}}p("MqttClient :: options.protocol",t.protocol);p("MqttClient :: options.protocolVersion",t.protocolVersion);p("MqttClient :: options.username",t.username);p("MqttClient :: options.keepalive",t.keepalive);p("MqttClient :: options.reconnectPeriod",t.reconnectPeriod);p("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized);p("MqttClient :: options.topicAliasMaximum",t.topicAliasMaximum);this.options.clientId=typeof t.clientId==="string"?t.clientId:b();p("MqttClient :: clientId",this.options.clientId);this.options.customHandleAcks=t.protocolVersion===5&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)};this.streamBuilder=e;this.messageIdProvider=typeof this.options.messageIdProvider==="undefined"?new a:this.options.messageIdProvider;this.outgoingStore=t.outgoingStore||new n;this.incomingStore=t.incomingStore||new n;this.queueQoSZero=t.queueQoSZero===undefined?true:t.queueQoSZero;this._resubscribeTopics={};this.messageIdToTopic={};this.pingTimer=null;this.connected=false;this.disconnecting=false;this.queue=[];this.connackTimer=null;this.reconnectTimer=null;this._storeProcessing=false;this._packetIdsDuringStoreProcessing={};this._storeProcessingQueue=[];this.outgoing={};this._firstConnection=true;if(t.topicAliasMaximum>0){if(t.topicAliasMaximum>65535){p("MqttClient :: options.topicAliasMaximum is out of range")}else{this.topicAliasRecv=new o(t.topicAliasMaximum)}}this.on("connect",function(){const r=this.queue;function n(){const t=r.shift();p("deliver :: entry %o",t);let e=null;if(!t){s._resubscribe();return}e=t.packet;p("deliver :: call _sendPacket for %o",e);let i=true;if(e.messageId&&e.messageId!==0){if(!s.messageIdProvider.register(e.messageId)){i=false}}if(i){s._sendPacket(e,function(e){if(t.cb){t.cb(e)}n()})}else{p("messageId: %d has already used. The message is skipped and removed.",e.messageId);n()}}p("connect :: sending queued packets");n()});this.on("close",function(){p("close :: connected set to `false`");this.connected=false;p("close :: clearing connackTimer");clearTimeout(this.connackTimer);p("close :: clearing ping timer");if(s.pingTimer!==null){s.pingTimer.clear();s.pingTimer=null}if(this.topicAliasRecv){this.topicAliasRecv.clear()}p("close :: calling _setupReconnect");this._setupReconnect()});r.call(this);p("MqttClient :: setting up stream");this._setupStream()}e(A,r);A.prototype._setupStream=function(){const i=this;const e=new c;const r=f.parser(this.options);let n=null;const s=[];p("_setupStream :: calling method to clear reconnect");this._clearReconnect();p("_setupStream :: using streamBuilder provided to client to create stream");this.stream=this.streamBuilder(this);r.on("packet",function(e){p("parser :: on packet push to packets array.");s.push(e)});function o(){if(s.length){g(a)}else{const e=n;n=null;e()}}function a(){p("work :: getting next packet in queue");const e=s.shift();if(e){p("work :: packet pulled from queue");i._handlePacket(e,o)}else{p("work :: no packets in queue");const t=n;n=null;p("work :: done flag is %s",!!t);if(t)t()}}e._write=function(e,t,i){n=i;p("writable stream :: parsing buffer");r.parse(e);a()};function t(e){p("streamErrorHandler :: error",e.message);if(y.includes(e.code)){p("streamErrorHandler :: emitting error");i.emit("error",e)}else{C(e)}}p("_setupStream :: pipe stream to writable stream");this.stream.pipe(e);this.stream.on("error",t);this.stream.on("close",function(){p("(%s)stream :: on close",i.options.clientId);S(i.outgoing);p("stream: emit close to MqttClient");i.emit("close")});p("_setupStream: sending packet `connect`");const l=Object.create(this.options);l.cmd="connect";if(this.topicAliasRecv){if(!l.properties){l.properties={}}if(this.topicAliasRecv){l.properties.topicAliasMaximum=this.topicAliasRecv.max}}x(this,l);r.on("error",this.emit.bind(this,"error"));if(this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData){i.end(()=>this.emit("error",new Error("Packet has no Authentication Method")));return this}if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket==="object"){const u=d({cmd:"auth",reasonCode:0},this.options.authPacket);x(this,u)}}this.stream.setMaxListeners(1e3);clearTimeout(this.connackTimer);this.connackTimer=setTimeout(function(){p("!!connectTimeout hit!! Calling _cleanUp with force `true`");i._cleanUp(true)},this.options.connectTimeout)};A.prototype._handlePacket=function(e,t){const i=this.options;if(i.protocolVersion===5&&i.properties&&i.properties.maximumPacketSize&&i.properties.maximumPacketSize<e.length){this.emit("error",new Error("exceeding packets size "+e.cmd));this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}});return this}p("_handlePacket :: emitting packetreceive");this.emit("packetreceive",e);switch(e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e);t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e);t();break;case"auth":this._handleAuth(e);t();break;case"pingresp":this._handlePingresp(e);t();break;case"disconnect":this._handleDisconnect(e);t();break;default:break}};A.prototype._checkDisconnecting=function(e){if(this.disconnecting){if(e&&e!==C){e(new Error("client disconnecting"))}else{this.emit("error",new Error("client disconnecting"))}}return this.disconnecting};A.prototype.publish=function(i,r,n,s){p("publish :: message `%s` to topic `%s`",r,i);const o=this.options;if(typeof n==="function"){s=n;n=null}const e={qos:0,retain:false,dup:false};n=d(e,n);if(this._checkDisconnecting(s)){return this}const a=this;const t=function(){let e=0;if(n.qos===1||n.qos===2){e=a._nextId();if(e===null){p("No messageId left");return false}}const t={cmd:"publish",topic:i,payload:r,qos:n.qos,retain:n.retain,messageId:e,dup:n.dup};if(o.protocolVersion===5){t.properties=n.properties}p("publish :: qos",n.qos);switch(n.qos){case 1:case 2:a.outgoing[t.messageId]={volatile:false,cb:s||C};p("MqttClient:publish: packet cmd: %s",t.cmd);a._sendPacket(t,undefined,n.cbStorePut);break;default:p("MqttClient:publish: packet cmd: %s",t.cmd);a._sendPacket(t,s,n.cbStorePut);break}return true};if(this._storeProcessing||this._storeProcessingQueue.length>0||!t()){this._storeProcessingQueue.push({invoke:t,cbStorePut:n.cbStorePut,callback:s})}return this};A.prototype.subscribe=function(){const r=this;const t=new Array(arguments.length);for(let e=0;e<arguments.length;e++){t[e]=arguments[e]}const n=[];let i=t.shift();const s=i.resubscribe;let o=t.pop()||C;let a=t.pop();const l=this.options.protocolVersion;delete i.resubscribe;if(typeof i==="string"){i=[i]}if(typeof o!=="function"){a=o;o=C}const e=h.validateTopics(i);if(e!==null){m(o,new Error("Invalid topic "+e));return this}if(this._checkDisconnecting(o)){p("subscribe: discconecting true");return this}const u={qos:0};if(l===5){u.nl=false;u.rap=false;u.rh=0}a=d(u,a);if(Array.isArray(i)){i.forEach(function(e){p("subscribe: array topic %s",e);if(!Object.prototype.hasOwnProperty.call(r._resubscribeTopics,e)||r._resubscribeTopics[e].qos<a.qos||s){const t={topic:e,qos:a.qos};if(l===5){t.nl=a.nl;t.rap=a.rap;t.rh=a.rh;t.properties=a.properties}p("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos);n.push(t)}})}else{Object.keys(i).forEach(function(e){p("subscribe: object topic %s",e);if(!Object.prototype.hasOwnProperty.call(r._resubscribeTopics,e)||r._resubscribeTopics[e].qos<i[e].qos||s){const t={topic:e,qos:i[e].qos};if(l===5){t.nl=i[e].nl;t.rap=i[e].rap;t.rh=i[e].rh;t.properties=a.properties}p("subscribe: pushing `%s` to subs list",t);n.push(t)}})}if(!n.length){o(null,[]);return this}const f=function(){const e=r._nextId();if(e===null){p("No messageId left");return false}const t={cmd:"subscribe",subscriptions:n,qos:1,retain:false,dup:false,messageId:e};if(a.properties){t.properties=a.properties}if(r.options.resubscribe){p("subscribe :: resubscribe true");const i=[];n.forEach(function(e){if(r.options.reconnectPeriod>0){const t={qos:e.qos};if(l===5){t.nl=e.nl||false;t.rap=e.rap||false;t.rh=e.rh||0;t.properties=e.properties}r._resubscribeTopics[e.topic]=t;i.push(e.topic)}});r.messageIdToTopic[t.messageId]=i}r.outgoing[t.messageId]={volatile:true,cb:function(e,t){if(!e){const i=t.granted;for(let e=0;e<i.length;e+=1){n[e].qos=i[e]}}o(e,n)}};p("subscribe :: call _sendPacket");r._sendPacket(t);return true};if(this._storeProcessing||this._storeProcessingQueue.length>0||!f()){this._storeProcessingQueue.push({invoke:f,callback:o})}return this};A.prototype.unsubscribe=function(){const i=this;const t=new Array(arguments.length);for(let e=0;e<arguments.length;e++){t[e]=arguments[e]}let r=t.shift();let n=t.pop()||C;let s=t.pop();if(typeof r==="string"){r=[r]}if(typeof n!=="function"){s=n;n=C}const e=h.validateTopics(r);if(e!==null){m(n,new Error("Invalid topic "+e));return this}if(i._checkDisconnecting(n)){return this}const o=function(){const e=i._nextId();if(e===null){p("No messageId left");return false}const t={cmd:"unsubscribe",qos:1,messageId:e};if(typeof r==="string"){t.unsubscriptions=[r]}else if(Array.isArray(r)){t.unsubscriptions=r}if(i.options.resubscribe){t.unsubscriptions.forEach(function(e){delete i._resubscribeTopics[e]})}if(typeof s==="object"&&s.properties){t.properties=s.properties}i.outgoing[t.messageId]={volatile:true,cb:n};p("unsubscribe: call _sendPacket");i._sendPacket(t);return true};if(this._storeProcessing||this._storeProcessingQueue.length>0||!o()){this._storeProcessingQueue.push({invoke:o,callback:n})}return this};A.prototype.end=function(e,t,r){const n=this;p("end :: (%s)",this.options.clientId);if(e==null||typeof e!=="boolean"){r=t||C;t=e;e=false;if(typeof t!=="object"){r=t;t=null;if(typeof r!=="function"){r=C}}}if(typeof t!=="object"){r=t;t=null}p("end :: cb? %s",!!r);r=r||C;function i(){p("end :: closeStores: closing incoming and outgoing stores");n.disconnected=true;n.incomingStore.close(function(i){n.outgoingStore.close(function(e){p("end :: closeStores: emitting end");n.emit("end");if(r){const t=i||e;p("end :: closeStores: invoking callback with args");r(t)}})});if(n._deferredReconnect){n._deferredReconnect()}}function s(){p("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,e);n._cleanUp(e,()=>{p("end :: finish :: calling process.nextTick on closeStores");g(i.bind(n))},t)}if(this.disconnecting){r();return this}this._clearReconnect();this.disconnecting=true;if(!e&&Object.keys(this.outgoing).length>0){p("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId);this.once("outgoingEmpty",setTimeout.bind(null,s,10))}else{p("end :: (%s) :: immediately calling finish",n.options.clientId);s()}return this};A.prototype.removeOutgoingMessage=function(e){const t=this.outgoing[e]?this.outgoing[e].cb:null;delete this.outgoing[e];this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))});return this};A.prototype.reconnect=function(e){p("client reconnect");const t=this;const i=function(){if(e){t.options.incomingStore=e.incomingStore;t.options.outgoingStore=e.outgoingStore}else{t.options.incomingStore=null;t.options.outgoingStore=null}t.incomingStore=t.options.incomingStore||new n;t.outgoingStore=t.options.outgoingStore||new n;t.disconnecting=false;t.disconnected=false;t._deferredReconnect=null;t._reconnect()};if(this.disconnecting&&!this.disconnected){this._deferredReconnect=i}else{i()}return this};A.prototype._reconnect=function(){p("_reconnect: emitting reconnect to client");this.emit("reconnect");if(this.connected){this.end(()=>{this._setupStream()});p("client already connected. disconnecting first.")}else{p("_reconnect: calling _setupStream");this._setupStream()}};A.prototype._setupReconnect=function(){const e=this;if(!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0){if(!this.reconnecting){p("_setupReconnect :: emit `offline` state");this.emit("offline");p("_setupReconnect :: set `reconnecting` to `true`");this.reconnecting=true}p("_setupReconnect :: setting reconnectTimer for %d ms",e.options.reconnectPeriod);e.reconnectTimer=setInterval(function(){p("reconnectTimer :: reconnect triggered!");e._reconnect()},e.options.reconnectPeriod)}else{p("_setupReconnect :: doing nothing...")}};A.prototype._clearReconnect=function(){p("_clearReconnect : clearing reconnect timer");if(this.reconnectTimer){clearInterval(this.reconnectTimer);this.reconnectTimer=null}};A.prototype._cleanUp=function(e,t){const i=arguments[2];if(t){p("_cleanUp :: done callback provided for on stream close");this.stream.on("close",t)}p("_cleanUp :: forced? %s",e);if(e){if(this.options.reconnectPeriod===0&&this.options.clean){k(this.outgoing)}p("_cleanUp :: (%s) :: destroying stream",this.options.clientId);this.stream.destroy()}else{const r=d({cmd:"disconnect"},i);p("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId);this._sendPacket(r,m.bind(null,this.stream.end.bind(this.stream)))}if(!this.disconnecting){p("_cleanUp :: client not disconnecting. Clearing and resetting reconnect.");this._clearReconnect();this._setupReconnect()}if(this.pingTimer!==null){p("_cleanUp :: clearing pingTimer");this.pingTimer.clear();this.pingTimer=null}if(t&&!this.connected){p("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId);this.stream.removeListener("close",t);t()}};A.prototype._sendPacket=function(e,t,i){p("_sendPacket :: (%s) ::  start",this.options.clientId);i=i||C;t=t||C;const r=w(this,e);if(r){t(r);return}if(!this.connected){if(e.cmd==="auth"){this._shiftPingInterval();x(this,e,t);return}p("_sendPacket :: client not connected. Storing packet offline.");this._storePacket(e,t,i);return}this._shiftPingInterval();switch(e.cmd){case"publish":break;case"pubrel":E(this,e,t,i);return;default:x(this,e,t);return}switch(e.qos){case 2:case 1:E(this,e,t,i);break;case 0:default:x(this,e,t);break}p("_sendPacket :: (%s) ::  end",this.options.clientId)};A.prototype._storePacket=function(e,t,i){p("_storePacket :: packet: %o",e);p("_storePacket :: cb? %s",!!t);i=i||C;let r=e;if(r.cmd==="publish"){r=l(e);const n=_(this,r);if(n){return t&&t(n)}}if((r.qos||0)===0&&this.queueQoSZero||r.cmd!=="publish"){this.queue.push({packet:r,cb:t})}else if(r.qos>0){t=this.outgoing[r.messageId]?this.outgoing[r.messageId].cb:null;this.outgoingStore.put(r,function(e){if(e){return t&&t(e)}i()})}else if(t){t(new Error("No connection to broker"))}};A.prototype._setupPingTimer=function(){p("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const e=this;if(!this.pingTimer&&this.options.keepalive){this.pingResp=true;this.pingTimer=t(function(){e._checkPing()},this.options.keepalive*1e3)}};A.prototype._shiftPingInterval=function(){if(this.pingTimer&&this.options.keepalive&&this.options.reschedulePings){this.pingTimer.reschedule(this.options.keepalive*1e3)}};A.prototype._checkPing=function(){p("_checkPing :: checking ping...");if(this.pingResp){p("_checkPing :: ping response received. Clearing flag and sending `pingreq`");this.pingResp=false;this._sendPacket({cmd:"pingreq"})}else{p("_checkPing :: calling _cleanUp with force true");this._cleanUp(true)}};A.prototype._handlePingresp=function(){this.pingResp=true};A.prototype._handleConnack=function(e){p("_handleConnack");const t=this.options;const i=t.protocolVersion;const r=i===5?e.reasonCode:e.returnCode;clearTimeout(this.connackTimer);delete this.topicAliasSend;if(e.properties){if(e.properties.topicAliasMaximum){if(e.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}if(e.properties.topicAliasMaximum>0){this.topicAliasSend=new s(e.properties.topicAliasMaximum)}}if(e.properties.serverKeepAlive&&t.keepalive){t.keepalive=e.properties.serverKeepAlive;this._shiftPingInterval()}if(e.properties.maximumPacketSize){if(!t.properties){t.properties={}}t.properties.maximumPacketSize=e.properties.maximumPacketSize}}if(r===0){this.reconnecting=false;this._onConnect(e)}else if(r>0){const n=new Error("Connection refused: "+v[r]);n.code=r;this.emit("error",n)}};A.prototype._handleAuth=function(e){const t=this.options;const i=t.protocolVersion;const r=i===5?e.reasonCode:e.returnCode;if(i!==5){const s=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+i);s.code=r;this.emit("error",s);return}const n=this;this.handleAuth(e,function(e,t){if(e){n.emit("error",e);return}if(r===24){n.reconnecting=false;n._sendPacket(t)}else{const i=new Error("Connection refused: "+v[r]);e.code=r;n.emit("error",i)}})};A.prototype.handleAuth=function(e,t){t()};A.prototype._handlePublish=function(i,r){p("_handlePublish: packet %o",i);r=typeof r!=="undefined"?r:C;let n=i.topic.toString();const s=i.payload;const e=i.qos;const o=i.messageId;const a=this;const t=this.options;const l=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let e;if(i.properties){e=i.properties.topicAlias}if(typeof e!=="undefined"){if(n.length===0){if(e>0&&e<=65535){const u=this.topicAliasRecv.getTopicByAlias(e);if(u){n=u;p("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",n,e)}else{p("_handlePublish :: unregistered topic alias. alias: %d",e);this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{p("_handlePublish :: topic alias out of range. alias: %d",e);this.emit("error",new Error("Received Topic Alias is out of range"));return}}else{if(this.topicAliasRecv.put(n,e)){p("_handlePublish :: registered topic: %s - alias: %d",n,e)}else{p("_handlePublish :: topic alias out of range. alias: %d",e);this.emit("error",new Error("Received Topic Alias is out of range"));return}}}}p("_handlePublish: qos %d",e);switch(e){case 2:{t.customHandleAcks(n,s,i,function(e,t){if(!(e instanceof Error)){t=e;e=null}if(e){return a.emit("error",e)}if(l.indexOf(t)===-1){return a.emit("error",new Error("Wrong reason code for pubrec"))}if(t){a._sendPacket({cmd:"pubrec",messageId:o,reasonCode:t},r)}else{a.incomingStore.put(i,function(){a._sendPacket({cmd:"pubrec",messageId:o},r)})}});break}case 1:{t.customHandleAcks(n,s,i,function(e,t){if(!(e instanceof Error)){t=e;e=null}if(e){return a.emit("error",e)}if(l.indexOf(t)===-1){return a.emit("error",new Error("Wrong reason code for puback"))}if(!t){a.emit("message",n,s,i)}a.handleMessage(i,function(e){if(e){return r&&r(e)}a._sendPacket({cmd:"puback",messageId:o,reasonCode:t},r)})});break}case 0:this.emit("message",n,s,i);this.handleMessage(i,r);break;default:p("_handlePublish: unknown QoS. Doing nothing.");break}};A.prototype.handleMessage=function(e,t){t()};A.prototype._handleAck=function(t){const i=t.messageId;const e=t.cmd;let r=null;const n=this.outgoing[i]?this.outgoing[i].cb:null;const s=this;let o;if(!n){p("_handleAck :: Server sent an ack in error. Ignoring.");return}p("_handleAck :: packet type",e);switch(e){case"pubcomp":case"puback":{const a=t.reasonCode;if(a&&a>0&&a!==16){o=new Error("Publish error: "+v[a]);o.code=a;n(o,t)}delete this.outgoing[i];this.outgoingStore.del(t,n);this.messageIdProvider.deallocate(i);this._invokeStoreProcessingQueue();break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:i};const l=t.reasonCode;if(l&&l>0&&l!==16){o=new Error("Publish error: "+v[l]);o.code=l;n(o,t)}else{this._sendPacket(r)}break}case"suback":{delete this.outgoing[i];this.messageIdProvider.deallocate(i);for(let e=0;e<t.granted.length;e++){if((t.granted[e]&128)!==0){const u=this.messageIdToTopic[i];if(u){u.forEach(function(e){delete s._resubscribeTopics[e]})}}}this._invokeStoreProcessingQueue();n(null,t);break}case"unsuback":{delete this.outgoing[i];this.messageIdProvider.deallocate(i);this._invokeStoreProcessingQueue();n(null);break}default:s.emit("error",new Error("unrecognized packet type"))}if(this.disconnecting&&Object.keys(this.outgoing).length===0){this.emit("outgoingEmpty")}};A.prototype._handlePubrel=function(e,i){p("handling pubrel packet");i=typeof i!=="undefined"?i:C;const t=e.messageId;const r=this;const n={cmd:"pubcomp",messageId:t};r.incomingStore.get(e,function(e,t){if(!e){r.emit("message",t.topic,t.payload,t);r.handleMessage(t,function(e){if(e){return i(e)}r.incomingStore.del(t,C);r._sendPacket(n,i)})}else{r._sendPacket(n,i)}})};A.prototype._handleDisconnect=function(e){this.emit("disconnect",e)};A.prototype._nextId=function(){return this.messageIdProvider.allocate()};A.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()};A.prototype._resubscribe=function(){p("_resubscribe");const t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&t.length>0){if(this.options.resubscribe){if(this.options.protocolVersion===5){p("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){const i={};i[t[e]]=this._resubscribeTopics[t[e]];i.resubscribe=true;this.subscribe(i,{properties:i[t[e]].properties})}}else{this._resubscribeTopics.resubscribe=true;this.subscribe(this._resubscribeTopics)}}else{this._resubscribeTopics={}}}this._firstConnection=false};A.prototype._onConnect=function(s){if(this.disconnected){this.emit("connect",s);return}const o=this;this.connackPacket=s;this.messageIdProvider.clear();this._setupPingTimer();this.connected=true;function a(){let t=o.outgoingStore.createStream();function i(){o._storeProcessing=false;o._packetIdsDuringStoreProcessing={}}o.once("close",r);t.on("error",function(e){i();o._flushStoreProcessingQueue();o.removeListener("close",r);o.emit("error",e)});function r(){t.destroy();t=null;o._flushStoreProcessingQueue();i()}function n(){if(!t){return}o._storeProcessing=true;const e=t.read(1);let i;if(!e){t.once("readable",n);return}if(o._packetIdsDuringStoreProcessing[e.messageId]){n();return}if(!o.disconnecting&&!o.reconnectTimer){i=o.outgoing[e.messageId]?o.outgoing[e.messageId].cb:null;o.outgoing[e.messageId]={volatile:false,cb:function(e,t){if(i){i(e,t)}n()}};o._packetIdsDuringStoreProcessing[e.messageId]=true;if(o.messageIdProvider.register(e.messageId)){o._sendPacket(e)}else{p("messageId: %d has already used.",e.messageId)}}else if(t.destroy){t.destroy()}}t.on("end",function(){let e=true;for(const t in o._packetIdsDuringStoreProcessing){if(!o._packetIdsDuringStoreProcessing[t]){e=false;break}}if(e){i();o.removeListener("close",r);o._invokeAllStoreProcessingQueue();o.emit("connect",s)}else{a()}});n()}a()};A.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const e=this._storeProcessingQueue[0];if(e&&e.invoke()){this._storeProcessingQueue.shift();return true}}return false};A.prototype._invokeAllStoreProcessingQueue=function(){while(this._invokeStoreProcessingQueue()){}};A.prototype._flushStoreProcessingQueue=function(){for(const e of this._storeProcessingQueue){if(e.cbStorePut)e.cbStorePut(new Error("Connection closed"));if(e.callback)e.callback(new Error("Connection closed"))}this._storeProcessingQueue.splice(0)};B.exports=A}).call(this)}).call(this,T("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:57,debug:18,events:22,inherits:24,"mqtt-packet":47,"readable-stream":76,reinterval:77,"rfdc/default":78,xtend:88}],2:[function(e,t,i){"use strict";const{Buffer:r}=e("buffer");const n=e("readable-stream").Transform;const s=e("duplexify");let o;let a;let l;let u=false;function f(){const e=new n;e._write=function(e,t,i){o.sendSocketMessage({data:e.buffer,success:function(){i()},fail:function(){i(new Error)}})};e._flush=function e(t){o.closeSocket({success:function(){t()}})};return e}function c(e){if(!e.hostname){e.hostname="localhost"}if(!e.path){e.path="/"}if(!e.wsOptions){e.wsOptions={}}}function h(e,t){const i=e.protocol==="alis"?"wss":"ws";let r=i+"://"+e.hostname+e.path;if(e.port&&e.port!==80&&e.port!==443){r=i+"://"+e.hostname+":"+e.port+e.path}if(typeof e.transformWsUrl==="function"){r=e.transformWsUrl(r,e,t)}return r}function d(){if(u)return;u=true;o.onSocketOpen(function(){l.setReadable(a);l.setWritable(a);l.emit("connect")});o.onSocketMessage(function(e){if(typeof e.data==="string"){const t=r.from(e.data,"base64");a.push(t)}else{const i=new FileReader;i.addEventListener("load",function(){let e=i.result;if(e instanceof ArrayBuffer)e=r.from(e);else e=r.from(e,"utf8");a.push(e)});i.readAsArrayBuffer(e.data)}});o.onSocketClose(function(){l.end();l.destroy()});o.onSocketError(function(e){l.destroy(e)})}function p(e,t){t.hostname=t.hostname||t.host;if(!t.hostname){throw new Error("Could not determine host. Specify host manually.")}const i=t.protocolId==="MQIsdp"&&t.protocolVersion===3?"mqttv3.1":"mqtt";c(t);const r=h(t,e);o=t.my;o.connectSocket({url:r,protocols:i});a=f();l=s.obj();d();return l}t.exports=p},{buffer:17,duplexify:20,"readable-stream":76}],3:[function(e,t,i){"use strict";const n=e("net");const s=e("debug")("mqttjs:tcp");function r(e,t){t.port=t.port||1883;t.hostname=t.hostname||t.host||"localhost";const i=t.port;const r=t.hostname;s("port %d and host %s",i,r);return n.createConnection(i,r)}t.exports=r},{debug:18,net:16}],4:[function(e,t,i){"use strict";const n=e("tls");const s=e("net");const o=e("debug")("mqttjs:tls");function r(t,i){i.port=i.port||8883;i.host=i.hostname||i.host||"localhost";if(s.isIP(i.host)===0){i.servername=i.host}i.rejectUnauthorized=i.rejectUnauthorized!==false;delete i.path;o("port %d host %s rejectUnauthorized %b",i.port,i.host,i.rejectUnauthorized);const r=n.connect(i);r.on("secureConnect",function(){if(i.rejectUnauthorized&&!r.authorized){r.emit("error",new Error("TLS not authorized"))}else{r.removeListener("error",e)}});function e(e){if(i.rejectUnauthorized){t.emit("error",e)}r.end()}r.on("error",e);return r}t.exports=r},{debug:18,net:16,tls:16}],5:[function(s,f,e){(function(n){(function(){"use strict";const{Buffer:v}=s("buffer");const o=s("ws");const b=s("debug")("mqttjs:ws");const w=s("duplexify");const _=s("readable-stream").Transform;const e=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];const r=typeof n!=="undefined"&&n.title==="browser"||typeof __webpack_require__==="function";function a(e,t){let i=e.protocol+"://"+e.hostname+":"+e.port+e.path;if(typeof e.transformWsUrl==="function"){i=e.transformWsUrl(i,e,t)}return i}function l(t){const i=t;if(!t.hostname){i.hostname="localhost"}if(!t.port){if(t.protocol==="wss"){i.port=443}else{i.port=80}}if(!t.path){i.path="/"}if(!t.wsOptions){i.wsOptions={}}if(!r&&t.protocol==="wss"){e.forEach(function(e){if(Object.prototype.hasOwnProperty.call(t,e)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,e)){i.wsOptions[e]=t[e]}})}return i}function x(e){const t=l(e);if(!t.hostname){t.hostname=t.host}if(!t.hostname){if(typeof document==="undefined"){throw new Error("Could not determine host. Specify host manually.")}const i=new URL(document.URL);t.hostname=i.hostname;if(!t.port){t.port=i.port}}if(t.objectMode===undefined){t.objectMode=!(t.binary===true||t.binary===undefined)}return t}function u(e,t,i){b("createWebSocket");b("protocol: "+i.protocolId+" "+i.protocolVersion);const r=i.protocolId==="MQIsdp"&&i.protocolVersion===3?"mqttv3.1":"mqtt";b("creating new Websocket for url: "+t+" and protocol: "+r);const n=new o(t,[r],i.wsOptions);return n}function k(e,t){const i=t.protocolId==="MQIsdp"&&t.protocolVersion===3?"mqttv3.1":"mqtt";const r=a(t,e);const n=new WebSocket(r,[i]);n.binaryType="arraybuffer";return n}function t(e,t){b("streamBuilder");const i=l(t);const r=a(i,e);const n=u(e,r,i);const s=o.createWebSocketStream(n,i.wsOptions);s.url=r;n.on("close",()=>{s.destroy()});return s}function i(e,t){b("browserStreamBuilder");let i;const r=x(t);const n=r.browserBufferSize||1024*512;const s=t.browserBufferTimeout||1e3;const o=!t.objectMode;const a=k(e,t);const l=f(t,m,y);if(!t.objectMode){l._writev=g}l.on("close",()=>{a.close()});const u=typeof a.addEventListener!=="undefined";if(a.readyState===a.OPEN){i=l}else{i=i=w(undefined,undefined,t);if(!t.objectMode){i._writev=g}if(u){a.addEventListener("open",c)}else{a.onopen=c}}i.socket=a;if(u){a.addEventListener("close",h);a.addEventListener("error",d);a.addEventListener("message",p)}else{a.onclose=h;a.onerror=d;a.onmessage=p}function f(e,t,i){const r=new _({objectModeMode:e.objectMode});r._write=t;r._flush=i;return r}function c(){i.setReadable(l);i.setWritable(l);i.emit("connect")}function h(){i.end();i.destroy()}function d(e){i.destroy(e)}function p(e){let t=e.data;if(t instanceof ArrayBuffer)t=v.from(t);else t=v.from(t,"utf8");l.push(t)}function g(t,e){const i=new Array(t.length);for(let e=0;e<t.length;e++){if(typeof t[e].chunk==="string"){i[e]=v.from(t[e],"utf8")}else{i[e]=t[e].chunk}}this._write(v.concat(i),"binary",e)}function m(e,t,i){if(a.bufferedAmount>n){setTimeout(m,s,e,t,i)}if(o&&typeof e==="string"){e=v.from(e,"utf8")}try{a.send(e)}catch(e){return i(e)}i()}function y(e){a.close();e()}return i}if(r){f.exports=i}else{f.exports=t}}).call(this)}).call(this,s("_process"))},{_process:57,buffer:17,debug:18,duplexify:20,"readable-stream":76,ws:87}],6:[function(e,t,i){"use strict";const{Buffer:r}=e("buffer");const n=e("readable-stream").Transform;const s=e("duplexify");let o,a,l;function u(){const e=new n;e._write=function(e,t,i){o.send({data:e.buffer,success:function(){i()},fail:function(e){i(new Error(e))}})};e._flush=function e(t){o.close({success:function(){t()}})};return e}function f(e){if(!e.hostname){e.hostname="localhost"}if(!e.path){e.path="/"}if(!e.wsOptions){e.wsOptions={}}}function c(e,t){const i=e.protocol==="wxs"?"wss":"ws";let r=i+"://"+e.hostname+e.path;if(e.port&&e.port!==80&&e.port!==443){r=i+"://"+e.hostname+":"+e.port+e.path}if(typeof e.transformWsUrl==="function"){r=e.transformWsUrl(r,e,t)}return r}function h(){o.onOpen(function(){l.setReadable(a);l.setWritable(a);l.emit("connect")});o.onMessage(function(e){let t=e.data;if(t instanceof ArrayBuffer)t=r.from(t);else t=r.from(t,"utf8");a.push(t)});o.onClose(function(){l.end();l.destroy()});o.onError(function(e){l.destroy(new Error(e.errMsg))})}function d(e,t){t.hostname=t.hostname||t.host;if(!t.hostname){throw new Error("Could not determine host. Specify host manually.")}const i=t.protocolId==="MQIsdp"&&t.protocolVersion===3?"mqttv3.1":"mqtt";f(t);const r=c(t,e);o=wx.connectSocket({url:r,protocols:[i]});a=u();l=s.obj();l._destroy=function(e,t){o.close({success:function(){t&&t(e)}})};const n=l.destroy;l.destroy=function(){l.destroy=n;const e=this;setTimeout(function(){o.close({fail:function(){e._destroy(new Error)}})},0)}.bind(l);h();return l}t.exports=d},{buffer:17,duplexify:20,"readable-stream":76}],7:[function(e,t,i){"use strict";function r(){if(!(this instanceof r)){return new r}this.nextId=Math.max(1,Math.floor(Math.random()*65535))}r.prototype.allocate=function(){const e=this.nextId++;if(this.nextId===65536){this.nextId=1}return e};r.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1};r.prototype.register=function(e){return true};r.prototype.deallocate=function(e){};r.prototype.clear=function(){};t.exports=r},{}],8:[function(e,t,i){"use strict";const r=e("xtend");const n=e("readable-stream").Readable;const s={objectMode:true};const o={clean:true};function a(e){if(!(this instanceof a)){return new a(e)}this.options=e||{};this.options=r(o,e);this._inflights=new Map}a.prototype.put=function(e,t){this._inflights.set(e.messageId,e);if(t){t()}return this};a.prototype.createStream=function(){const e=new n(s);const i=[];let t=false;let r=0;this._inflights.forEach(function(e,t){i.push(e)});e._read=function(){if(!t&&r<i.length){this.push(i[r++])}else{this.push(null)}};e.destroy=function(){if(t){return}const e=this;t=true;setTimeout(function(){e.emit("close")},0)};return e};a.prototype.del=function(e,t){e=this._inflights.get(e.messageId);if(e){this._inflights.delete(e.messageId);t(null,e)}else if(t){t(new Error("missing packet"))}return this};a.prototype.get=function(e,t){e=this._inflights.get(e.messageId);if(e){t(null,e)}else if(t){t(new Error("missing packet"))}return this};a.prototype.close=function(e){if(this.options.clean){this._inflights=null}if(e){e()}};t.exports=a},{"readable-stream":76,xtend:88}],9:[function(e,t,i){"use strict";function r(e){if(!(this instanceof r)){return new r(e)}this.aliasToTopic={};this.max=e}r.prototype.put=function(e,t){if(t===0||t>this.max){return false}this.aliasToTopic[t]=e;this.length=Object.keys(this.aliasToTopic).length;return true};r.prototype.getTopicByAlias=function(e){return this.aliasToTopic[e]};r.prototype.clear=function(){this.aliasToTopic={}};t.exports=r},{}],10:[function(e,t,i){"use strict";const r=e("lru-cache");const n=e("number-allocator").NumberAllocator;function s(e){if(!(this instanceof s)){return new s(e)}if(e>0){this.aliasToTopic=new r({max:e});this.topicToAlias={};this.numberAllocator=new n(1,e);this.max=e;this.length=0}}s.prototype.put=function(e,t){if(t===0||t>this.max){return false}const i=this.aliasToTopic.get(t);if(i){delete this.topicToAlias[i]}this.aliasToTopic.set(t,e);this.topicToAlias[e]=t;this.numberAllocator.use(t);this.length=this.aliasToTopic.length;return true};s.prototype.getTopicByAlias=function(e){return this.aliasToTopic.get(e)};s.prototype.getAliasByTopic=function(e){const t=this.topicToAlias[e];if(typeof t!=="undefined"){this.aliasToTopic.get(t)}return t};s.prototype.clear=function(){this.aliasToTopic.reset();this.topicToAlias={};this.numberAllocator.clear();this.length=0};s.prototype.getLruAlias=function(){const e=this.numberAllocator.firstVacant();if(e)return e;return this.aliasToTopic.keys()[this.aliasToTopic.length-1]};t.exports=s},{"lru-cache":44,"number-allocator":53}],11:[function(e,t,i){"use strict";function r(e){const t=e.split("/");for(let e=0;e<t.length;e++){if(t[e]==="+"){continue}if(t[e]==="#"){return e===t.length-1}if(t[e].indexOf("+")!==-1||t[e].indexOf("#")!==-1){return false}}return true}function n(t){if(t.length===0){return"empty_topic_list"}for(let e=0;e<t.length;e++){if(!r(t[e])){return t[e]}}return null}t.exports={validateTopics:n}},{}],12:[function(r,n,e){(function(i){(function(){"use strict";const o=r("../client");const e=r("../store");const a=r("url");const l=r("xtend");const u=r("debug")("mqttjs");const f={};if(typeof i!=="undefined"&&i.title!=="browser"||typeof __webpack_require__!=="function"){f.mqtt=r("./tcp");f.tcp=r("./tcp");f.ssl=r("./tls");f.tls=r("./tls");f.mqtts=r("./tls")}else{f.wx=r("./wx");f.wxs=r("./wx");f.ali=r("./ali");f.alis=r("./ali")}f.ws=r("./ws");f.wss=r("./ws");function c(e){let t;if(e.auth){t=e.auth.match(/^(.+):(.+)$/);if(t){e.username=t[1];e.password=t[2]}else{e.username=e.auth}}}function t(e,t){u("connecting to an MQTT broker...");if(typeof e==="object"&&!t){t=e;e=null}t=t||{};if(e){const n=a.parse(e,true);if(n.port!=null){n.port=Number(n.port)}t=l(n,t);if(t.protocol===null){throw new Error("Missing protocol")}t.protocol=t.protocol.replace(/:$/,"")}c(t);if(t.query&&typeof t.query.clientId==="string"){t.clientId=t.query.clientId}if(t.cert&&t.key){if(t.protocol){if(["mqtts","wss","wxs","alis"].indexOf(t.protocol)===-1){switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}}else{throw new Error("Missing secure protocol key")}}if(!f[t.protocol]){const s=["mqtts","wss"].indexOf(t.protocol)!==-1;t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(e,t){if(s&&t%2===0){return false}return typeof f[e]==="function"})[0]}if(t.clean===false&&!t.clientId){throw new Error("Missing clientId for unclean clients")}if(t.protocol){t.defaultProtocol=t.protocol}function i(e){if(t.servers){if(!e._reconnectCount||e._reconnectCount===t.servers.length){e._reconnectCount=0}t.host=t.servers[e._reconnectCount].host;t.port=t.servers[e._reconnectCount].port;t.protocol=!t.servers[e._reconnectCount].protocol?t.defaultProtocol:t.servers[e._reconnectCount].protocol;t.hostname=t.host;e._reconnectCount++}u("calling streambuilder for",t.protocol);return f[t.protocol](e,t)}const r=new o(i,t);r.on("error",function(){});return r}n.exports=t;n.exports.connect=t;n.exports.MqttClient=o;n.exports.Store=e}).call(this)}).call(this,r("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:57,debug:18,url:83,xtend:88}],13:[function(e,t,i){"use strict";i.byteLength=o;i.toByteArray=a;i.fromByteArray=g;var l=[];var u=[];var f=typeof Uint8Array!=="undefined"?Uint8Array:Array;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var n=0,s=r.length;n<s;++n){l[n]=r[n];u[r.charCodeAt(n)]=n}u["-".charCodeAt(0)]=62;u["_".charCodeAt(0)]=63;function c(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var i=e.indexOf("=");if(i===-1)i=t;var r=i===t?0:4-i%4;return[i,r]}function o(e){var t=c(e);var i=t[0];var r=t[1];return(i+r)*3/4-r}function h(e,t,i){return(t+i)*3/4-i}function a(e){var t;var i=c(e);var r=i[0];var n=i[1];var s=new f(h(e,r,n));var o=0;var a=n>0?r-4:r;var l;for(l=0;l<a;l+=4){t=u[e.charCodeAt(l)]<<18|u[e.charCodeAt(l+1)]<<12|u[e.charCodeAt(l+2)]<<6|u[e.charCodeAt(l+3)];s[o++]=t>>16&255;s[o++]=t>>8&255;s[o++]=t&255}if(n===2){t=u[e.charCodeAt(l)]<<2|u[e.charCodeAt(l+1)]>>4;s[o++]=t&255}if(n===1){t=u[e.charCodeAt(l)]<<10|u[e.charCodeAt(l+1)]<<4|u[e.charCodeAt(l+2)]>>2;s[o++]=t>>8&255;s[o++]=t&255}return s}function d(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[e&63]}function p(e,t,i){var r;var n=[];for(var s=t;s<i;s+=3){r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255);n.push(d(r))}return n.join("")}function g(e){var t;var i=e.length;var r=i%3;var n=[];var s=16383;for(var o=0,a=i-r;o<a;o+=s){n.push(p(e,o,o+s>a?a:o+s))}if(r===1){t=e[i-1];n.push(l[t>>2]+l[t<<4&63]+"==")}else if(r===2){t=(e[i-2]<<8)+e[i-1];n.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")}return n.join("")}},{}],14:[function(e,t,i){"use strict";const{Buffer:c}=e("buffer");const r=Symbol.for("BufferList");function n(e){if(!(this instanceof n)){return new n(e)}n._init.call(this,e)}n._init=function e(t){Object.defineProperty(this,r,{value:true});this._bufs=[];this.length=0;if(t){this.append(t)}};n.prototype._new=function e(t){return new n(t)};n.prototype._offset=function e(t){if(t===0){return[0,0]}let i=0;for(let e=0;e<this._bufs.length;e++){const r=i+this._bufs[e].length;if(t<r||e===this._bufs.length-1){return[e,t-i]}i=r}};n.prototype._reverseOffset=function(e){const t=e[0];let i=e[1];for(let e=0;e<t;e++){i+=this._bufs[e].length}return i};n.prototype.get=function e(t){if(t>this.length||t<0){return undefined}const i=this._offset(t);return this._bufs[i[0]][i[1]]};n.prototype.slice=function e(t,i){if(typeof t==="number"&&t<0){t+=this.length}if(typeof i==="number"&&i<0){i+=this.length}return this.copy(null,0,t,i)};n.prototype.copy=function e(t,i,r,n){if(typeof r!=="number"||r<0){r=0}if(typeof n!=="number"||n>this.length){n=this.length}if(r>=this.length){return t||c.alloc(0)}if(n<=0){return t||c.alloc(0)}const e=!!t;const s=this._offset(r);const o=n-r;let a=o;let l=e&&i||0;let u=s[1];if(r===0&&n===this.length){if(!e){return this._bufs.length===1?this._bufs[0]:c.concat(this._bufs,this.length)}for(let e=0;e<this._bufs.length;e++){this._bufs[e].copy(t,l);l+=this._bufs[e].length}return t}if(a<=this._bufs[s[0]].length-u){return e?this._bufs[s[0]].copy(t,i,u,u+a):this._bufs[s[0]].slice(u,u+a)}if(!e){t=c.allocUnsafe(o)}for(let e=s[0];e<this._bufs.length;e++){const f=this._bufs[e].length-u;if(a>f){this._bufs[e].copy(t,l,u);l+=f}else{this._bufs[e].copy(t,l,u,u+a);l+=f;break}a-=f;if(u){u=0}}if(t.length>l)return t.slice(0,l);return t};n.prototype.shallowSlice=function e(t,i){t=t||0;i=typeof i!=="number"?this.length:i;if(t<0){t+=this.length}if(i<0){i+=this.length}if(t===i){return this._new()}const r=this._offset(t);const n=this._offset(i);const s=this._bufs.slice(r[0],n[0]+1);if(n[1]===0){s.pop()}else{s[s.length-1]=s[s.length-1].slice(0,n[1])}if(r[1]!==0){s[0]=s[0].slice(r[1])}return this._new(s)};n.prototype.toString=function e(t,i,r){return this.slice(i,r).toString(t)};n.prototype.consume=function e(t){t=Math.trunc(t);if(Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(t>=this._bufs[0].length){t-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(t);this.length-=t;break}}return this};n.prototype.duplicate=function e(){const t=this._new();for(let e=0;e<this._bufs.length;e++){t.append(this._bufs[e])}return t};n.prototype.append=function e(t){if(t==null){return this}if(t.buffer){this._appendBuffer(c.from(t.buffer,t.byteOffset,t.byteLength))}else if(Array.isArray(t)){for(let e=0;e<t.length;e++){this.append(t[e])}}else if(this._isBufferList(t)){for(let e=0;e<t._bufs.length;e++){this.append(t._bufs[e])}}else{if(typeof t==="number"){t=t.toString()}this._appendBuffer(c.from(t))}return this};n.prototype._appendBuffer=function e(t){this._bufs.push(t);this.length+=t.length};n.prototype.indexOf=function(e,t,i){if(i===undefined&&typeof t==="string"){i=t;t=undefined}if(typeof e==="function"||Array.isArray(e)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof e==="number"){e=c.from([e])}else if(typeof e==="string"){e=c.from(e,i)}else if(this._isBufferList(e)){e=e.slice()}else if(Array.isArray(e.buffer)){e=c.from(e.buffer,e.byteOffset,e.byteLength)}else if(!c.isBuffer(e)){e=c.from(e)}t=Number(t||0);if(isNaN(t)){t=0}if(t<0){t=this.length+t}if(t<0){t=0}if(e.length===0){return t>this.length?this.length:t}const r=this._offset(t);let n=r[0];let s=r[1];for(;n<this._bufs.length;n++){const o=this._bufs[n];while(s<o.length){const a=o.length-s;if(a>=e.length){const l=o.indexOf(e,s);if(l!==-1){return this._reverseOffset([n,l])}s=o.length-e.length+1}else{const u=this._reverseOffset([n,s]);if(this._match(u,e)){return u}s++}}s=0}return-1};n.prototype._match=function(t,i){if(this.length-t<i.length){return false}for(let e=0;e<i.length;e++){if(this.get(t+e)!==i[e]){return false}}return true};(function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t){(function(i){if(t[i]===null){n.prototype[i]=function(e,t){return this.slice(e,e+t)[i](0,t)}}else{n.prototype[i]=function(e=0){return this.slice(e,e+t[i])[i](0)}}})(e)}})();n.prototype._isBufferList=function e(t){return t instanceof n||n.isBufferList(t)};n.isBufferList=function e(t){return t!=null&&t[r]};t.exports=n},{buffer:17}],15:[function(e,t,i){"use strict";const r=e("readable-stream").Duplex;const n=e("inherits");const s=e("./BufferList");function o(e){if(!(this instanceof o)){return new o(e)}if(typeof e==="function"){this._callback=e;const i=function e(t){if(this._callback){this._callback(t);this._callback=null}}.bind(this);this.on("pipe",function e(t){t.on("error",i)});this.on("unpipe",function e(t){t.removeListener("error",i)});e=null}s._init.call(this,e);r.call(this)}n(o,r);Object.assign(o.prototype,s.prototype);o.prototype._new=function e(t){return new o(t)};o.prototype._write=function e(t,i,r){this._appendBuffer(t);if(typeof r==="function"){r()}};o.prototype._read=function e(t){if(!this.length){return this.push(null)}t=Math.min(t,this.length);this.push(this.slice(0,t));this.consume(t)};o.prototype.end=function e(t){r.prototype.end.call(this,t);if(this._callback){this._callback(null,this.slice());this._callback=null}};o.prototype._destroy=function e(t,i){this._bufs.length=0;this.length=0;i(t)};o.prototype._isBufferList=function e(t){return t instanceof o||t instanceof s||o.isBufferList(t)};o.isBufferList=s.isBufferList;t.exports=o;t.exports.BufferListStream=o;t.exports.BufferList=s},{"./BufferList":14,inherits:24,"readable-stream":76}],16:[function(e,t,i){},{}],17:[function(G,e,X){(function(e){(function(){"use strict";var r=G("base64-js");var s=G("ieee754");X.Buffer=h;X.SlowBuffer=t;X.INSPECT_MAX_BYTES=50;var i=2147483647;X.kMaxLength=i;h.TYPED_ARRAY_SUPPORT=e();if(!h.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function e(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}Object.defineProperty(h.prototype,"parent",{enumerable:true,get:function(){if(!h.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(h.prototype,"offset",{enumerable:true,get:function(){if(!h.isBuffer(this))return undefined;return this.byteOffset}});function o(e){if(e>i){throw new RangeError('The value "'+e+'" is invalid for option "size"')}var t=new Uint8Array(e);t.__proto__=h.prototype;return t}function h(e,t,i){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return u(e)}return n(e,t,i)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&h[Symbol.species]===h){Object.defineProperty(h,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}h.poolSize=8192;function n(e,t,i){if(typeof e==="string"){return f(e,t)}if(ArrayBuffer.isView(e)){return c(e)}if(e==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)){return d(e,t,i)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var r=e.valueOf&&e.valueOf();if(r!=null&&r!==e){return h.from(r,t,i)}var n=p(e);if(n)return n;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return h.from(e[Symbol.toPrimitive]("string"),t,i)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}h.from=function(e,t,i){return n(e,t,i)};h.prototype.__proto__=Uint8Array.prototype;h.__proto__=Uint8Array;function a(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function l(e,t,i){a(e);if(e<=0){return o(e)}if(t!==undefined){return typeof i==="string"?o(e).fill(t,i):o(e).fill(t)}return o(e)}h.alloc=function(e,t,i){return l(e,t,i)};function u(e){a(e);return o(e<0?0:g(e)|0)}h.allocUnsafe=function(e){return u(e)};h.allocUnsafeSlow=function(e){return u(e)};function f(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!h.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var i=m(e,t)|0;var r=o(i);var n=r.write(e,t);if(n!==i){r=r.slice(0,n)}return r}function c(e){var t=e.length<0?0:g(e.length)|0;var i=o(t);for(var r=0;r<t;r+=1){i[r]=e[r]&255}return i}function d(e,t,i){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(i||0)){throw new RangeError('"length" is outside of buffer bounds')}var r;if(t===undefined&&i===undefined){r=new Uint8Array(e)}else if(i===undefined){r=new Uint8Array(e,t)}else{r=new Uint8Array(e,t,i)}r.__proto__=h.prototype;return r}function p(e){if(h.isBuffer(e)){var t=g(e.length)|0;var i=o(t);if(i.length===0){return i}e.copy(i,0,0,t);return i}if(e.length!==undefined){if(typeof e.length!=="number"||N(e.length)){return o(0)}return c(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return c(e.data)}}function g(e){if(e>=i){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+i.toString(16)+" bytes")}return e|0}function t(e){if(+e!=e){e=0}return h.alloc(+e)}h.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==h.prototype};h.compare=function e(t,i){if(R(t,Uint8Array))t=h.from(t,t.offset,t.byteLength);if(R(i,Uint8Array))i=h.from(i,i.offset,i.byteLength);if(!h.isBuffer(t)||!h.isBuffer(i)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===i)return 0;var r=t.length;var n=i.length;for(var s=0,o=Math.min(r,n);s<o;++s){if(t[s]!==i[s]){r=t[s];n=i[s];break}}if(r<n)return-1;if(n<r)return 1;return 0};h.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};h.concat=function e(t,i){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return h.alloc(0)}var r;if(i===undefined){i=0;for(r=0;r<t.length;++r){i+=t[r].length}}var n=h.allocUnsafe(i);var s=0;for(r=0;r<t.length;++r){var o=t[r];if(R(o,Uint8Array)){o=h.from(o)}if(!h.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(n,s);s+=o.length}return n};function m(e,t){if(h.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||R(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e)}var i=e.length;var r=arguments.length>2&&arguments[2]===true;if(!r&&i===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return O(e).length;default:if(n){return r?-1:P(e).length}t=(""+t).toLowerCase();n=true}}}h.byteLength=m;function y(e,t,i){var r=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(i===undefined||i>this.length){i=this.length}if(i<=0){return""}i>>>=0;t>>>=0;if(i<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return V(this,t,i);case"utf8":case"utf-8":return S(this,t,i);case"ascii":return U(this,t,i);case"latin1":case"binary":return z(this,t,i);case"base64":return D(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();r=true}}}h.prototype._isBuffer=true;function v(e,t,i){var r=e[t];e[t]=e[i];e[i]=r}h.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<t;i+=2){v(this,i,i+1)}return this};h.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<t;i+=4){v(this,i,i+3);v(this,i+1,i+2)}return this};h.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<t;i+=8){v(this,i,i+7);v(this,i+1,i+6);v(this,i+2,i+5);v(this,i+3,i+4)}return this};h.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return S(this,0,t);return y.apply(this,arguments)};h.prototype.toLocaleString=h.prototype.toString;h.prototype.equals=function e(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return h.compare(this,t)===0};h.prototype.inspect=function e(){var t="";var i=X.INSPECT_MAX_BYTES;t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim();if(this.length>i)t+=" ... ";return"<Buffer "+t+">"};h.prototype.compare=function e(t,i,r,n,s){if(R(t,Uint8Array)){t=h.from(t,t.offset,t.byteLength)}if(!h.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof t)}if(i===undefined){i=0}if(r===undefined){r=t?t.length:0}if(n===undefined){n=0}if(s===undefined){s=this.length}if(i<0||r>t.length||n<0||s>this.length){throw new RangeError("out of range index")}if(n>=s&&i>=r){return 0}if(n>=s){return-1}if(i>=r){return 1}i>>>=0;r>>>=0;n>>>=0;s>>>=0;if(this===t)return 0;var o=s-n;var a=r-i;var l=Math.min(o,a);var u=this.slice(n,s);var f=t.slice(i,r);for(var c=0;c<l;++c){if(u[c]!==f[c]){o=u[c];a=f[c];break}}if(o<a)return-1;if(a<o)return 1;return 0};function b(e,t,i,r,n){if(e.length===0)return-1;if(typeof i==="string"){r=i;i=0}else if(i>2147483647){i=2147483647}else if(i<-2147483648){i=-2147483648}i=+i;if(N(i)){i=n?0:e.length-1}if(i<0)i=e.length+i;if(i>=e.length){if(n)return-1;else i=e.length-1}else if(i<0){if(n)i=0;else return-1}if(typeof t==="string"){t=h.from(t,r)}if(h.isBuffer(t)){if(t.length===0){return-1}return w(e,t,i,r,n)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(n){return Uint8Array.prototype.indexOf.call(e,t,i)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,i)}}return w(e,[t],i,r,n)}throw new TypeError("val must be string, number or Buffer")}function w(e,t,i,r,n){var s=1;var o=e.length;var a=t.length;if(r!==undefined){r=String(r).toLowerCase();if(r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le"){if(e.length<2||t.length<2){return-1}s=2;o/=2;a/=2;i/=2}}function l(e,t){if(s===1){return e[t]}else{return e.readUInt16BE(t*s)}}var u;if(n){var f=-1;for(u=i;u<o;u++){if(l(e,u)===l(t,f===-1?0:u-f)){if(f===-1)f=u;if(u-f+1===a)return f*s}else{if(f!==-1)u-=u-f;f=-1}}}else{if(i+a>o)i=o-a;for(u=i;u>=0;u--){var c=true;for(var h=0;h<a;h++){if(l(e,u+h)!==l(t,h)){c=false;break}}if(c)return u}}return-1}h.prototype.includes=function e(t,i,r){return this.indexOf(t,i,r)!==-1};h.prototype.indexOf=function e(t,i,r){return b(this,t,i,r,true)};h.prototype.lastIndexOf=function e(t,i,r){return b(this,t,i,r,false)};function _(e,t,i,r){i=Number(i)||0;var n=e.length-i;if(!r){r=n}else{r=Number(r);if(r>n){r=n}}var s=t.length;if(r>s/2){r=s/2}for(var o=0;o<r;++o){var a=parseInt(t.substr(o*2,2),16);if(N(a))return o;e[i+o]=a}return o}function x(e,t,i,r){return M(P(t,e.length-i),e,i,r)}function k(e,t,i,r){return M(K(t),e,i,r)}function L(e,t,i,r){return k(e,t,i,r)}function F(e,t,i,r){return M(O(t),e,i,r)}function j(e,t,i,r){return M(Y(t,e.length-i),e,i,r)}h.prototype.write=function e(t,i,r,n){if(i===undefined){n="utf8";r=this.length;i=0}else if(r===undefined&&typeof i==="string"){n=i;r=this.length;i=0}else if(isFinite(i)){i=i>>>0;if(isFinite(r)){r=r>>>0;if(n===undefined)n="utf8"}else{n=r;r=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var s=this.length-i;if(r===undefined||r>s)r=s;if(t.length>0&&(r<0||i<0)||i>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";var o=false;for(;;){switch(n){case"hex":return _(this,t,i,r);case"utf8":case"utf-8":return x(this,t,i,r);case"ascii":return k(this,t,i,r);case"latin1":case"binary":return L(this,t,i,r);case"base64":return F(this,t,i,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,i,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();o=true}}};h.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(e,t,i){if(t===0&&i===e.length){return r.fromByteArray(e)}else{return r.fromByteArray(e.slice(t,i))}}function S(e,t,i){i=Math.min(e.length,i);var r=[];var n=t;while(n<i){var s=e[n];var o=null;var a=s>239?4:s>223?3:s>191?2:1;if(n+a<=i){var l,u,f,c;switch(a){case 1:if(s<128){o=s}break;case 2:l=e[n+1];if((l&192)===128){c=(s&31)<<6|l&63;if(c>127){o=c}}break;case 3:l=e[n+1];u=e[n+2];if((l&192)===128&&(u&192)===128){c=(s&15)<<12|(l&63)<<6|u&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:l=e[n+1];u=e[n+2];f=e[n+3];if((l&192)===128&&(u&192)===128&&(f&192)===128){c=(s&15)<<18|(l&63)<<12|(u&63)<<6|f&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;a=1}else if(o>65535){o-=65536;r.push(o>>>10&1023|55296);o=56320|o&1023}r.push(o);n+=a}return q(r)}var E=4096;function q(e){var t=e.length;if(t<=E){return String.fromCharCode.apply(String,e)}var i="";var r=0;while(r<t){i+=String.fromCharCode.apply(String,e.slice(r,r+=E))}return i}function U(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n){r+=String.fromCharCode(e[n]&127)}return r}function z(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n){r+=String.fromCharCode(e[n])}return r}function V(e,t,i){var r=e.length;if(!t||t<0)t=0;if(!i||i<0||i>r)i=r;var n="";for(var s=t;s<i;++s){n+=Q(e[s])}return n}function W(e,t,i){var r=e.slice(t,i);var n="";for(var s=0;s<r.length;s+=2){n+=String.fromCharCode(r[s]+r[s+1]*256)}return n}h.prototype.slice=function e(t,i){var r=this.length;t=~~t;i=i===undefined?r:~~i;if(t<0){t+=r;if(t<0)t=0}else if(t>r){t=r}if(i<0){i+=r;if(i<0)i=0}else if(i>r){i=r}if(i<t)i=t;var n=this.subarray(t,i);n.__proto__=h.prototype;return n};function C(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUIntLE=function e(t,i,r){t=t>>>0;i=i>>>0;if(!r)C(t,i,this.length);var n=this[t];var s=1;var o=0;while(++o<i&&(s*=256)){n+=this[t+o]*s}return n};h.prototype.readUIntBE=function e(t,i,r){t=t>>>0;i=i>>>0;if(!r){C(t,i,this.length)}var n=this[t+--i];var s=1;while(i>0&&(s*=256)){n+=this[t+--i]*s}return n};h.prototype.readUInt8=function e(t,i){t=t>>>0;if(!i)C(t,1,this.length);return this[t]};h.prototype.readUInt16LE=function e(t,i){t=t>>>0;if(!i)C(t,2,this.length);return this[t]|this[t+1]<<8};h.prototype.readUInt16BE=function e(t,i){t=t>>>0;if(!i)C(t,2,this.length);return this[t]<<8|this[t+1]};h.prototype.readUInt32LE=function e(t,i){t=t>>>0;if(!i)C(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};h.prototype.readUInt32BE=function e(t,i){t=t>>>0;if(!i)C(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};h.prototype.readIntLE=function e(t,i,r){t=t>>>0;i=i>>>0;if(!r)C(t,i,this.length);var n=this[t];var s=1;var o=0;while(++o<i&&(s*=256)){n+=this[t+o]*s}s*=128;if(n>=s)n-=Math.pow(2,8*i);return n};h.prototype.readIntBE=function e(t,i,r){t=t>>>0;i=i>>>0;if(!r)C(t,i,this.length);var n=i;var s=1;var o=this[t+--n];while(n>0&&(s*=256)){o+=this[t+--n]*s}s*=128;if(o>=s)o-=Math.pow(2,8*i);return o};h.prototype.readInt8=function e(t,i){t=t>>>0;if(!i)C(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};h.prototype.readInt16LE=function e(t,i){t=t>>>0;if(!i)C(t,2,this.length);var r=this[t]|this[t+1]<<8;return r&32768?r|4294901760:r};h.prototype.readInt16BE=function e(t,i){t=t>>>0;if(!i)C(t,2,this.length);var r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r};h.prototype.readInt32LE=function e(t,i){t=t>>>0;if(!i)C(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};h.prototype.readInt32BE=function e(t,i){t=t>>>0;if(!i)C(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};h.prototype.readFloatLE=function e(t,i){t=t>>>0;if(!i)C(t,4,this.length);return s.read(this,t,true,23,4)};h.prototype.readFloatBE=function e(t,i){t=t>>>0;if(!i)C(t,4,this.length);return s.read(this,t,false,23,4)};h.prototype.readDoubleLE=function e(t,i){t=t>>>0;if(!i)C(t,8,this.length);return s.read(this,t,true,52,8)};h.prototype.readDoubleBE=function e(t,i){t=t>>>0;if(!i)C(t,8,this.length);return s.read(this,t,false,52,8)};function A(e,t,i,r,n,s){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}h.prototype.writeUIntLE=function e(t,i,r,n){t=+t;i=i>>>0;r=r>>>0;if(!n){var s=Math.pow(2,8*r)-1;A(this,t,i,r,s,0)}var o=1;var a=0;this[i]=t&255;while(++a<r&&(o*=256)){this[i+a]=t/o&255}return i+r};h.prototype.writeUIntBE=function e(t,i,r,n){t=+t;i=i>>>0;r=r>>>0;if(!n){var s=Math.pow(2,8*r)-1;A(this,t,i,r,s,0)}var o=r-1;var a=1;this[i+o]=t&255;while(--o>=0&&(a*=256)){this[i+o]=t/a&255}return i+r};h.prototype.writeUInt8=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,1,255,0);this[i]=t&255;return i+1};h.prototype.writeUInt16LE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,2,65535,0);this[i]=t&255;this[i+1]=t>>>8;return i+2};h.prototype.writeUInt16BE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,2,65535,0);this[i]=t>>>8;this[i+1]=t&255;return i+2};h.prototype.writeUInt32LE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,4,4294967295,0);this[i+3]=t>>>24;this[i+2]=t>>>16;this[i+1]=t>>>8;this[i]=t&255;return i+4};h.prototype.writeUInt32BE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,4,4294967295,0);this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255;return i+4};h.prototype.writeIntLE=function e(t,i,r,n){t=+t;i=i>>>0;if(!n){var s=Math.pow(2,8*r-1);A(this,t,i,r,s-1,-s)}var o=0;var a=1;var l=0;this[i]=t&255;while(++o<r&&(a*=256)){if(t<0&&l===0&&this[i+o-1]!==0){l=1}this[i+o]=(t/a>>0)-l&255}return i+r};h.prototype.writeIntBE=function e(t,i,r,n){t=+t;i=i>>>0;if(!n){var s=Math.pow(2,8*r-1);A(this,t,i,r,s-1,-s)}var o=r-1;var a=1;var l=0;this[i+o]=t&255;while(--o>=0&&(a*=256)){if(t<0&&l===0&&this[i+o+1]!==0){l=1}this[i+o]=(t/a>>0)-l&255}return i+r};h.prototype.writeInt8=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,1,127,-128);if(t<0)t=255+t+1;this[i]=t&255;return i+1};h.prototype.writeInt16LE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,2,32767,-32768);this[i]=t&255;this[i+1]=t>>>8;return i+2};h.prototype.writeInt16BE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,2,32767,-32768);this[i]=t>>>8;this[i+1]=t&255;return i+2};h.prototype.writeInt32LE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,4,2147483647,-2147483648);this[i]=t&255;this[i+1]=t>>>8;this[i+2]=t>>>16;this[i+3]=t>>>24;return i+4};h.prototype.writeInt32BE=function e(t,i,r){t=+t;i=i>>>0;if(!r)A(this,t,i,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255;return i+4};function I(e,t,i,r,n,s){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function T(e,t,i,r,n){t=+t;i=i>>>0;if(!n){I(e,t,i,4,34028234663852886e22,-34028234663852886e22)}s.write(e,t,i,r,23,4);return i+4}h.prototype.writeFloatLE=function e(t,i,r){return T(this,t,i,true,r)};h.prototype.writeFloatBE=function e(t,i,r){return T(this,t,i,false,r)};function B(e,t,i,r,n){t=+t;i=i>>>0;if(!n){I(e,t,i,8,17976931348623157e292,-17976931348623157e292)}s.write(e,t,i,r,52,8);return i+8}h.prototype.writeDoubleLE=function e(t,i,r){return B(this,t,i,true,r)};h.prototype.writeDoubleBE=function e(t,i,r){return B(this,t,i,false,r)};h.prototype.copy=function e(t,i,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!r)r=0;if(!n&&n!==0)n=this.length;if(i>=t.length)i=t.length;if(!i)i=0;if(n>0&&n<r)n=r;if(n===r)return 0;if(t.length===0||this.length===0)return 0;if(i<0){throw new RangeError("targetStart out of bounds")}if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(t.length-i<n-r){n=t.length-i+r}var s=n-r;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(i,r,n)}else if(this===t&&r<i&&i<n){for(var o=s-1;o>=0;--o){t[o+i]=this[o+r]}}else{Uint8Array.prototype.set.call(t,this.subarray(r,n),i)}return s};h.prototype.fill=function e(t,i,r,n){if(typeof t==="string"){if(typeof i==="string"){n=i;i=0;r=this.length}else if(typeof r==="string"){n=r;r=this.length}if(n!==undefined&&typeof n!=="string"){throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!h.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}if(t.length===1){var s=t.charCodeAt(0);if(n==="utf8"&&s<128||n==="latin1"){t=s}}}else if(typeof t==="number"){t=t&255}if(i<0||this.length<i||this.length<r){throw new RangeError("Out of range index")}if(r<=i){return this}i=i>>>0;r=r===undefined?this.length:r>>>0;if(!t)t=0;var o;if(typeof t==="number"){for(o=i;o<r;++o){this[o]=t}}else{var a=h.isBuffer(t)?t:h.from(t,n);var l=a.length;if(l===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(o=0;o<r-i;++o){this[o+i]=a[o%l]}}return this};var H=/[^+/0-9A-Za-z-_]/g;function $(e){e=e.split("=")[0];e=e.trim().replace(H,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Q(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function P(e,t){t=t||Infinity;var i;var r=e.length;var n=null;var s=[];for(var o=0;o<r;++o){i=e.charCodeAt(o);if(i>55295&&i<57344){if(!n){if(i>56319){if((t-=3)>-1)s.push(239,191,189);continue}else if(o+1===r){if((t-=3)>-1)s.push(239,191,189);continue}n=i;continue}if(i<56320){if((t-=3)>-1)s.push(239,191,189);n=i;continue}i=(n-55296<<10|i-56320)+65536}else if(n){if((t-=3)>-1)s.push(239,191,189)}n=null;if(i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else{throw new Error("Invalid code point")}}return s}function K(e){var t=[];for(var i=0;i<e.length;++i){t.push(e.charCodeAt(i)&255)}return t}function Y(e,t){var i,r,n;var s=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;i=e.charCodeAt(o);r=i>>8;n=i%256;s.push(n);s.push(r)}return s}function O(e){return r.toByteArray($(e))}function M(e,t,i,r){for(var n=0;n<r;++n){if(n+i>=t.length||n>=e.length)break;t[n+i]=e[n]}return n}function R(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function N(e){return e!==e}}).call(this)}).call(this,G("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(a,l,u){(function(o){(function(){u.formatArgs=t;u.save=i;u.load=r;u.useColors=e;u.storage=n();u.destroy=(()=>{let e=false;return()=>{if(!e){e=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();u.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function t(e){e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+l.exports.humanize(this.diff);if(!this.useColors){return}const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let i=0;let r=0;e[0].replace(/%[a-zA-Z%]/g,e=>{if(e==="%%"){return}i++;if(e==="%c"){r=i}});e.splice(r,0,t)}u.log=console.debug||console.log||(()=>{});function i(e){try{if(e){u.storage.setItem("debug",e)}else{u.storage.removeItem("debug")}}catch(e){}}function r(){let e;try{e=u.storage.getItem("debug")}catch(e){}if(!e&&typeof o!=="undefined"&&"env"in o){e=o.env.DEBUG}return e}function n(){try{return localStorage}catch(e){}}l.exports=a("./common")(u);const{formatters:s}=l.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,a("_process"))},{"./common":19,_process:57}],19:[function(f,e,t){function i(t){l.debug=l;l.default=l;l.coerce=a;l.disable=r;l.enable=i;l.enabled=n;l.humanize=f("ms");l.destroy=u;Object.keys(t).forEach(e=>{l[e]=t[e]});l.names=[];l.skips=[];l.formatters={};function e(t){let i=0;for(let e=0;e<t.length;e++){i=(i<<5)-i+t.charCodeAt(e);i|=0}return l.colors[Math.abs(i)%l.colors.length]}l.selectColor=e;function l(e){let r;let t=null;let i;let n;function a(...n){if(!a.enabled){return}const s=a;const e=Number(new Date);const t=e-(r||e);s.diff=t;s.prev=r;s.curr=e;r=e;n[0]=l.coerce(n[0]);if(typeof n[0]!=="string"){n.unshift("%O")}let o=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(e,t)=>{if(e==="%%"){return"%"}o++;const i=l.formatters[t];if(typeof i==="function"){const r=n[o];e=i.call(s,r);n.splice(o,1);o--}return e});l.formatArgs.call(s,n);const i=s.log||l.log;i.apply(s,n)}a.namespace=e;a.useColors=l.useColors();a.color=l.selectColor(e);a.extend=s;a.destroy=l.destroy;Object.defineProperty(a,"enabled",{enumerable:true,configurable:false,get:()=>{if(t!==null){return t}if(i!==l.namespaces){i=l.namespaces;n=l.enabled(e)}return n},set:e=>{t=e}});if(typeof l.init==="function"){l.init(a)}return a}function s(e,t){const i=l(this.namespace+(typeof t==="undefined"?":":t)+e);i.log=this.log;return i}function i(e){l.save(e);l.namespaces=e;l.names=[];l.skips=[];let t;const i=(typeof e==="string"?e:"").split(/[\s,]+/);const r=i.length;for(t=0;t<r;t++){if(!i[t]){continue}e=i[t].replace(/\*/g,".*?");if(e[0]==="-"){l.skips.push(new RegExp("^"+e.slice(1)+"$"))}else{l.names.push(new RegExp("^"+e+"$"))}}}function r(){const e=[...l.names.map(o),...l.skips.map(o).map(e=>"-"+e)].join(",");l.enable("");return e}function n(e){if(e[e.length-1]==="*"){return true}let t;let i;for(t=0,i=l.skips.length;t<i;t++){if(l.skips[t].test(e)){return false}}for(t=0,i=l.names.length;t<i;t++){if(l.names[t].test(e)){return true}}return false}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function a(e){if(e instanceof Error){return e.stack||e.message}return e}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}l.enable(l.load());return l}e.exports=i},{ms:52}],20:[function(p,g,e){(function(h,d){(function(){var r=p("readable-stream");var o=p("end-of-stream");var e=p("inherits");var t=p("stream-shift");var n=d.from&&d.from!==Uint8Array.from?d.from([0]):new d([0]);var s=function(e,t){if(e._corked)e.once("uncork",t);else t()};var a=function(e,t){if(e._autoDestroy)e.destroy(t)};var l=function(t,i){return function(e){if(e)a(t,e.message==="premature close"?null:e);else if(i&&!t._ended)t.end()}};var i=function(e,t){if(!e)return t();if(e._writableState&&e._writableState.finished)return t();if(e._writableState)return e.end(t);e.end();t()};var u=function(){};var f=function(e){return new r.Readable({objectMode:true,highWaterMark:16}).wrap(e)};var c=function(e,t,i){if(!(this instanceof c))return new c(e,t,i);r.Duplex.call(this,i);this._writable=null;this._readable=null;this._readable2=null;this._autoDestroy=!i||i.autoDestroy!==false;this._forwardDestroy=!i||i.destroy!==false;this._forwardEnd=!i||i.end!==false;this._corked=1;this._ondrain=null;this._drained=false;this._forwarding=false;this._unwrite=null;this._unread=null;this._ended=false;this.destroyed=false;if(e)this.setWritable(e);if(t)this.setReadable(t)};e(c,r.Duplex);c.obj=function(e,t,i){if(!i)i={};i.objectMode=true;i.highWaterMark=16;return new c(e,t,i)};c.prototype.cork=function(){if(++this._corked===1)this.emit("cork")};c.prototype.uncork=function(){if(this._corked&&--this._corked===0)this.emit("uncork")};c.prototype.setWritable=function(e){if(this._unwrite)this._unwrite();if(this.destroyed){if(e&&e.destroy)e.destroy();return}if(e===null||e===false){this.end();return}var t=this;var i=o(e,{writable:true,readable:false},l(this,this._forwardEnd));var r=function(){var e=t._ondrain;t._ondrain=null;if(e)e()};var n=function(){t._writable.removeListener("drain",r);i()};if(this._unwrite)h.nextTick(r);this._writable=e;this._writable.on("drain",r);this._unwrite=n;this.uncork()};c.prototype.setReadable=function(e){if(this._unread)this._unread();if(this.destroyed){if(e&&e.destroy)e.destroy();return}if(e===null||e===false){this.push(null);this.resume();return}var t=this;var i=o(e,{writable:false,readable:true},l(this));var r=function(){t._forward()};var n=function(){t.push(null)};var s=function(){t._readable2.removeListener("readable",r);t._readable2.removeListener("end",n);i()};this._drained=true;this._readable=e;this._readable2=e._readableState?e:f(e);this._readable2.on("readable",r);this._readable2.on("end",n);this._unread=s;this._forward()};c.prototype._read=function(){this._drained=true;this._forward()};c.prototype._forward=function(){if(this._forwarding||!this._readable2||!this._drained)return;this._forwarding=true;var e;while(this._drained&&(e=t(this._readable2))!==null){if(this.destroyed)continue;this._drained=this.push(e)}this._forwarding=false};c.prototype.destroy=function(e,t){if(!t)t=u;if(this.destroyed)return t(null);this.destroyed=true;var i=this;h.nextTick(function(){i._destroy(e);t(null)})};c.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null;if(t)t(e);else this.emit("error",e)}if(this._forwardDestroy){if(this._readable&&this._readable.destroy)this._readable.destroy();if(this._writable&&this._writable.destroy)this._writable.destroy()}this.emit("close")};c.prototype._write=function(e,t,i){if(this.destroyed)return;if(this._corked)return s(this,this._write.bind(this,e,t,i));if(e===n)return this._finish(i);if(!this._writable)return i();if(this._writable.write(e)===false)this._ondrain=i;else if(!this.destroyed)i()};c.prototype._finish=function(e){var t=this;this.emit("preend");s(this,function(){i(t._forwardEnd&&t._writable,function(){if(t._writableState.prefinished===false)t._writableState.prefinished=true;t.emit("prefinish");s(t,e)})})};c.prototype.end=function(e,t,i){if(typeof e==="function")return this.end(null,null,e);if(typeof t==="function")return this.end(e,null,t);this._ended=true;if(e)this.write(e);if(!this._writableState.ending&&!this._writableState.destroyed)this.write(n);return r.Writable.prototype.end.call(this,i)};g.exports=c}).call(this)}).call(this,p("_process"),p("buffer").Buffer)},{_process:57,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":76,"stream-shift":81}],21:[function(e,t,i){(function(_){(function(){var m=e("once");var y=function(){};var v=function(e){return e.setHeader&&typeof e.abort==="function"};var b=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3};var w=function(t,e,i){if(typeof e==="function")return w(t,null,e);if(!e)e={};i=m(i||y);var r=t._writableState;var n=t._readableState;var s=e.readable||e.readable!==false&&t.readable;var o=e.writable||e.writable!==false&&t.writable;var a=false;var l=function(){if(!t.writable)u()};var u=function(){o=false;if(!s)i.call(t)};var f=function(){s=false;if(!o)i.call(t)};var c=function(e){i.call(t,e?new Error("exited with error code: "+e):null)};var h=function(e){i.call(t,e)};var d=function(){_.nextTick(p)};var p=function(){if(a)return;if(s&&!(n&&(n.ended&&!n.destroyed)))return i.call(t,new Error("premature close"));if(o&&!(r&&(r.ended&&!r.destroyed)))return i.call(t,new Error("premature close"))};var g=function(){t.req.on("finish",u)};if(v(t)){t.on("complete",u);t.on("abort",d);if(t.req)g();else t.on("request",g)}else if(o&&!r){t.on("end",l);t.on("close",l)}if(b(t))t.on("exit",c);t.on("end",f);t.on("finish",u);if(e.error!==false)t.on("error",h);t.on("close",d);return function(){a=true;t.removeListener("complete",u);t.removeListener("abort",d);t.removeListener("request",g);if(t.req)t.req.removeListener("finish",u);t.removeListener("end",l);t.removeListener("close",l);t.removeListener("finish",u);t.removeListener("exit",c);t.removeListener("end",f);t.removeListener("error",h);t.removeListener("close",d)}};t.exports=w}).call(this)}).call(this,e("_process"))},{_process:57,once:55}],22:[function(e,t,i){var l=Object.create||S;var a=Object.keys||E;var s=Function.prototype.bind||C;function r(){if(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events")){this._events=l(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined}t.exports=r;r.EventEmitter=r;r.prototype._events=undefined;r.prototype._maxListeners=undefined;var n=10;var o;try{var u={};if(Object.defineProperty)Object.defineProperty(u,"x",{value:0});o=u.x===0}catch(e){o=false}if(o){Object.defineProperty(r,"defaultMaxListeners",{enumerable:true,get:function(){return n},set:function(e){if(typeof e!=="number"||e<0||e!==e)throw new TypeError('"defaultMaxListeners" must be a positive number');n=e}})}else{r.defaultMaxListeners=n}r.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');this._maxListeners=t;return this};function f(e){if(e._maxListeners===undefined)return r.defaultMaxListeners;return e._maxListeners}r.prototype.getMaxListeners=function e(){return f(this)};function c(e,t,i){if(t)e.call(i);else{var r=e.length;var n=x(e,r);for(var s=0;s<r;++s)n[s].call(i)}}function h(e,t,i,r){if(t)e.call(i,r);else{var n=e.length;var s=x(e,n);for(var o=0;o<n;++o)s[o].call(i,r)}}function d(e,t,i,r,n){if(t)e.call(i,r,n);else{var s=e.length;var o=x(e,s);for(var a=0;a<s;++a)o[a].call(i,r,n)}}function p(e,t,i,r,n,s){if(t)e.call(i,r,n,s);else{var o=e.length;var a=x(e,o);for(var l=0;l<o;++l)a[l].call(i,r,n,s)}}function g(e,t,i,r){if(t)e.apply(i,r);else{var n=e.length;var s=x(e,n);for(var o=0;o<n;++o)s[o].apply(i,r)}}r.prototype.emit=function e(t){var i,r,n,s,o,a;var l=t==="error";a=this._events;if(a)l=l&&a.error==null;else if(!l)return false;if(l){if(arguments.length>1)i=arguments[1];if(i instanceof Error){throw i}else{var u=new Error('Unhandled "error" event. ('+i+")");u.context=i;throw u}return false}r=a[t];if(!r)return false;var f=typeof r==="function";n=arguments.length;switch(n){case 1:c(r,f,this);break;case 2:h(r,f,this,arguments[1]);break;case 3:d(r,f,this,arguments[1],arguments[2]);break;case 4:p(r,f,this,arguments[1],arguments[2],arguments[3]);break;default:s=new Array(n-1);for(o=1;o<n;o++)s[o-1]=arguments[o];g(r,f,this,s)}return true};function m(e,t,i,r){var n;var s;var o;if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');s=e._events;if(!s){s=e._events=l(null);e._eventsCount=0}else{if(s.newListener){e.emit("newListener",t,i.listener?i.listener:i);s=e._events}o=s[t]}if(!o){o=s[t]=i;++e._eventsCount}else{if(typeof o==="function"){o=s[t]=r?[i,o]:[o,i]}else{if(r){o.unshift(i)}else{o.push(i)}}if(!o.warned){n=f(e);if(n&&n>0&&o.length>n){o.warned=true;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners '+"added. Use emitter.setMaxListeners() to "+"increase limit.");a.name="MaxListenersExceededWarning";a.emitter=e;a.type=t;a.count=o.length;if(typeof console==="object"&&console.warn){console.warn("%s: %s",a.name,a.message)}}}}return e}r.prototype.addListener=function e(t,i){return m(this,t,i,false)};r.prototype.on=r.prototype.addListener;r.prototype.prependListener=function e(t,i){return m(this,t,i,true)};function y(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;switch(arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:var e=new Array(arguments.length);for(var t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}}function v(e,t,i){var r={fired:false,wrapFn:undefined,target:e,type:t,listener:i};var n=s.call(y,r);n.listener=i;r.wrapFn=n;return n}r.prototype.once=function e(t,i){if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');this.on(t,v(this,t,i));return this};r.prototype.prependOnceListener=function e(t,i){if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');this.prependListener(t,v(this,t,i));return this};r.prototype.removeListener=function e(t,i){var r,n,s,o,a;if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');n=this._events;if(!n)return this;r=n[t];if(!r)return this;if(r===i||r.listener===i){if(--this._eventsCount===0)this._events=l(null);else{delete n[t];if(n.removeListener)this.emit("removeListener",t,r.listener||i)}}else if(typeof r!=="function"){s=-1;for(o=r.length-1;o>=0;o--){if(r[o]===i||r[o].listener===i){a=r[o].listener;s=o;break}}if(s<0)return this;if(s===0)r.shift();else _(r,s);if(r.length===1)n[t]=r[0];if(n.removeListener)this.emit("removeListener",t,a||i)}return this};r.prototype.removeAllListeners=function e(t){var i,r,n;r=this._events;if(!r)return this;if(!r.removeListener){if(arguments.length===0){this._events=l(null);this._eventsCount=0}else if(r[t]){if(--this._eventsCount===0)this._events=l(null);else delete r[t]}return this}if(arguments.length===0){var s=a(r);var o;for(n=0;n<s.length;++n){o=s[n];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=l(null);this._eventsCount=0;return this}i=r[t];if(typeof i==="function"){this.removeListener(t,i)}else if(i){for(n=i.length-1;n>=0;n--){this.removeListener(t,i[n])}}return this};function b(e,t,i){var r=e._events;if(!r)return[];var n=r[t];if(!n)return[];if(typeof n==="function")return i?[n.listener||n]:[n];return i?k(n):x(n,n.length)}r.prototype.listeners=function e(t){return b(this,t,true)};r.prototype.rawListeners=function e(t){return b(this,t,false)};r.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return w.call(e,t)}};r.prototype.listenerCount=w;function w(e){var t=this._events;if(t){var i=t[e];if(typeof i==="function"){return 1}else if(i){return i.length}}return 0}r.prototype.eventNames=function e(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function _(e,t){for(var i=t,r=i+1,n=e.length;r<n;i+=1,r+=1)e[i]=e[r];e.pop()}function x(e,t){var i=new Array(t);for(var r=0;r<t;++r)i[r]=e[r];return i}function k(e){var t=new Array(e.length);for(var i=0;i<t.length;++i){t[i]=e[i].listener||e[i]}return t}function S(e){var t=function(){};t.prototype=e;return new t}function E(e){var t=[];for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){t.push(i)}return i}function C(e){var t=this;return function(){return t.apply(e,arguments)}}},{}],23:[function(e,t,i){i.read=function(e,t,i,r,n){var s,o;var a=n*8-r-1;var l=(1<<a)-1;var u=l>>1;var f=-7;var c=i?n-1:0;var h=i?-1:1;var d=e[t+c];c+=h;s=d&(1<<-f)-1;d>>=-f;f+=a;for(;f>0;s=s*256+e[t+c],c+=h,f-=8){}o=s&(1<<-f)-1;s>>=-f;f+=r;for(;f>0;o=o*256+e[t+c],c+=h,f-=8){}if(s===0){s=1-u}else if(s===l){return o?NaN:(d?-1:1)*Infinity}else{o=o+Math.pow(2,r);s=s-u}return(d?-1:1)*o*Math.pow(2,s-r)};i.write=function(e,t,i,r,n,s){var o,a,l;var u=s*8-n-1;var f=(1<<u)-1;var c=f>>1;var h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=r?0:s-1;var p=r?1:-1;var g=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){a=isNaN(t)?1:0;o=f}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}if(o+c>=1){t+=h/l}else{t+=h*Math.pow(2,1-c)}if(t*l>=2){o++;l/=2}if(o+c>=f){a=0;o=f}else if(o+c>=1){a=(t*l-1)*Math.pow(2,n);o=o+c}else{a=t*Math.pow(2,c-1)*Math.pow(2,n);o=0}}for(;n>=8;e[i+d]=a&255,d+=p,a/=256,n-=8){}o=o<<n|a;u+=n;for(;u>0;e[i+d]=o&255,d+=p,o/=256,u-=8){}e[i+d-p]|=g*128}},{}],24:[function(e,t,i){if(typeof Object.create==="function"){t.exports=function e(t,i){if(i){t.super_=i;t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{t.exports=function e(t,i){if(i){t.super_=i;var r=function(){};r.prototype=i.prototype;t.prototype=new r;t.prototype.constructor=t}}}},{}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.Container=i.Base=i.ContainerIterator=void 0;class r{constructor(e=r.NORMAL){this.iteratorType=e}}i.ContainerIterator=r;r.NORMAL=false;r.REVERSE=true;class n{constructor(){this.length=0}size(){return this.length}empty(){return this.length===0}}i.Base=n;class s extends n{}i.Container=s},{}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});const r=e("../../ContainerBase/index");class n extends r.Base{constructor(e=16,t=e=>{let t;if(typeof e!=="string"){t=JSON.stringify(e)}else t=e;let i=0;const r=t.length;for(let e=0;e<r;e++){const n=t.charCodeAt(e);i=(i<<5)-i+n;i|=0}return i>>>0}){super();if(e<16||(e&e-1)!==0){throw new RangeError("InitBucketNum range error")}this.bucketNum=this.initBucketNum=e;this.hashFunc=t}clear(){this.length=0;this.bucketNum=this.initBucketNum;this.hashTable=[]}}n.sigma=.75;n.treeifyThreshold=8;n.untreeifyThreshold=6;n.minTreeifySize=64;n.maxBucketNum=1<<30;i.default=n},{"../../ContainerBase/index":25}],27:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});const c=r(e("./Base/index"));const h=r(e("../SequentialContainer/Vector"));const d=r(e("../TreeContainer/OrderedMap"));class a extends c.default{constructor(e=[],t,i){super(t,i);this.hashTable=[];e.forEach(e=>this.setElement(e[0],e[1]))}reAllocate(){if(this.bucketNum>=c.default.maxBucketNum)return;const t=[];const i=this.bucketNum;this.bucketNum<<=1;const r=Object.keys(this.hashTable);const n=r.length;for(let e=0;e<n;++e){const s=parseInt(r[e]);const o=this.hashTable[s];const a=o.size();if(a===0)continue;if(a===1){const f=o.front();t[this.hashFunc(f[0])&this.bucketNum-1]=new h.default([f],false);continue}const l=[];const u=[];o.forEach(e=>{const t=this.hashFunc(e[0]);if((t&i)===0){l.push(e)}else u.push(e)});if(o instanceof d.default){if(l.length>c.default.untreeifyThreshold){t[s]=new d.default(l)}else if(l.length){t[s]=new h.default(l,false)}if(u.length>c.default.untreeifyThreshold){t[s+i]=new d.default(u)}else if(u.length){t[s+i]=new h.default(u,false)}}else{if(l.length>=c.default.treeifyThreshold){t[s]=new d.default(l)}else if(l.length){t[s]=new h.default(l,false)}if(u.length>=c.default.treeifyThreshold){t[s+i]=new d.default(u)}else if(u.length){t[s+i]=new h.default(u,false)}}}this.hashTable=t}forEach(t){const i=Object.values(this.hashTable);const r=i.length;let n=0;for(let e=0;e<r;++e){i[e].forEach(e=>t(e,n++))}}setElement(e,t){const i=this.hashFunc(e)&this.bucketNum-1;const r=this.hashTable[i];if(!r){this.length+=1;this.hashTable[i]=new h.default([[e,t]],false)}else{const n=r.size();if(r instanceof h.default){for(const s of r){if(s[0]===e){s[1]=t;return}}r.pushBack([e,t]);if(n+1>=a.treeifyThreshold){if(this.bucketNum<=a.minTreeifySize){this.length+=1;this.reAllocate();return}this.hashTable[i]=new d.default(this.hashTable[i])}this.length+=1}else{r.setElement(e,t);const o=r.size();this.length+=o-n}}if(this.length>this.bucketNum*a.sigma){this.reAllocate()}}getElementByKey(e){const t=this.hashFunc(e)&this.bucketNum-1;const i=this.hashTable[t];if(!i)return undefined;if(i instanceof d.default){return i.getElementByKey(e)}else{for(const r of i){if(r[0]===e)return r[1]}return undefined}}eraseElementByKey(t){const e=this.hashFunc(t)&this.bucketNum-1;const i=this.hashTable[e];if(!i)return;if(i instanceof h.default){let e=0;for(const r of i){if(r[0]===t){i.eraseElementByPos(e);this.length-=1;return}e+=1}}else{const n=i.size();i.eraseElementByKey(t);const s=i.size();this.length+=s-n;if(s<=c.default.untreeifyThreshold){this.hashTable[e]=new h.default(i)}}}find(e){const t=this.hashFunc(e)&this.bucketNum-1;const i=this.hashTable[t];if(!i)return false;if(i instanceof d.default){return!i.find(e).equals(i.end())}for(const r of i){if(r[0]===e)return true}return false}[Symbol.iterator](){return function*(){const t=Object.values(this.hashTable);const i=t.length;for(let e=0;e<i;++e){const r=t[e];for(const n of r){yield n}}}.bind(this)()}}i.default=a},{"../SequentialContainer/Vector":36,"../TreeContainer/OrderedMap":40,"./Base/index":26}],28:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});const c=r(e("./Base/index"));const h=r(e("../SequentialContainer/Vector"));const d=r(e("../TreeContainer/OrderedSet"));class n extends c.default{constructor(e=[],t,i){super(t,i);this.hashTable=[];e.forEach(e=>this.insert(e))}reAllocate(){if(this.bucketNum>=c.default.maxBucketNum)return;const t=[];const i=this.bucketNum;this.bucketNum<<=1;const r=Object.keys(this.hashTable);const n=r.length;for(let e=0;e<n;++e){const s=parseInt(r[e]);const o=this.hashTable[s];const a=o.size();if(a===0)continue;if(a===1){const f=o.front();t[this.hashFunc(f)&this.bucketNum-1]=new h.default([f],false);continue}const l=[];const u=[];o.forEach(e=>{const t=this.hashFunc(e);if((t&i)===0){l.push(e)}else u.push(e)});if(o instanceof d.default){if(l.length>c.default.untreeifyThreshold){t[s]=new d.default(l)}else if(l.length){t[s]=new h.default(l,false)}if(u.length>c.default.untreeifyThreshold){t[s+i]=new d.default(u)}else if(u.length){t[s+i]=new h.default(u,false)}}else{if(l.length>=c.default.treeifyThreshold){t[s]=new d.default(l)}else if(l.length){t[s]=new h.default(l,false)}if(u.length>=c.default.treeifyThreshold){t[s+i]=new d.default(u)}else if(u.length){t[s+i]=new h.default(u,false)}}}this.hashTable=t}forEach(t){const i=Object.values(this.hashTable);const r=i.length;let n=0;for(let e=0;e<r;++e){i[e].forEach(e=>t(e,n++))}}insert(e){const t=this.hashFunc(e)&this.bucketNum-1;const i=this.hashTable[t];if(!i){this.hashTable[t]=new h.default([e],false);this.length+=1}else{const r=i.size();if(i instanceof h.default){if(!i.find(e).equals(i.end()))return;i.pushBack(e);if(r+1>=c.default.treeifyThreshold){if(this.bucketNum<=c.default.minTreeifySize){this.length+=1;this.reAllocate();return}this.hashTable[t]=new d.default(i)}this.length+=1}else{i.insert(e);const n=i.size();this.length+=n-r}}if(this.length>this.bucketNum*c.default.sigma){this.reAllocate()}}eraseElementByKey(e){const t=this.hashFunc(e)&this.bucketNum-1;const i=this.hashTable[t];if(!i)return;const r=i.size();if(r===0)return;if(i instanceof h.default){i.eraseElementByValue(e);const n=i.size();this.length+=n-r}else{i.eraseElementByKey(e);const n=i.size();this.length+=n-r;if(n<=c.default.untreeifyThreshold){this.hashTable[t]=new h.default(i)}}}find(e){const t=this.hashFunc(e)&this.bucketNum-1;const i=this.hashTable[t];if(!i)return false;return!i.find(e).equals(i.end())}[Symbol.iterator](){return function*(){const t=Object.values(this.hashTable);const i=t.length;for(let e=0;e<i;++e){const r=t[e];for(const n of r){yield n}}}.bind(this)()}}i.default=n},{"../SequentialContainer/Vector":36,"../TreeContainer/OrderedSet":41,"./Base/index":26}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});const r=e("../ContainerBase/index");class n extends r.Base{constructor(e=[],t=(e,t)=>{if(e>t)return-1;if(e<t)return 1;return 0},i=true){super();this.cmp=t;if(Array.isArray(e)){this.priorityQueue=i?[...e]:e}else{this.priorityQueue=[];e.forEach(e=>this.priorityQueue.push(e))}this.length=this.priorityQueue.length;for(let e=this.length-1>>1;e>=0;--e){let t=e;let i=t<<1|1;while(i<this.length){const r=i;const n=r+1;let e=r;if(n<this.length&&this.cmp(this.priorityQueue[r],this.priorityQueue[n])>0){e=n}if(this.cmp(this.priorityQueue[t],this.priorityQueue[e])<=0)break;[this.priorityQueue[t],this.priorityQueue[e]]=[this.priorityQueue[e],this.priorityQueue[t]];t=e;i=t<<1|1}}}adjust(e){const t=e<<1|1;const i=(e<<1)+2;if(t<this.length&&this.cmp(this.priorityQueue[e],this.priorityQueue[t])>0){[this.priorityQueue[e],this.priorityQueue[t]]=[this.priorityQueue[t],this.priorityQueue[e]]}if(i<this.length&&this.cmp(this.priorityQueue[e],this.priorityQueue[i])>0){[this.priorityQueue[e],this.priorityQueue[i]]=[this.priorityQueue[i],this.priorityQueue[e]]}}clear(){this.length=0;this.priorityQueue.length=0}push(e){this.priorityQueue.push(e);this.length+=1;if(this.length===1)return;let t=this.length-1;while(t>0){const i=t-1>>1;if(this.cmp(this.priorityQueue[i],e)<=0)break;this.adjust(i);t=i}}pop(){if(!this.length)return;const t=this.priorityQueue[this.length-1];this.length-=1;let i=0;while(i<this.length){const r=i<<1|1;const n=(i<<1)+2;if(r>=this.length)break;let e=r;if(n<this.length&&this.cmp(this.priorityQueue[r],this.priorityQueue[n])>0){e=n}if(this.cmp(this.priorityQueue[e],t)>=0)break;this.priorityQueue[i]=this.priorityQueue[e];i=e}this.priorityQueue[i]=t;this.priorityQueue.pop()}top(){return this.priorityQueue[0]}}i.default=n},{"../ContainerBase/index":25}],30:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});const n=r(e("../SequentialContainer/Deque"));const s=e("../ContainerBase/index");class o extends s.Base{constructor(e=[]){super();this.queue=new n.default(e);this.length=this.queue.size()}clear(){this.queue.clear();this.length=0}push(e){this.queue.pushBack(e);this.length+=1}pop(){this.queue.popFront();if(this.length)this.length-=1}front(){return this.queue.front()}}i.default=o},{"../ContainerBase/index":25,"../SequentialContainer/Deque":34}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});const r=e("../ContainerBase/index");class n extends r.Base{constructor(e=[]){super();this.stack=[];e.forEach(e=>this.push(e))}clear(){this.length=0;this.stack.length=0}push(e){this.stack.push(e);this.length+=1}pop(){this.stack.pop();if(this.length>0)this.length-=1}top(){return this.stack[this.length-1]}}i.default=n},{"../ContainerBase/index":25}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.RandomIterator=void 0;const r=e("../../../utils/checkParams");const s=e("../../ContainerBase/index");class n extends s.ContainerIterator{constructor(e,t,i,r,n){super(n);this.node=e;this.size=t;this.getElementByPos=i;this.setElementByPos=r;if(this.iteratorType===s.ContainerIterator.NORMAL){this.pre=function(){if(this.node===0){throw new RangeError("Deque iterator access denied!")}this.node-=1;return this};this.next=function(){if(this.node===this.size()){throw new RangeError("Deque Iterator access denied!")}this.node+=1;return this}}else{this.pre=function(){if(this.node===this.size()-1){throw new RangeError("Deque iterator access denied!")}this.node+=1;return this};this.next=function(){if(this.node===-1){throw new RangeError("Deque iterator access denied!")}this.node-=1;return this}}}get pointer(){(0,r.checkWithinAccessParams)(this.node,0,this.size()-1);return this.getElementByPos(this.node)}set pointer(e){(0,r.checkWithinAccessParams)(this.node,0,this.size()-1);this.setElementByPos(this.node,e)}equals(e){return this.node===e.node}}i.RandomIterator=n},{"../../../utils/checkParams":43,"../../ContainerBase/index":25}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});const r=e("../../ContainerBase/index");class n extends r.Container{}i.default=n},{"../../ContainerBase/index":25}],34:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});i.DequeIterator=void 0;const n=r(e("./Base/index"));const s=e("../../utils/checkParams");const o=e("../ContainerBase/index");const a=e("./Base/RandomIterator");class l extends a.RandomIterator{copy(){return new l(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)}}i.DequeIterator=l;class u extends n.default{constructor(e=[],t=1<<12){super();this.first=0;this.curFirst=0;this.last=0;this.curLast=0;this.bucketNum=0;this.map=[];let i;if("size"in e){if(typeof e.size==="number"){i=e.size}else{i=e.size()}}else if("length"in e){i=e.length}else{throw new RangeError("Can't get container's size!")}this.bucketSize=t;this.bucketNum=Math.max(Math.ceil(i/this.bucketSize),1);for(let e=0;e<this.bucketNum;++e){this.map.push(new Array(this.bucketSize))}const r=Math.ceil(i/this.bucketSize);this.first=this.last=(this.bucketNum>>1)-(r>>1);this.curFirst=this.curLast=this.bucketSize-i%this.bucketSize>>1;e.forEach(e=>this.pushBack(e));this.size=this.size.bind(this);this.getElementByPos=this.getElementByPos.bind(this);this.setElementByPos=this.setElementByPos.bind(this)}reAllocate(){const t=[];const i=Math.max(this.bucketNum>>1,1);for(let e=0;e<i;++e){t[e]=new Array(this.bucketSize)}for(let e=this.first;e<this.bucketNum;++e){t[t.length]=this.map[e]}for(let e=0;e<this.last;++e){t[t.length]=this.map[e]}t[t.length]=[...this.map[this.last]];this.first=i;this.last=t.length-1;for(let e=0;e<i;++e){t[t.length]=new Array(this.bucketSize)}this.map=t;this.bucketNum=t.length}getElementIndex(e){const t=this.curFirst+e+1;const i=t%this.bucketSize;let r=i-1;let n=this.first+(t-i)/this.bucketSize;if(i===0)n-=1;n%=this.bucketNum;if(r<0)r+=this.bucketSize;return{curNodeBucketIndex:n,curNodePointerIndex:r}}clear(){this.map=[[]];this.bucketNum=1;this.first=this.last=this.length=0;this.curFirst=this.curLast=this.bucketSize>>1}front(){return this.map[this.first][this.curFirst]}back(){return this.map[this.last][this.curLast]}begin(){return new l(0,this.size,this.getElementByPos,this.setElementByPos)}end(){return new l(this.length,this.size,this.getElementByPos,this.setElementByPos)}rBegin(){return new l(this.length-1,this.size,this.getElementByPos,this.setElementByPos,o.ContainerIterator.REVERSE)}rEnd(){return new l(-1,this.size,this.getElementByPos,this.setElementByPos,o.ContainerIterator.REVERSE)}pushBack(e){if(this.length){if(this.curLast<this.bucketSize-1){this.curLast+=1}else if(this.last<this.bucketNum-1){this.last+=1;this.curLast=0}else{this.last=0;this.curLast=0}if(this.last===this.first&&this.curLast===this.curFirst)this.reAllocate()}this.length+=1;this.map[this.last][this.curLast]=e}popBack(){if(!this.length)return;this.map[this.last][this.curLast]=undefined;if(this.length!==1){if(this.curLast>0){this.curLast-=1}else if(this.last>0){this.last-=1;this.curLast=this.bucketSize-1}else{this.last=this.bucketNum-1;this.curLast=this.bucketSize-1}}this.length-=1}pushFront(e){if(this.length){if(this.curFirst>0){this.curFirst-=1}else if(this.first>0){this.first-=1;this.curFirst=this.bucketSize-1}else{this.first=this.bucketNum-1;this.curFirst=this.bucketSize-1}if(this.first===this.last&&this.curFirst===this.curLast)this.reAllocate()}this.length+=1;this.map[this.first][this.curFirst]=e}popFront(){if(!this.length)return;this.map[this.first][this.curFirst]=undefined;if(this.length!==1){if(this.curFirst<this.bucketSize-1){this.curFirst+=1}else if(this.first<this.bucketNum-1){this.first+=1;this.curFirst=0}else{this.first=0;this.curFirst=0}}this.length-=1}forEach(t){for(let e=0;e<this.length;++e){t(this.getElementByPos(e),e)}}getElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);const{curNodeBucketIndex:t,curNodePointerIndex:i}=this.getElementIndex(e);return this.map[t][i]}setElementByPos(e,t){(0,s.checkWithinAccessParams)(e,0,this.length-1);const{curNodeBucketIndex:i,curNodePointerIndex:r}=this.getElementIndex(e);this.map[i][r]=t}insert(t,i,r=1){(0,s.checkWithinAccessParams)(t,0,this.length);if(t===0){while(r--)this.pushFront(i)}else if(t===this.length){while(r--)this.pushBack(i)}else{const n=[];for(let e=t;e<this.length;++e){n.push(this.getElementByPos(e))}this.cut(t-1);for(let e=0;e<r;++e)this.pushBack(i);for(let e=0;e<n.length;++e)this.pushBack(n[e])}}cut(e){if(e<0){this.clear();return}const{curNodeBucketIndex:t,curNodePointerIndex:i}=this.getElementIndex(e);this.last=t;this.curLast=i;this.length=e+1}eraseElementByPos(t){(0,s.checkWithinAccessParams)(t,0,this.length-1);if(t===0)this.popFront();else if(t===this.length-1)this.popBack();else{const i=[];for(let e=t+1;e<this.length;++e){i.push(this.getElementByPos(e))}this.cut(t);this.popBack();i.forEach(e=>this.pushBack(e))}}eraseElementByValue(t){if(!this.length)return;const i=[];for(let e=0;e<this.length;++e){const n=this.getElementByPos(e);if(n!==t)i.push(n)}const r=i.length;for(let e=0;e<r;++e)this.setElementByPos(e,i[e]);this.cut(r-1)}eraseElementByIterator(e){const t=e.node;this.eraseElementByPos(t);e=e.next();return e}find(t){for(let e=0;e<this.length;++e){if(this.getElementByPos(e)===t){return new l(e,this.size,this.getElementByPos,this.setElementByPos)}}return this.end()}reverse(){let e=0;let t=this.length-1;while(e<t){const i=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t));this.setElementByPos(t,i);e+=1;t-=1}}unique(){if(this.length<=1)return;let t=1;let i=this.getElementByPos(0);for(let e=1;e<this.length;++e){const r=this.getElementByPos(e);if(r!==i){i=r;this.setElementByPos(t++,r)}}while(this.length>t)this.popBack()}sort(e){const t=[];for(let e=0;e<this.length;++e){t.push(this.getElementByPos(e))}t.sort(e);for(let e=0;e<this.length;++e)this.setElementByPos(e,t[e])}shrinkToFit(){if(!this.length)return;const t=[];this.forEach(e=>t.push(e));this.bucketNum=Math.max(Math.ceil(this.length/this.bucketSize),1);this.length=this.first=this.last=this.curFirst=this.curLast=0;this.map=[];for(let e=0;e<this.bucketNum;++e){this.map.push(new Array(this.bucketSize))}for(let e=0;e<t.length;++e)this.pushBack(t[e])}[Symbol.iterator](){return function*(){for(let e=0;e<this.length;++e){yield this.getElementByPos(e)}}.bind(this)()}}i.default=u},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/RandomIterator":32,"./Base/index":33}],35:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});i.LinkListIterator=i.LinkNode=void 0;const n=r(e("./Base/index"));const s=e("../../utils/checkParams");const o=e("../ContainerBase/index");class a{constructor(e){this.value=undefined;this.pre=undefined;this.next=undefined;this.value=e}}i.LinkNode=a;class l extends o.ContainerIterator{constructor(e,t,i){super(i);this.node=e;this.header=t;if(this.iteratorType===o.ContainerIterator.NORMAL){this.pre=function(){if(this.node.pre===this.header){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.pre;return this};this.next=function(){if(this.node===this.header){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.next;return this}}else{this.pre=function(){if(this.node.next===this.header){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.next;return this};this.next=function(){if(this.node===this.header){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.pre;return this}}}get pointer(){if(this.node===this.header){throw new RangeError("LinkList iterator access denied!")}return this.node.value}set pointer(e){if(this.node===this.header){throw new RangeError("LinkList iterator access denied!")}this.node.value=e}equals(e){return this.node===e.node}copy(){return new l(this.node,this.header,this.iteratorType)}}i.LinkListIterator=l;class u extends n.default{constructor(e=[]){super();this.header=new a;this.head=undefined;this.tail=undefined;e.forEach(e=>this.pushBack(e))}clear(){this.length=0;this.head=this.tail=undefined;this.header.pre=this.header.next=undefined}begin(){return new l(this.head||this.header,this.header)}end(){return new l(this.header,this.header)}rBegin(){return new l(this.tail||this.header,this.header,o.ContainerIterator.REVERSE)}rEnd(){return new l(this.header,this.header,o.ContainerIterator.REVERSE)}front(){return this.head?this.head.value:undefined}back(){return this.tail?this.tail.value:undefined}forEach(e){if(!this.length)return;let t=this.head;let i=0;while(t!==this.header){e(t.value,i++);t=t.next}}getElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);let t=this.head;while(e--){t=t.next}return t.value}eraseElementByPos(t){(0,s.checkWithinAccessParams)(t,0,this.length-1);if(t===0)this.popFront();else if(t===this.length-1)this.popBack();else{let e=this.head;while(t--){e=e.next}e=e;const i=e.pre;const r=e.next;r.pre=i;i.next=r;this.length-=1}}eraseElementByValue(e){while(this.head&&this.head.value===e)this.popFront();while(this.tail&&this.tail.value===e)this.popBack();if(!this.head)return;let t=this.head;while(t!==this.header){if(t.value===e){const i=t.pre;const r=t.next;if(r)r.pre=i;if(i)i.next=r;this.length-=1}t=t.next}}eraseElementByIterator(e){const t=e.node;if(t===this.header){throw new RangeError("Invalid iterator")}e=e.next();if(this.head===t)this.popFront();else if(this.tail===t)this.popBack();else{const i=t.pre;const r=t.next;if(r)r.pre=i;if(i)i.next=r;this.length-=1}return e}pushBack(e){this.length+=1;const t=new a(e);if(!this.tail){this.head=this.tail=t;this.header.next=this.head;this.head.pre=this.header}else{this.tail.next=t;t.pre=this.tail;this.tail=t}this.tail.next=this.header;this.header.pre=this.tail}popBack(){if(!this.tail)return;this.length-=1;if(this.head===this.tail){this.head=this.tail=undefined;this.header.next=undefined}else{this.tail=this.tail.pre;if(this.tail)this.tail.next=undefined}this.header.pre=this.tail;if(this.tail)this.tail.next=this.header}setElementByPos(e,t){(0,s.checkWithinAccessParams)(e,0,this.length-1);let i=this.head;while(e--){i=i.next}i.value=t}insert(i,e,r=1){(0,s.checkWithinAccessParams)(i,0,this.length);if(r<=0)return;if(i===0){while(r--)this.pushFront(e)}else if(i===this.length){while(r--)this.pushBack(e)}else{let t=this.head;for(let e=1;e<i;++e){t=t.next}const n=t.next;this.length+=r;while(r--){t.next=new a(e);t.next.pre=t;t=t.next}t.next=n;if(n)n.pre=t}}find(e){if(!this.head)return this.end();let t=this.head;while(t!==this.header){if(t.value===e){return new l(t,this.header)}t=t.next}return this.end()}reverse(){if(this.length<=1)return;let e=this.head;let t=this.tail;let i=0;while(i<<1<this.length){const r=e.value;e.value=t.value;t.value=r;e=e.next;t=t.pre;i+=1}}unique(){if(this.length<=1)return;let t=this.head;while(t!==this.header){let e=t;while(e.next&&e.value===e.next.value){e=e.next;this.length-=1}t.next=e.next;if(t.next)t.next.pre=t;t=t.next}}sort(e){if(this.length<=1)return;const t=[];this.forEach(e=>t.push(e));t.sort(e);let i=this.head;t.forEach(e=>{i.value=e;i=i.next})}pushFront(e){this.length+=1;const t=new a(e);if(!this.head){this.head=this.tail=t;this.tail.next=this.header;this.header.pre=this.tail}else{t.next=this.head;this.head.pre=t;this.head=t}this.header.next=this.head;this.head.pre=this.header}popFront(){if(!this.head)return;this.length-=1;if(this.head===this.tail){this.head=this.tail=undefined;this.header.pre=this.tail}else{this.head=this.head.next;if(this.head)this.head.pre=this.header}this.header.next=this.head}merge(e){if(!this.head){e.forEach(e=>this.pushBack(e));return}let i=this.head;e.forEach(e=>{while(i&&i!==this.header&&i.value<=e){i=i.next}if(i===this.header){this.pushBack(e);i=this.tail}else if(i===this.head){this.pushFront(e);i=this.head}else{this.length+=1;const t=i.pre;t.next=new a(e);t.next.pre=t;t.next.next=i;i.pre=t.next}})}[Symbol.iterator](){return function*(){if(!this.head)return;let e=this.head;while(e!==this.header){yield e.value;e=e.next}}.bind(this)()}}i.default=u},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/index":33}],36:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});i.VectorIterator=void 0;const n=r(e("./Base/index"));const s=e("../../utils/checkParams");const o=e("../ContainerBase/index");const a=e("./Base/RandomIterator");class l extends a.RandomIterator{copy(){return new l(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)}}i.VectorIterator=l;class u extends n.default{constructor(e=[],t=true){super();if(Array.isArray(e)){this.vector=t?[...e]:e;this.length=e.length}else{this.vector=[];e.forEach(e=>this.pushBack(e))}this.size=this.size.bind(this);this.getElementByPos=this.getElementByPos.bind(this);this.setElementByPos=this.setElementByPos.bind(this)}clear(){this.length=0;this.vector.length=0}begin(){return new l(0,this.size,this.getElementByPos,this.setElementByPos)}end(){return new l(this.length,this.size,this.getElementByPos,this.setElementByPos)}rBegin(){return new l(this.length-1,this.size,this.getElementByPos,this.setElementByPos,o.ContainerIterator.REVERSE)}rEnd(){return new l(-1,this.size,this.getElementByPos,this.setElementByPos,o.ContainerIterator.REVERSE)}front(){return this.vector[0]}back(){return this.vector[this.length-1]}forEach(t){for(let e=0;e<this.length;++e){t(this.vector[e],e)}}getElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);return this.vector[e]}eraseElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);this.vector.splice(e,1);this.length-=1}eraseElementByValue(t){let i=0;for(let e=0;e<this.length;++e){if(this.vector[e]!==t){this.vector[i++]=this.vector[e]}}this.length=this.vector.length=i}eraseElementByIterator(e){const t=e.node;e=e.next();this.eraseElementByPos(t);return e}pushBack(e){this.vector.push(e);this.length+=1}popBack(){if(!this.length)return;this.vector.pop();this.length-=1}setElementByPos(e,t){(0,s.checkWithinAccessParams)(e,0,this.length-1);this.vector[e]=t}insert(e,t,i=1){(0,s.checkWithinAccessParams)(e,0,this.length);this.vector.splice(e,0,...new Array(i).fill(t));this.length+=i}find(t){for(let e=0;e<this.length;++e){if(this.vector[e]===t){return new l(e,this.size,this.getElementByPos,this.getElementByPos)}}return this.end()}reverse(){this.vector.reverse()}unique(){let t=1;for(let e=1;e<this.length;++e){if(this.vector[e]!==this.vector[e-1]){this.vector[t++]=this.vector[e]}}this.length=this.vector.length=t}sort(e){this.vector.sort(e)}[Symbol.iterator](){return function*(){return yield*this.vector}.bind(this)()}}i.default=u},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/RandomIterator":32,"./Base/index":33}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});const r=e("../../ContainerBase/index");class n extends r.ContainerIterator{constructor(e,t,i){super(i);this.node=e;this.header=t;if(this.iteratorType===r.ContainerIterator.NORMAL){this.pre=function(){if(this.node===this.header.left){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.pre();return this};this.next=function(){if(this.node===this.header){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.next();return this}}else{this.pre=function(){if(this.node===this.header.right){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.next();return this};this.next=function(){if(this.node===this.header){throw new RangeError("LinkList iterator access denied!")}this.node=this.node.pre();return this}}}equals(e){return this.node===e.node}}i.default=n},{"../../ContainerBase/index":25}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});class r{constructor(e,t){this.color=true;this.key=undefined;this.value=undefined;this.left=undefined;this.right=undefined;this.parent=undefined;this.key=e;this.value=t}pre(){let t=this;if(t.color===r.RED&&t.parent.parent===t){t=t.right}else if(t.left){t=t.left;while(t.right){t=t.right}}else{let e=t.parent;while(e.left===t){t=e;e=t.parent}t=e}return t}next(){let t=this;if(t.right){t=t.right;while(t.left){t=t.left}}else{let e=t.parent;while(e.right===t){t=e;e=t.parent}if(t.right!==e){t=e}}return t}rotateLeft(){const e=this.parent;const t=this.right;const i=t.left;if(e.parent===this)e.parent=t;else if(e.left===this)e.left=t;else e.right=t;t.parent=e;t.left=this;this.parent=t;this.right=i;if(i)i.parent=this;return t}rotateRight(){const e=this.parent;const t=this.left;const i=t.right;if(e.parent===this)e.parent=t;else if(e.left===this)e.left=t;else e.right=t;t.parent=e;t.right=this;this.parent=t;this.left=i;if(i)i.parent=this;return t}remove(){const e=this.parent;if(this===e.left){e.left=undefined}else e.right=undefined}}r.RED=true;r.BLACK=false;i.default=r},{}],39:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});const d=r(e("./TreeNode"));const n=e("../../ContainerBase/index");const s=e("../../../utils/checkParams");class o extends n.Container{constructor(e=(e,t)=>{if(e<t)return-1;if(e>t)return 1;return 0}){super();this.root=undefined;this.header=new d.default;this.inOrderTraversal=(e,t)=>{if(e===undefined)return false;const i=this.inOrderTraversal(e.left,t);if(i)return true;if(t(e))return true;return this.inOrderTraversal(e.right,t)};this.cmp=e}_lowerBound(e,t){let i;while(e){const r=this.cmp(e.key,t);if(r<0){e=e.right}else if(r>0){i=e;e=e.left}else return e}return i===undefined?this.header:i}_upperBound(e,t){let i;while(e){const r=this.cmp(e.key,t);if(r<=0){e=e.right}else if(r>0){i=e;e=e.left}}return i===undefined?this.header:i}_reverseLowerBound(e,t){let i;while(e){const r=this.cmp(e.key,t);if(r<0){i=e;e=e.right}else if(r>0){e=e.left}else return e}return i===undefined?this.header:i}_reverseUpperBound(e,t){let i;while(e){const r=this.cmp(e.key,t);if(r<0){i=e;e=e.right}else if(r>=0){e=e.left}}return i===undefined?this.header:i}eraseNodeSelfBalance(e){while(true){const t=e.parent;if(t===this.header)return;if(e.color===d.default.RED){e.color=d.default.BLACK;return}if(e===t.left){const i=t.right;if(i.color===d.default.RED){i.color=d.default.BLACK;t.color=d.default.RED;if(t===this.root){this.root=t.rotateLeft()}else t.rotateLeft()}else if(i.color===d.default.BLACK){if(i.right&&i.right.color===d.default.RED){i.color=t.color;t.color=d.default.BLACK;i.right.color=d.default.BLACK;if(t===this.root){this.root=t.rotateLeft()}else t.rotateLeft();return}else if(i.left&&i.left.color===d.default.RED){i.color=d.default.RED;i.left.color=d.default.BLACK;i.rotateRight()}else{i.color=d.default.RED;e=t}}}else{const i=t.left;if(i.color===d.default.RED){i.color=d.default.BLACK;t.color=d.default.RED;if(t===this.root){this.root=t.rotateRight()}else t.rotateRight()}else{if(i.left&&i.left.color===d.default.RED){i.color=t.color;t.color=d.default.BLACK;i.left.color=d.default.BLACK;if(t===this.root){this.root=t.rotateRight()}else t.rotateRight();return}else if(i.right&&i.right.color===d.default.RED){i.color=d.default.RED;i.right.color=d.default.BLACK;i.rotateLeft()}else{i.color=d.default.RED;e=t}}}}}eraseNode(e){if(this.length===1){this.clear();return}let t=e;while(t.left||t.right){if(t.right){t=t.right;while(t.left)t=t.left}else if(t.left){t=t.left}[e.key,t.key]=[t.key,e.key];[e.value,t.value]=[t.value,e.value];e=t}if(this.header.left===t){this.header.left=t.parent}else if(this.header.right===t){this.header.right=t.parent}this.eraseNodeSelfBalance(t);t.remove();this.length-=1;this.root.color=d.default.BLACK}insertNodeSelfBalance(e){while(true){const t=e.parent;if(t.color===d.default.BLACK)return;const i=t.parent;if(t===i.left){const r=i.right;if(r&&r.color===d.default.RED){r.color=t.color=d.default.BLACK;if(i===this.root)return;i.color=d.default.RED;e=i;continue}else if(e===t.right){e.color=d.default.BLACK;if(e.left)e.left.parent=t;if(e.right)e.right.parent=i;t.right=e.left;i.left=e.right;e.left=t;e.right=i;if(i===this.root){this.root=e;this.header.parent=e}else{const n=i.parent;if(n.left===i){n.left=e}else n.right=e}e.parent=i.parent;t.parent=e;i.parent=e}else{t.color=d.default.BLACK;if(i===this.root){this.root=i.rotateRight()}else i.rotateRight()}i.color=d.default.RED}else{const r=i.left;if(r&&r.color===d.default.RED){r.color=t.color=d.default.BLACK;if(i===this.root)return;i.color=d.default.RED;e=i;continue}else if(e===t.left){e.color=d.default.BLACK;if(e.left)e.left.parent=i;if(e.right)e.right.parent=t;i.right=e.left;t.left=e.right;e.left=i;e.right=t;if(i===this.root){this.root=e;this.header.parent=e}else{const n=i.parent;if(n.left===i){n.left=e}else n.right=e}e.parent=i.parent;t.parent=e;i.parent=e}else{t.color=d.default.BLACK;if(i===this.root){this.root=i.rotateLeft()}else i.rotateLeft()}i.color=d.default.RED}return}}findElementNode(e,t){while(e){const i=this.cmp(e.key,t);if(i<0){e=e.right}else if(i>0){e=e.left}else return e}return e}set(e,t,i){if(this.root===undefined){this.length+=1;this.root=new d.default(e,t);this.root.color=d.default.BLACK;this.root.parent=this.header;this.header.parent=this.root;this.header.left=this.root;this.header.right=this.root;return}let r;const n=this.header.left;const s=this.cmp(n.key,e);if(s===0){n.value=t;return}else if(s>0){n.left=new d.default(e,t);n.left.parent=n;r=n.left;this.header.left=r}else{const o=this.header.right;const a=this.cmp(o.key,e);if(a===0){o.value=t;return}else if(a<0){o.right=new d.default(e,t);o.right.parent=o;r=o.right;this.header.right=r}else{if(i!==undefined){const l=i.node;if(l!==this.header){const u=this.cmp(l.key,e);if(u===0){l.value=t;return}else if(u>0){const f=l.pre();const c=this.cmp(f.key,e);if(c===0){f.value=t;return}else if(c<0){r=new d.default(e,t);if(f.right===undefined){f.right=r;r.parent=f}else{l.left=r;r.parent=l}}}}}if(r===undefined){r=this.root;while(true){const h=this.cmp(r.key,e);if(h>0){if(r.left===undefined){r.left=new d.default(e,t);r.left.parent=r;r=r.left;break}r=r.left}else if(h<0){if(r.right===undefined){r.right=new d.default(e,t);r.right.parent=r;r=r.right;break}r=r.right}else{r.value=t;return}}}}}this.length+=1;this.insertNodeSelfBalance(r)}clear(){this.length=0;this.root=undefined;this.header.parent=undefined;this.header.left=this.header.right=undefined}updateKeyByIterator(e,t){const i=e.node;if(i===this.header){throw new TypeError("Invalid iterator!")}if(this.length===1){i.key=t;return true}if(i===this.header.left){if(this.cmp(i.next().key,t)>0){i.key=t;return true}return false}if(i===this.header.right){if(this.cmp(i.pre().key,t)<0){i.key=t;return true}return false}const r=i.pre().key;if(this.cmp(r,t)>=0)return false;const n=i.next().key;if(this.cmp(n,t)<=0)return false;i.key=t;return true}eraseElementByPos(t){(0,s.checkWithinAccessParams)(t,0,this.length-1);let i=0;this.inOrderTraversal(this.root,e=>{if(t===i){this.eraseNode(e);return true}i+=1;return false})}eraseElementByKey(e){if(!this.length)return;const t=this.findElementNode(this.root,e);if(t===undefined)return;this.eraseNode(t)}eraseElementByIterator(e){const t=e.node;if(t===this.header){throw new RangeError("Invalid iterator")}if(t.right===undefined){e=e.next()}this.eraseNode(t);return e}getHeight(){if(!this.length)return 0;const t=e=>{if(!e)return 0;return Math.max(t(e.left),t(e.right))+1};return t(this.root)}}i.default=o},{"../../../utils/checkParams":43,"../../ContainerBase/index":25,"./TreeNode":38}],40:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});i.OrderedMapIterator=void 0;const n=e("../ContainerBase/index");const s=e("../../utils/checkParams");const o=r(e("./Base/index"));const a=r(e("./Base/TreeIterator"));class l extends a.default{get pointer(){if(this.node===this.header){throw new RangeError("OrderedMap iterator access denied")}return new Proxy([],{get:(e,t)=>{if(t==="0")return this.node.key;else if(t==="1")return this.node.value},set:(e,t,i)=>{if(t!=="1"){throw new TypeError("props must be 1")}this.node.value=i;return true}})}copy(){return new l(this.node,this.header,this.iteratorType)}}i.OrderedMapIterator=l;class u extends o.default{constructor(e=[],t){super(t);this.iterationFunc=function*(e){if(e===undefined)return;yield*this.iterationFunc(e.left);yield[e.key,e.value];yield*this.iterationFunc(e.right)};this.iterationFunc=this.iterationFunc.bind(this);e.forEach(([e,t])=>this.setElement(e,t))}begin(){return new l(this.header.left||this.header,this.header)}end(){return new l(this.header,this.header)}rBegin(){return new l(this.header.right||this.header,this.header,n.ContainerIterator.REVERSE)}rEnd(){return new l(this.header,this.header,n.ContainerIterator.REVERSE)}front(){if(!this.length)return undefined;const e=this.header.left;return[e.key,e.value]}back(){if(!this.length)return undefined;const e=this.header.right;return[e.key,e.value]}forEach(e){let t=0;for(const i of this)e(i,t++)}lowerBound(e){const t=this._lowerBound(this.root,e);return new l(t,this.header)}upperBound(e){const t=this._upperBound(this.root,e);return new l(t,this.header)}reverseLowerBound(e){const t=this._reverseLowerBound(this.root,e);return new l(t,this.header)}reverseUpperBound(e){const t=this._reverseUpperBound(this.root,e);return new l(t,this.header)}setElement(e,t,i){this.set(e,t,i)}find(e){const t=this.findElementNode(this.root,e);if(t!==undefined){return new l(t,this.header)}return this.end()}getElementByKey(e){const t=this.findElementNode(this.root,e);return t?t.value:undefined}getElementByPos(e){(0,s.checkWithinAccessParams)(e,0,this.length-1);let t;let i=0;for(const r of this){if(i===e){t=r;break}i+=1}return t}union(e){e.forEach(([e,t])=>this.setElement(e,t))}[Symbol.iterator](){return this.iterationFunc(this.root)}}i.default=u},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/TreeIterator":37,"./Base/index":39}],41:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});i.OrderedSetIterator=void 0;const n=r(e("./Base/index"));const s=e("../ContainerBase/index");const o=e("../../utils/checkParams");const a=r(e("./Base/TreeIterator"));class l extends a.default{get pointer(){if(this.node===this.header){throw new RangeError("OrderedSet iterator access denied!")}return this.node.key}copy(){return new l(this.node,this.header,this.iteratorType)}}i.OrderedSetIterator=l;class u extends n.default{constructor(e=[],t){super(t);this.iterationFunc=function*(e){if(e===undefined)return;yield*this.iterationFunc(e.left);yield e.key;yield*this.iterationFunc(e.right)};e.forEach(e=>this.insert(e));this.iterationFunc=this.iterationFunc.bind(this)}begin(){return new l(this.header.left||this.header,this.header)}end(){return new l(this.header,this.header)}rBegin(){return new l(this.header.right||this.header,this.header,s.ContainerIterator.REVERSE)}rEnd(){return new l(this.header,this.header,s.ContainerIterator.REVERSE)}front(){return this.header.left?this.header.left.key:undefined}back(){return this.header.right?this.header.right.key:undefined}forEach(e){let t=0;for(const i of this)e(i,t++)}getElementByPos(e){(0,o.checkWithinAccessParams)(e,0,this.length-1);let t;let i=0;for(const r of this){if(i===e){t=r}i+=1}return t}insert(e,t){this.set(e,undefined,t)}find(e){const t=this.findElementNode(this.root,e);if(t!==undefined){return new l(t,this.header)}return this.end()}lowerBound(e){const t=this._lowerBound(this.root,e);return new l(t,this.header)}upperBound(e){const t=this._upperBound(this.root,e);return new l(t,this.header)}reverseLowerBound(e){const t=this._reverseLowerBound(this.root,e);return new l(t,this.header)}reverseUpperBound(e){const t=this._reverseUpperBound(this.root,e);return new l(t,this.header)}union(e){e.forEach(e=>this.insert(e))}[Symbol.iterator](){return this.iterationFunc(this.root)}}i.default=u},{"../../utils/checkParams":43,"../ContainerBase/index":25,"./Base/TreeIterator":37,"./Base/index":39}],42:[function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:true});i.HashContainer=i.TreeContainer=i.SequentialContainer=i.ContainerIterator=i.Container=i.HashMap=i.HashSet=i.OrderedMapIterator=i.OrderedMap=i.OrderedSetIterator=i.OrderedSet=i.DequeIterator=i.Deque=i.LinkListIterator=i.LinkList=i.VectorIterator=i.Vector=i.PriorityQueue=i.Queue=i.Stack=void 0;var n=e("./container/OtherContainer/Stack");Object.defineProperty(i,"Stack",{enumerable:true,get:function(){return r(n).default}});var s=e("./container/OtherContainer/Queue");Object.defineProperty(i,"Queue",{enumerable:true,get:function(){return r(s).default}});var o=e("./container/OtherContainer/PriorityQueue");Object.defineProperty(i,"PriorityQueue",{enumerable:true,get:function(){return r(o).default}});var a=e("./container/SequentialContainer/Vector");Object.defineProperty(i,"Vector",{enumerable:true,get:function(){return r(a).default}});Object.defineProperty(i,"VectorIterator",{enumerable:true,get:function(){return a.VectorIterator}});var l=e("./container/SequentialContainer/LinkList");Object.defineProperty(i,"LinkList",{enumerable:true,get:function(){return r(l).default}});Object.defineProperty(i,"LinkListIterator",{enumerable:true,get:function(){return l.LinkListIterator}});var u=e("./container/SequentialContainer/Deque");Object.defineProperty(i,"Deque",{enumerable:true,get:function(){return r(u).default}});Object.defineProperty(i,"DequeIterator",{enumerable:true,get:function(){return u.DequeIterator}});var f=e("./container/TreeContainer/OrderedSet");Object.defineProperty(i,"OrderedSet",{enumerable:true,get:function(){return r(f).default}});Object.defineProperty(i,"OrderedSetIterator",{enumerable:true,get:function(){return f.OrderedSetIterator}});var c=e("./container/TreeContainer/OrderedMap");Object.defineProperty(i,"OrderedMap",{enumerable:true,get:function(){return r(c).default}});Object.defineProperty(i,"OrderedMapIterator",{enumerable:true,get:function(){return c.OrderedMapIterator}});var h=e("./container/HashContainer/HashSet");Object.defineProperty(i,"HashSet",{enumerable:true,get:function(){return r(h).default}});var d=e("./container/HashContainer/HashMap");Object.defineProperty(i,"HashMap",{enumerable:true,get:function(){return r(d).default}});var p=e("./container/ContainerBase/index");Object.defineProperty(i,"Container",{enumerable:true,get:function(){return p.Container}});Object.defineProperty(i,"ContainerIterator",{enumerable:true,get:function(){return p.ContainerIterator}});var g=e("./container/SequentialContainer/Base/index");Object.defineProperty(i,"SequentialContainer",{enumerable:true,get:function(){return r(g).default}});var m=e("./container/TreeContainer/Base/index");Object.defineProperty(i,"TreeContainer",{enumerable:true,get:function(){return r(m).default}});var y=e("./container/HashContainer/Base/index");Object.defineProperty(i,"HashContainer",{enumerable:true,get:function(){return r(y).default}})},{"./container/ContainerBase/index":25,"./container/HashContainer/Base/index":26,"./container/HashContainer/HashMap":27,"./container/HashContainer/HashSet":28,"./container/OtherContainer/PriorityQueue":29,"./container/OtherContainer/Queue":30,"./container/OtherContainer/Stack":31,"./container/SequentialContainer/Base/index":33,"./container/SequentialContainer/Deque":34,"./container/SequentialContainer/LinkList":35,"./container/SequentialContainer/Vector":36,"./container/TreeContainer/Base/index":39,"./container/TreeContainer/OrderedMap":40,"./container/TreeContainer/OrderedSet":41}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:true});i.checkWithinAccessParams=void 0;function r(e,t,i){if(e<t||e>i){throw new RangeError}}i.checkWithinAccessParams=r},{}],44:[function(e,t,i){"use strict";const r=e("yallist");const l=Symbol("max");const u=Symbol("length");const f=Symbol("lengthCalculator");const s=Symbol("allowStale");const c=Symbol("maxAge");const h=Symbol("dispose");const d=Symbol("noDisposeOnSet");const p=Symbol("lruList");const g=Symbol("cache");const o=Symbol("updateAgeOnGet");const n=()=>1;class a{constructor(e){if(typeof e==="number")e={max:e};if(!e)e={};if(e.max&&(typeof e.max!=="number"||e.max<0))throw new TypeError("max must be a non-negative number");const t=this[l]=e.max||Infinity;const i=e.length||n;this[f]=typeof i!=="function"?n:i;this[s]=e.stale||false;if(e.maxAge&&typeof e.maxAge!=="number")throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0;this[h]=e.dispose;this[d]=e.noDisposeOnSet||false;this[o]=e.updateAgeOnGet||false;this.reset()}set max(e){if(typeof e!=="number"||e<0)throw new TypeError("max must be a non-negative number");this[l]=e||Infinity;v(this)}get max(){return this[l]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if(typeof e!=="number")throw new TypeError("maxAge must be a non-negative number");this[c]=e;v(this)}get maxAge(){return this[c]}set lengthCalculator(e){if(typeof e!=="function")e=n;if(e!==this[f]){this[f]=e;this[u]=0;this[p].forEach(e=>{e.length=this[f](e.value,e.key);this[u]+=e.length})}v(this)}get lengthCalculator(){return this[f]}get length(){return this[u]}get itemCount(){return this[p].length}rforEach(t,i){i=i||this;for(let e=this[p].tail;e!==null;){const r=e.prev;_(this,t,e,i);e=r}}forEach(t,i){i=i||this;for(let e=this[p].head;e!==null;){const r=e.next;_(this,t,e,i);e=r}}keys(){return this[p].toArray().map(e=>e.key)}values(){return this[p].toArray().map(e=>e.value)}reset(){if(this[h]&&this[p]&&this[p].length){this[p].forEach(e=>this[h](e.key,e.value))}this[g]=new Map;this[p]=new r;this[u]=0}dump(){return this[p].map(e=>y(this,e)?false:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[p]}set(e,t,i){i=i||this[c];if(i&&typeof i!=="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0;const n=this[f](t,e);if(this[g].has(e)){if(n>this[l]){b(this,this[g].get(e));return false}const o=this[g].get(e);const a=o.value;if(this[h]){if(!this[d])this[h](e,a.value)}a.now=r;a.maxAge=i;a.value=t;this[u]+=n-a.length;a.length=n;this.get(e);v(this);return true}const s=new w(e,t,n,r,i);if(s.length>this[l]){if(this[h])this[h](e,t);return false}this[u]+=s.length;this[p].unshift(s);this[g].set(e,this[p].head);v(this);return true}has(e){if(!this[g].has(e))return false;const t=this[g].get(e).value;return!y(this,t)}get(e){return m(this,e,true)}peek(e){return m(this,e,false)}pop(){const e=this[p].tail;if(!e)return null;b(this,e);return e.value}del(e){b(this,this[g].get(e))}load(t){this.reset();const i=Date.now();for(let e=t.length-1;e>=0;e--){const r=t[e];const n=r.e||0;if(n===0)this.set(r.k,r.v);else{const s=n-i;if(s>0){this.set(r.k,r.v,s)}}}}prune(){this[g].forEach((e,t)=>m(this,t,false))}}const m=(e,t,i)=>{const r=e[g].get(t);if(r){const n=r.value;if(y(e,n)){b(e,r);if(!e[s])return undefined}else{if(i){if(e[o])r.value.now=Date.now();e[p].unshiftNode(r)}}return n.value}};const y=(e,t)=>{if(!t||!t.maxAge&&!e[c])return false;const i=Date.now()-t.now;return t.maxAge?i>t.maxAge:e[c]&&i>e[c]};const v=t=>{if(t[u]>t[l]){for(let e=t[p].tail;t[u]>t[l]&&e!==null;){const i=e.prev;b(t,e);e=i}}};const b=(e,t)=>{if(t){const i=t.value;if(e[h])e[h](i.key,i.value);e[u]-=i.length;e[g].delete(i.key);e[p].removeNode(t)}};class w{constructor(e,t,i,r,n){this.key=e;this.value=t;this.length=i;this.now=r;this.maxAge=n||0}}const _=(e,t,i,r)=>{let n=i.value;if(y(e,n)){b(e,i);if(!e[s])n=undefined}if(n)t.call(r,n.value,n.key,e)};t.exports=a},{yallist:90}],45:[function(e,a,t){(function(o){(function(){const s=a.exports;s.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"};s.codes={};for(const t in s.types){const i=s.types[t];s.codes[i]=t}s.CMD_SHIFT=4;s.CMD_MASK=240;s.DUP_MASK=8;s.QOS_MASK=3;s.QOS_SHIFT=1;s.RETAIN_MASK=1;s.VARBYTEINT_MASK=127;s.VARBYTEINT_FIN_MASK=128;s.VARBYTEINT_MAX=268435455;s.SESSIONPRESENT_MASK=1;s.SESSIONPRESENT_HEADER=o.from([s.SESSIONPRESENT_MASK]);s.CONNACK_HEADER=o.from([s.codes.connack<<s.CMD_SHIFT]);s.USERNAME_MASK=128;s.PASSWORD_MASK=64;s.WILL_RETAIN_MASK=32;s.WILL_QOS_MASK=24;s.WILL_QOS_SHIFT=3;s.WILL_FLAG_MASK=4;s.CLEAN_SESSION_MASK=2;s.CONNECT_HEADER=o.from([s.codes.connect<<s.CMD_SHIFT]);s.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11};s.propertiesCodes={};for(const r in s.properties){const n=s.properties[r];s.propertiesCodes[n]=r}s.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function e(n){return[0,1,2].map(r=>{return[0,1].map(i=>{return[0,1].map(e=>{const t=o.alloc(1);t.writeUInt8(s.codes[n]<<s.CMD_SHIFT|(i?s.DUP_MASK:0)|r<<s.QOS_SHIFT|e,0,true);return t})})})}s.PUBLISH_HEADER=e("publish");s.SUBSCRIBE_HEADER=e("subscribe");s.SUBSCRIBE_OPTIONS_QOS_MASK=3;s.SUBSCRIBE_OPTIONS_NL_MASK=1;s.SUBSCRIBE_OPTIONS_NL_SHIFT=2;s.SUBSCRIBE_OPTIONS_RAP_MASK=1;s.SUBSCRIBE_OPTIONS_RAP_SHIFT=3;s.SUBSCRIBE_OPTIONS_RH_MASK=3;s.SUBSCRIBE_OPTIONS_RH_SHIFT=4;s.SUBSCRIBE_OPTIONS_RH=[0,16,32];s.SUBSCRIBE_OPTIONS_NL=4;s.SUBSCRIBE_OPTIONS_RAP=8;s.SUBSCRIBE_OPTIONS_QOS=[0,1,2];s.UNSUBSCRIBE_HEADER=e("unsubscribe");s.ACKS={unsuback:e("unsuback"),puback:e("puback"),pubcomp:e("pubcomp"),pubrel:e("pubrel"),pubrec:e("pubrec")};s.SUBACK_HEADER=o.from([s.codes.suback<<s.CMD_SHIFT]);s.VERSION3=o.from([3]);s.VERSION4=o.from([4]);s.VERSION5=o.from([5]);s.VERSION131=o.from([131]);s.VERSION132=o.from([132]);s.QOS=[0,1,2].map(e=>{return o.from([e])});s.EMPTY={pingreq:o.from([s.codes.pingreq<<4,0]),pingresp:o.from([s.codes.pingresp<<4,0]),disconnect:o.from([s.codes.disconnect<<4,0])}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:17}],46:[function(i,s,e){(function(o){(function(){const r=i("./writeToStream");const e=i("events");function t(e,t){const i=new n;r(e,i,t);return i.concat()}class n extends e{constructor(){super();this._array=new Array(20);this._i=0}write(e){this._array[this._i++]=e;return true}concat(){let e=0;const t=new Array(this._array.length);const i=this._array;let r=0;let n;for(n=0;n<i.length&&i[n]!==undefined;n++){if(typeof i[n]!=="string")t[n]=i[n].length;else t[n]=o.byteLength(i[n]);e+=t[n]}const s=o.allocUnsafe(e);for(n=0;n<i.length&&i[n]!==undefined;n++){if(typeof i[n]!=="string"){i[n].copy(s,r);r+=t[n]}else{s.write(i[n],r);r+=t[n]}}return s}}s.exports=t}).call(this)}).call(this,i("buffer").Buffer)},{"./writeToStream":51,buffer:17,events:22}],47:[function(e,t,i){i.parser=e("./parser").parser;i.generate=e("./generate");i.writeToStream=e("./writeToStream")},{"./generate":46,"./parser":50,"./writeToStream":51}],48:[function(e,l,t){(function(a){(function(){const t=65536;const i={};const s=a.isBuffer(a.from([1,2]).subarray(0,1));function r(e){const t=a.allocUnsafe(2);t.writeUInt8(e>>8,0);t.writeUInt8(e&255,0+1);return t}function e(){for(let e=0;e<t;e++){i[e]=r(e)}}function n(e){const t=4;let i=0;let r=0;const n=a.allocUnsafe(t);do{i=e%128|0;e=e/128|0;if(e>0)i=i|128;n.writeUInt8(i,r++)}while(e>0&&r<t);if(e>0){r=0}return s?n.subarray(0,r):n.slice(0,r)}function o(e){const t=a.allocUnsafe(4);t.writeUInt32BE(e,0);return t}l.exports={cache:i,generateCache:e,generateNumber:r,genBufVariableByteInt:n,generate4ByteBuffer:o}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:17}],49:[function(e,t,i){class r{constructor(){this.cmd=null;this.retain=false;this.qos=0;this.dup=false;this.length=-1;this.topic=null;this.payload=null}}t.exports=r},{}],50:[function(e,t,i){const r=e("bl");const n=e("events");const s=e("./packet");const f=e("./constants");const c=e("debug")("mqtt-packet:parser");class o extends n{constructor(){super();this.parser=this.constructor.parser}static parser(e){if(!(this instanceof o))return(new o).parser(e);this.settings=e||{};this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"];this._resetState();return this}_resetState(){c("_resetState: resetting packet, error, _list, and _stateCounter");this.packet=new s;this.error=null;this._list=r();this._stateCounter=0}parse(e){if(this.error)this._resetState();this._list.append(e);c("parse: current state: %s",this._states[this._stateCounter]);while((this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error){this._stateCounter++;c("parse: state complete. _stateCounter is now: %d",this._stateCounter);c("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length);if(this._stateCounter>=this._states.length)this._stateCounter=0}c("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length);return this._list.length}_parseHeader(){const e=this._list.readUInt8(0);this.packet.cmd=f.types[e>>f.CMD_SHIFT];this.packet.retain=(e&f.RETAIN_MASK)!==0;this.packet.qos=e>>f.QOS_SHIFT&f.QOS_MASK;this.packet.dup=(e&f.DUP_MASK)!==0;c("_parseHeader: packet: %o",this.packet);this._list.consume(1);return true}_parseLength(){const e=this._parseVarByteNum(true);if(e){this.packet.length=e.value;this._list.consume(e.bytes)}c("_parseLength %d",e.value);return!!e}_parsePayload(){c("_parsePayload: payload %O",this._list);let e=false;if(this.packet.length===0||this._list.length>=this.packet.length){this._pos=0;switch(this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=true}c("_parsePayload complete result: %s",e);return e}_parseConnect(){c("_parseConnect");let e;let t;let i;let r;const n={};const s=this.packet;const o=this._parseString();if(o===null)return this._emitError(new Error("Cannot parse protocolId"));if(o!=="MQTT"&&o!=="MQIsdp"){return this._emitError(new Error("Invalid protocolId"))}s.protocolId=o;if(this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));s.protocolVersion=this._list.readUInt8(this._pos);if(s.protocolVersion>=128){s.bridgeMode=true;s.protocolVersion=s.protocolVersion-128}if(s.protocolVersion!==3&&s.protocolVersion!==4&&s.protocolVersion!==5){return this._emitError(new Error("Invalid protocol version"))}this._pos++;if(this._pos>=this._list.length){return this._emitError(new Error("Packet too short"))}n.username=this._list.readUInt8(this._pos)&f.USERNAME_MASK;n.password=this._list.readUInt8(this._pos)&f.PASSWORD_MASK;n.will=this._list.readUInt8(this._pos)&f.WILL_FLAG_MASK;if(n.will){s.will={};s.will.retain=(this._list.readUInt8(this._pos)&f.WILL_RETAIN_MASK)!==0;s.will.qos=(this._list.readUInt8(this._pos)&f.WILL_QOS_MASK)>>f.WILL_QOS_SHIFT}s.clean=(this._list.readUInt8(this._pos)&f.CLEAN_SESSION_MASK)!==0;this._pos++;s.keepalive=this._parseNum();if(s.keepalive===-1)return this._emitError(new Error("Packet too short"));if(s.protocolVersion===5){const l=this._parseProperties();if(Object.getOwnPropertyNames(l).length){s.properties=l}}const a=this._parseString();if(a===null)return this._emitError(new Error("Packet too short"));s.clientId=a;c("_parseConnect: packet.clientId: %s",s.clientId);if(n.will){if(s.protocolVersion===5){const u=this._parseProperties();if(Object.getOwnPropertyNames(u).length){s.will.properties=u}}e=this._parseString();if(e===null)return this._emitError(new Error("Cannot parse will topic"));s.will.topic=e;c("_parseConnect: packet.will.topic: %s",s.will.topic);t=this._parseBuffer();if(t===null)return this._emitError(new Error("Cannot parse will payload"));s.will.payload=t;c("_parseConnect: packet.will.paylaod: %s",s.will.payload)}if(n.username){r=this._parseString();if(r===null)return this._emitError(new Error("Cannot parse username"));s.username=r;c("_parseConnect: packet.username: %s",s.username)}if(n.password){i=this._parseBuffer();if(i===null)return this._emitError(new Error("Cannot parse password"));s.password=i}this.settings=s;c("_parseConnect: complete");return s}_parseConnack(){c("_parseConnack");const e=this.packet;if(this._list.length<1)return null;e.sessionPresent=!!(this._list.readUInt8(this._pos++)&f.SESSIONPRESENT_MASK);if(this.settings.protocolVersion===5){if(this._list.length>=2){e.reasonCode=this._list.readUInt8(this._pos++)}else{e.reasonCode=0}}else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}}c("_parseConnack: complete")}_parsePublish(){c("_parsePublish");const e=this.packet;e.topic=this._parseString();if(e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(e.qos>0)if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}}e.payload=this._list.slice(this._pos,e.length);c("_parsePublish: payload from buffer list: %o",e.payload)}_parseSubscribe(){c("_parseSubscribe");const e=this.packet;let t;let i;let r;let n;let s;let o;let a;if(e.qos!==1){return this._emitError(new Error("Wrong subscribe header"))}e.subscriptions=[];if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const l=this._parseProperties();if(Object.getOwnPropertyNames(l).length){e.properties=l}}while(this._pos<e.length){t=this._parseString();if(t===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));i=this._parseByte();r=i&f.SUBSCRIBE_OPTIONS_QOS_MASK;o=(i>>f.SUBSCRIBE_OPTIONS_NL_SHIFT&f.SUBSCRIBE_OPTIONS_NL_MASK)!==0;s=(i>>f.SUBSCRIBE_OPTIONS_RAP_SHIFT&f.SUBSCRIBE_OPTIONS_RAP_MASK)!==0;n=i>>f.SUBSCRIBE_OPTIONS_RH_SHIFT&f.SUBSCRIBE_OPTIONS_RH_MASK;a={topic:t,qos:r};if(this.settings.protocolVersion===5){a.nl=o;a.rap=s;a.rh=n}else if(this.settings.bridgeMode){a.rh=0;a.rap=true;a.nl=true}c("_parseSubscribe: push subscription `%s` to subscription",a);e.subscriptions.push(a)}}_parseSuback(){c("_parseSuback");const e=this.packet;this.packet.granted=[];if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}}while(this._pos<this.packet.length){this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){c("_parseUnsubscribe");const e=this.packet;e.unsubscriptions=[];if(!this._parseMessageId()){return}if(this.settings.protocolVersion===5){const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}}while(this._pos<e.length){const i=this._parseString();if(i===null)return this._emitError(new Error("Cannot parse topic"));c("_parseUnsubscribe: push topic `%s` to unsubscriptions",i);e.unsubscriptions.push(i)}}_parseUnsuback(){c("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}e.granted=[];while(this._pos<this.packet.length){this.packet.granted.push(this._list.readUInt8(this._pos++))}}}_parseConfirmation(){c("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;this._parseMessageId();if(this.settings.protocolVersion===5){if(e.length>2){e.reasonCode=this._parseByte();c("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else{e.reasonCode=0}if(e.length>3){const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}}}return true}_parseDisconnect(){const e=this.packet;c("_parseDisconnect");if(this.settings.protocolVersion===5){if(this._list.length>0){e.reasonCode=this._parseByte()}else{e.reasonCode=0}const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}}c("_parseDisconnect result: true");return true}_parseAuth(){c("_parseAuth");const e=this.packet;if(this.settings.protocolVersion!==5){return this._emitError(new Error("Not supported auth packet for this version MQTT"))}e.reasonCode=this._parseByte();const t=this._parseProperties();if(Object.getOwnPropertyNames(t).length){e.properties=t}c("_parseAuth: result: true");return true}_parseMessageId(){const e=this.packet;e.messageId=this._parseNum();if(e.messageId===null){this._emitError(new Error("Cannot parse messageId"));return false}c("_parseMessageId: packet.messageId %d",e.messageId);return true}_parseString(e){const t=this._parseNum();const i=t+this._pos;if(t===-1||i>this._list.length||i>this.packet.length)return null;const r=this._list.toString("utf8",this._pos,i);this._pos+=t;c("_parseString: result: %s",r);return r}_parseStringPair(){c("_parseStringPair");return{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum();const t=e+this._pos;if(e===-1||t>this._list.length||t>this.packet.length)return null;const i=this._list.slice(this._pos,t);this._pos+=e;c("_parseBuffer: result: %o",i);return i}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);this._pos+=2;c("_parseNum: result: %s",e);return e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);this._pos+=4;c("_parse4ByteNum: result: %s",e);return e}_parseVarByteNum(e){c("_parseVarByteNum");const t=4;let i=0;let r=1;let n=0;let s=false;let o;const a=this._pos?this._pos:0;while(i<t&&a+i<this._list.length){o=this._list.readUInt8(a+i++);n+=r*(o&f.VARBYTEINT_MASK);r*=128;if((o&f.VARBYTEINT_FIN_MASK)===0){s=true;break}if(this._list.length<=i){break}}if(!s&&i===t&&this._list.length>=i){this._emitError(new Error("Invalid variable byte integer"))}if(a){this._pos+=i}s=s?e?{bytes:i,value:n}:n:false;c("_parseVarByteNum: result: %o",s);return s}_parseByte(){let e;if(this._pos<this._list.length){e=this._list.readUInt8(this._pos);this._pos++}c("_parseByte: result: %o",e);return e}_parseByType(e){c("_parseByType: type: %s",e);switch(e){case"byte":{return this._parseByte()!==0}case"int8":{return this._parseByte()}case"int16":{return this._parseNum()}case"int32":{return this._parse4ByteNum()}case"var":{return this._parseVarByteNum()}case"string":{return this._parseString()}case"pair":{return this._parseStringPair()}case"binary":{return this._parseBuffer()}}}_parseProperties(){c("_parseProperties");const e=this._parseVarByteNum();const t=this._pos;const i=t+e;const r={};while(this._pos<i){const n=this._parseByte();if(!n){this._emitError(new Error("Cannot parse property code type"));return false}const s=f.propertiesCodes[n];if(!s){this._emitError(new Error("Unknown property"));return false}if(s==="userProperties"){if(!r[s]){r[s]=Object.create(null)}const o=this._parseByType(f.propertiesTypes[s]);if(r[s][o.name]){if(Array.isArray(r[s][o.name])){r[s][o.name].push(o.value)}else{const a=r[s][o.name];r[s][o.name]=[a];r[s][o.name].push(o.value)}}else{r[s][o.name]=o.value}continue}if(r[s]){if(Array.isArray(r[s])){r[s].push(this._parseByType(f.propertiesTypes[s]))}else{r[s]=[r[s]];r[s].push(this._parseByType(f.propertiesTypes[s]))}}else{r[s]=this._parseByType(f.propertiesTypes[s])}}return r}_newPacket(){c("_newPacket");if(this.packet){this._list.consume(this.packet.length);c("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length);this.emit("packet",this.packet)}c("_newPacket: new packet");this.packet=new s;this._pos=0;return true}_emitError(e){c("_emitError");this.error=e;this.emit("error",e)}}t.exports=o},{"./constants":45,"./packet":49,bl:15,debug:18,events:22}],51:[function(U,z,e){(function(q){(function(){const k=U("./constants");const d=q.allocUnsafe(0);const u=q.from([0]);const e=U("./numbers");const r=U("process-nextick-args").nextTick;const S=U("debug")("mqtt-packet:writeToStream");const i=e.cache;const n=e.generateNumber;const s=e.generateCache;const l=e.genBufVariableByteInt;const o=e.generate4ByteBuffer;let E=I;let a=true;function t(e,t,i){S("generate called");if(t.cork){t.cork();r(f,t)}if(a){a=false;s()}S("generate: packet.cmd: %s",e.cmd);switch(e.cmd){case"connect":return c(e,t,i);case"connack":return h(e,t,i);case"publish":return p(e,t,i);case"puback":case"pubrec":case"pubrel":case"pubcomp":return g(e,t,i);case"subscribe":return m(e,t,i);case"suback":return y(e,t,i);case"unsubscribe":return v(e,t,i);case"unsuback":return b(e,t,i);case"pingreq":case"pingresp":return w(e,t,i);case"disconnect":return L(e,t,i);case"auth":return F(e,t,i);default:t.emit("error",new Error("Unknown command"));return false}}Object.defineProperty(t,"cacheNumbers",{get(){return E===I},set(e){if(e){if(!i||Object.keys(i).length===0)a=true;E=I}else{a=false;E=j}}});function f(e){e.uncork()}function c(e,t,i){const r=e||{};const n=r.protocolId||"MQTT";let s=r.protocolVersion||4;const o=r.will;let a=r.clean;const l=r.keepalive||0;const u=r.clientId||"";const f=r.username;const c=r.password;const h=r.properties;if(a===undefined)a=true;let d=0;if(!n||typeof n!=="string"&&!q.isBuffer(n)){t.emit("error",new Error("Invalid protocolId"));return false}else d+=n.length+2;if(s!==3&&s!==4&&s!==5){t.emit("error",new Error("Invalid protocol version"));return false}else d+=1;if((typeof u==="string"||q.isBuffer(u))&&(u||s>=4)&&(u||a)){d+=q.byteLength(u)+2}else{if(s<4){t.emit("error",new Error("clientId must be supplied before 3.1.1"));return false}if(a*1===0){t.emit("error",new Error("clientId must be given if cleanSession set to 0"));return false}}if(typeof l!=="number"||l<0||l>65535||l%1!==0){t.emit("error",new Error("Invalid keepalive"));return false}else d+=2;d+=1;if(s===5){var p=B(t,h);if(!p){return false}d+=p.length}if(o){if(typeof o!=="object"){t.emit("error",new Error("Invalid will"));return false}if(!o.topic||typeof o.topic!=="string"){t.emit("error",new Error("Invalid will topic"));return false}else{d+=q.byteLength(o.topic)+2}d+=2;if(o.payload){if(o.payload.length>=0){if(typeof o.payload==="string"){d+=q.byteLength(o.payload)}else{d+=o.payload.length}}else{t.emit("error",new Error("Invalid will payload"));return false}}var g={};if(s===5){g=B(t,o.properties);if(!g){return false}d+=g.length}}let m=false;if(f!=null){if(N(f)){m=true;d+=q.byteLength(f)+2}else{t.emit("error",new Error("Invalid username"));return false}}if(c!=null){if(!m){t.emit("error",new Error("Username is required to use password"));return false}if(N(c)){d+=R(c)+2}else{t.emit("error",new Error("Invalid password"));return false}}t.write(k.CONNECT_HEADER);C(t,d);T(t,n);if(r.bridgeMode){s+=128}t.write(s===131?k.VERSION131:s===132?k.VERSION132:s===4?k.VERSION4:s===5?k.VERSION5:k.VERSION3);let y=0;y|=f!=null?k.USERNAME_MASK:0;y|=c!=null?k.PASSWORD_MASK:0;y|=o&&o.retain?k.WILL_RETAIN_MASK:0;y|=o&&o.qos?o.qos<<k.WILL_QOS_SHIFT:0;y|=o?k.WILL_FLAG_MASK:0;y|=a?k.CLEAN_SESSION_MASK:0;t.write(q.from([y]));E(t,l);if(s===5){p.write()}T(t,u);if(o){if(s===5){g.write()}A(t,o.topic);T(t,o.payload)}if(f!=null){T(t,f)}if(c!=null){T(t,c)}return true}function h(e,t,i){const r=i?i.protocolVersion:4;const n=e||{};const s=r===5?n.reasonCode:n.returnCode;const o=n.properties;let a=2;if(typeof s!=="number"){t.emit("error",new Error("Invalid return code"));return false}let l=null;if(r===5){l=B(t,o);if(!l){return false}a+=l.length}t.write(k.CONNACK_HEADER);C(t,a);t.write(n.sessionPresent?k.SESSIONPRESENT_HEADER:u);t.write(q.from([s]));if(l!=null){l.write()}return true}function p(e,t,i){S("publish: packet: %o",e);const r=i?i.protocolVersion:4;const n=e||{};const s=n.qos||0;const o=n.retain?k.RETAIN_MASK:0;const a=n.topic;const l=n.payload||d;const u=n.messageId;const f=n.properties;let c=0;if(typeof a==="string")c+=q.byteLength(a)+2;else if(q.isBuffer(a))c+=a.length+2;else{t.emit("error",new Error("Invalid topic"));return false}if(!q.isBuffer(l))c+=q.byteLength(l);else c+=l.length;if(s&&typeof u!=="number"){t.emit("error",new Error("Invalid messageId"));return false}else if(s)c+=2;let h=null;if(r===5){h=B(t,f);if(!h){return false}c+=h.length}t.write(k.PUBLISH_HEADER[s][n.dup?1:0][o?1:0]);C(t,c);E(t,R(a));t.write(a);if(s>0)E(t,u);if(h!=null){h.write()}S("publish: payload: %o",l);return t.write(l)}function g(e,t,i){const r=i?i.protocolVersion:4;const n=e||{};const s=n.cmd||"puback";const o=n.messageId;const a=n.dup&&s==="pubrel"?k.DUP_MASK:0;let l=0;const u=n.reasonCode;const f=n.properties;let c=r===5?3:2;if(s==="pubrel")l=1;if(typeof o!=="number"){t.emit("error",new Error("Invalid messageId"));return false}let h=null;if(r===5){if(typeof f==="object"){h=P(t,f,i,c);if(!h){return false}c+=h.length}}t.write(k.ACKS[s][l][a][0]);C(t,c);E(t,o);if(r===5){t.write(q.from([u]))}if(h!==null){h.write()}return true}function m(e,t,i){S("subscribe: packet: ");const r=i?i.protocolVersion:4;const n=e||{};const s=n.dup?k.DUP_MASK:0;const o=n.messageId;const a=n.subscriptions;const l=n.properties;let u=0;if(typeof o!=="number"){t.emit("error",new Error("Invalid messageId"));return false}else u+=2;let f=null;if(r===5){f=B(t,l);if(!f){return false}u+=f.length}if(typeof a==="object"&&a.length){for(let e=0;e<a.length;e+=1){const h=a[e].topic;const d=a[e].qos;if(typeof h!=="string"){t.emit("error",new Error("Invalid subscriptions - invalid topic"));return false}if(typeof d!=="number"){t.emit("error",new Error("Invalid subscriptions - invalid qos"));return false}if(r===5){const p=a[e].nl||false;if(typeof p!=="boolean"){t.emit("error",new Error("Invalid subscriptions - invalid No Local"));return false}const g=a[e].rap||false;if(typeof g!=="boolean"){t.emit("error",new Error("Invalid subscriptions - invalid Retain as Published"));return false}const m=a[e].rh||0;if(typeof m!=="number"||m>2){t.emit("error",new Error("Invalid subscriptions - invalid Retain Handling"));return false}}u+=q.byteLength(h)+2+1}}else{t.emit("error",new Error("Invalid subscriptions"));return false}S("subscribe: writing to stream: %o",k.SUBSCRIBE_HEADER);t.write(k.SUBSCRIBE_HEADER[1][s?1:0][0]);C(t,u);E(t,o);if(f!==null){f.write()}let c=true;for(const y of a){const v=y.topic;const b=y.qos;const w=+y.nl;const _=+y.rap;const x=y.rh;let e;A(t,v);e=k.SUBSCRIBE_OPTIONS_QOS[b];if(r===5){e|=w?k.SUBSCRIBE_OPTIONS_NL:0;e|=_?k.SUBSCRIBE_OPTIONS_RAP:0;e|=x?k.SUBSCRIBE_OPTIONS_RH[x]:0}c=t.write(q.from([e]))}return c}function y(e,t,i){const r=i?i.protocolVersion:4;const n=e||{};const s=n.messageId;const o=n.granted;const a=n.properties;let l=0;if(typeof s!=="number"){t.emit("error",new Error("Invalid messageId"));return false}else l+=2;if(typeof o==="object"&&o.length){for(let e=0;e<o.length;e+=1){if(typeof o[e]!=="number"){t.emit("error",new Error("Invalid qos vector"));return false}l+=1}}else{t.emit("error",new Error("Invalid qos vector"));return false}let u=null;if(r===5){u=P(t,a,i,l);if(!u){return false}l+=u.length}t.write(k.SUBACK_HEADER);C(t,l);E(t,s);if(u!==null){u.write()}return t.write(q.from(o))}function v(e,t,i){const r=i?i.protocolVersion:4;const n=e||{};const s=n.messageId;const o=n.dup?k.DUP_MASK:0;const a=n.unsubscriptions;const l=n.properties;let u=0;if(typeof s!=="number"){t.emit("error",new Error("Invalid messageId"));return false}else{u+=2}if(typeof a==="object"&&a.length){for(let e=0;e<a.length;e+=1){if(typeof a[e]!=="string"){t.emit("error",new Error("Invalid unsubscriptions"));return false}u+=q.byteLength(a[e])+2}}else{t.emit("error",new Error("Invalid unsubscriptions"));return false}let f=null;if(r===5){f=B(t,l);if(!f){return false}u+=f.length}t.write(k.UNSUBSCRIBE_HEADER[1][o?1:0][0]);C(t,u);E(t,s);if(f!==null){f.write()}let c=true;for(let e=0;e<a.length;e++){c=A(t,a[e])}return c}function b(e,t,i){const r=i?i.protocolVersion:4;const n=e||{};const s=n.messageId;const o=n.dup?k.DUP_MASK:0;const a=n.granted;const l=n.properties;const u=n.cmd;const f=0;let c=2;if(typeof s!=="number"){t.emit("error",new Error("Invalid messageId"));return false}if(r===5){if(typeof a==="object"&&a.length){for(let e=0;e<a.length;e+=1){if(typeof a[e]!=="number"){t.emit("error",new Error("Invalid qos vector"));return false}c+=1}}else{t.emit("error",new Error("Invalid qos vector"));return false}}let h=null;if(r===5){h=P(t,l,i,c);if(!h){return false}c+=h.length}t.write(k.ACKS[u][f][o][0]);C(t,c);E(t,s);if(h!==null){h.write()}if(r===5){t.write(q.from(a))}return true}function w(e,t,i){return t.write(k.EMPTY[e.cmd])}function L(e,t,i){const r=i?i.protocolVersion:4;const n=e||{};const s=n.reasonCode;const o=n.properties;let a=r===5?1:0;let l=null;if(r===5){l=P(t,o,i,a);if(!l){return false}a+=l.length}t.write(q.from([k.codes.disconnect<<4]));C(t,a);if(r===5){t.write(q.from([s]))}if(l!==null){l.write()}return true}function F(e,t,i){const r=i?i.protocolVersion:4;const n=e||{};const s=n.reasonCode;const o=n.properties;let a=r===5?1:0;if(r!==5)t.emit("error",new Error("Invalid mqtt version for auth packet"));const l=P(t,o,i,a);if(!l){return false}a+=l.length;t.write(q.from([k.codes.auth<<4]));C(t,a);t.write(q.from([s]));if(l!==null){l.write()}return true}const _={};function C(e,t){if(t>k.VARBYTEINT_MAX){e.emit("error",new Error(`Invalid variable byte integer: ${t}`));return false}let i=_[t];if(!i){i=l(t);if(t<16384)_[t]=i}S("writeVarByteInt: writing to stream: %o",i);return e.write(i)}function A(e,t){const i=q.byteLength(t);E(e,i);S("writeString: %s",t);return e.write(t,"utf8")}function x(e,t,i){A(e,t);A(e,i)}function I(e,t){S("writeNumberCached: number: %d",t);S("writeNumberCached: %o",i[t]);return e.write(i[t])}function j(e,t){const i=n(t);S("writeNumberGenerated: %o",i);return e.write(i)}function D(e,t){const i=o(t);S("write4ByteNumber: %o",i);return e.write(i)}function T(e,t){if(typeof t==="string"){A(e,t)}else if(t){E(e,t.length);e.write(t)}else E(e,0)}function B(n,e){if(typeof e!=="object"||e.length!=null){return{length:1,write(){M(n,{},0)}}}let r=0;function s(e,r){const t=k.propertiesTypes[e];let i=0;switch(t){case"byte":{if(typeof r!=="boolean"){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=1+1;break}case"int8":{if(typeof r!=="number"||r<0||r>255){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=1+1;break}case"binary":{if(r&&r===null){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=1+q.byteLength(r)+2;break}case"int16":{if(typeof r!=="number"||r<0||r>65535){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=1+2;break}case"int32":{if(typeof r!=="number"||r<0||r>4294967295){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=1+4;break}case"var":{if(typeof r!=="number"||r<0||r>268435455){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=1+q.byteLength(l(r));break}case"string":{if(typeof r!=="string"){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=1+2+q.byteLength(r.toString());break}case"pair":{if(typeof r!=="object"){n.emit("error",new Error(`Invalid ${e}: ${r}`));return false}i+=Object.getOwnPropertyNames(r).reduce((e,i)=>{const t=r[i];if(Array.isArray(t)){e+=t.reduce((e,t)=>{e+=1+2+q.byteLength(i.toString())+2+q.byteLength(t.toString());return e},0)}else{e+=1+2+q.byteLength(i.toString())+2+q.byteLength(r[i].toString())}return e},0);break}default:{n.emit("error",new Error(`Invalid property ${e}: ${r}`));return false}}return i}if(e){for(const o in e){let t=0;let i=0;const a=e[o];if(Array.isArray(a)){for(let e=0;e<a.length;e++){i=s(o,a[e]);if(!i){return false}t+=i}}else{i=s(o,a);if(!i){return false}t=i}if(!t)return false;r+=t}}const t=q.byteLength(l(r));return{length:t+r,write(){M(n,e,r)}}}function P(e,t,i,r){const n=["reasonString","userProperties"];const s=i&&i.properties&&i.properties.maximumPacketSize?i.properties.maximumPacketSize:0;let o=B(e,t);if(s){while(r+o.length>s){const a=n.shift();if(a&&t[a]){delete t[a];o=B(e,t)}else{return false}}}return o}function O(i,r,n){const e=k.propertiesTypes[r];switch(e){case"byte":{i.write(q.from([k.properties[r]]));i.write(q.from([+n]));break}case"int8":{i.write(q.from([k.properties[r]]));i.write(q.from([n]));break}case"binary":{i.write(q.from([k.properties[r]]));T(i,n);break}case"int16":{i.write(q.from([k.properties[r]]));E(i,n);break}case"int32":{i.write(q.from([k.properties[r]]));D(i,n);break}case"var":{i.write(q.from([k.properties[r]]));C(i,n);break}case"string":{i.write(q.from([k.properties[r]]));A(i,n);break}case"pair":{Object.getOwnPropertyNames(n).forEach(t=>{const e=n[t];if(Array.isArray(e)){e.forEach(e=>{i.write(q.from([k.properties[r]]));x(i,t.toString(),e.toString())})}else{i.write(q.from([k.properties[r]]));x(i,t.toString(),e.toString())}});break}default:{i.emit("error",new Error(`Invalid property ${r} value: ${n}`));return false}}}function M(t,e,i){C(t,i);for(const r in e){if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==null){const n=e[r];if(Array.isArray(n)){for(let e=0;e<n.length;e++){O(t,r,n[e])}}else{O(t,r,n)}}}}function R(e){if(!e)return 0;else if(e instanceof q)return e.length;else return q.byteLength(e)}function N(e){return typeof e==="string"||e instanceof q}z.exports=t}).call(this)}).call(this,U("buffer").Buffer)},{"./constants":45,"./numbers":48,buffer:17,debug:18,"process-nextick-args":56}],52:[function(e,t,i){var n=1e3;var s=n*60;var o=s*60;var a=o*24;var l=a*7;var u=a*365.25;t.exports=function(e,t){t=t||{};var i=typeof e;if(i==="string"&&e.length>0){return r(e)}else if(i==="number"&&isFinite(e)){return t.long?c(e):f(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function r(e){e=String(e);if(e.length>100){return}var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t){return}var i=parseFloat(t[1]);var r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return i*u;case"weeks":case"week":case"w":return i*l;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*o;case"minutes":case"minute":case"mins":case"min":case"m":return i*s;case"seconds":case"second":case"secs":case"sec":case"s":return i*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return undefined}}function f(e){var t=Math.abs(e);if(t>=a){return Math.round(e/a)+"d"}if(t>=o){return Math.round(e/o)+"h"}if(t>=s){return Math.round(e/s)+"m"}if(t>=n){return Math.round(e/n)+"s"}return e+"ms"}function c(e){var t=Math.abs(e);if(t>=a){return h(e,t,a,"day")}if(t>=o){return h(e,t,o,"hour")}if(t>=s){return h(e,t,s,"minute")}if(t>=n){return h(e,t,n,"second")}return e+" ms"}function h(e,t,i,r){var n=t>=i*1.5;return Math.round(e/i)+" "+r+(n?"s":"")}},{}],53:[function(e,t,i){const r=e("./lib/number-allocator.js");t.exports.NumberAllocator=r},{"./lib/number-allocator.js":54}],54:[function(e,t,i){"use strict";const r=e("js-sdsl").OrderedSet;const u=e("debug")("number-allocator:trace");const f=e("debug")("number-allocator:error");function c(e,t){this.low=e;this.high=t}c.prototype.equals=function(e){return this.low===e.low&&this.high===e.high};c.prototype.compare=function(e){if(this.low<e.low&&this.high<e.low)return-1;if(e.low<this.low&&e.high<this.low)return 1;return 0};function n(e,t){if(!(this instanceof n)){return new n(e,t)}this.min=e;this.max=t;this.ss=new r([],(e,t)=>{return e.compare(t)});u("Create");this.clear()}n.prototype.firstVacant=function(){if(this.ss.size()===0)return null;return this.ss.front().low};n.prototype.alloc=function(){if(this.ss.size()===0){u("alloc():empty");return null}const e=this.ss.begin();const t=e.pointer.low;const i=e.pointer.high;const r=t;if(r+1<=i){this.ss.updateKeyByIterator(e,new c(t+1,i))}else{this.ss.eraseElementByPos(0)}u("alloc():"+r);return r};n.prototype.use=function(e){const t=new c(e,e);const i=this.ss.lowerBound(t);if(!i.equals(this.ss.end())){const r=i.pointer.low;const n=i.pointer.high;if(i.pointer.equals(t)){this.ss.eraseElementByIterator(i);u("use():"+e);return true}if(r>e)return false;if(r===e){this.ss.updateKeyByIterator(i,new c(r+1,n));u("use():"+e);return true}if(n===e){this.ss.updateKeyByIterator(i,new c(r,n-1));u("use():"+e);return true}this.ss.updateKeyByIterator(i,new c(e+1,n));this.ss.insert(new c(r,e-1));u("use():"+e);return true}u("use():failed");return false};n.prototype.free=function(e){if(e<this.min||e>this.max){f("free():"+e+" is out of range");return}const t=new c(e,e);const i=this.ss.upperBound(t);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin())){this.ss.insert(t);return}i.pre();const r=i.pointer.high;const n=i.pointer.high;if(n+1===e){this.ss.updateKeyByIterator(i,new c(r,e))}else{this.ss.insert(t)}}else{if(i.equals(this.ss.begin())){if(e+1===i.pointer.low){const r=i.pointer.high-1;const n=i.pointer.high;this.ss.updateKeyByIterator(i,new c(r,n))}else{this.ss.insert(t)}}else{const s=i.pointer.low;const o=i.pointer.high;i.pre();const a=i.pointer.low;const l=i.pointer.high;if(l+1===e){if(e+1===s){this.ss.eraseElementByIterator(i);const n=i.pointer.high;this.ss.updateKeyByIterator(i,new c(a,n))}else{this.ss.updateKeyByIterator(i,new c(a,e))}}else{if(e+1===s){this.ss.eraseElementByIterator(i.next());this.ss.insert(new c(e,o))}else{this.ss.insert(t)}}}}u("free():"+e)};n.prototype.clear=function(){u("clear()");this.ss.clear();this.ss.insert(new c(this.min,this.max))};n.prototype.intervalCount=function(){return this.ss.size()};n.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss){console.log(e)}};t.exports=n},{debug:18,"js-sdsl":42}],55:[function(e,t,i){var r=e("wrappy");t.exports=r(n);t.exports.strict=r(s);n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:true})});function n(e){var t=function(){if(t.called)return t.value;t.called=true;return t.value=e.apply(this,arguments)};t.called=false;return t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);t.called=true;return t.value=e.apply(this,arguments)};var i=e.name||"Function wrapped with `once`";t.onceError=i+" shouldn't be called more than once";t.called=false;return t}},{wrappy:86}],56:[function(e,t,i){(function(a){(function(){"use strict";if(typeof a==="undefined"||!a.version||a.version.indexOf("v0.")===0||a.version.indexOf("v1.")===0&&a.version.indexOf("v1.8.")!==0){t.exports={nextTick:e}}else{t.exports=a}function e(t,i,r,n){if(typeof t!=="function"){throw new TypeError('"callback" argument must be a function')}var e=arguments.length;var s,o;switch(e){case 0:case 1:return a.nextTick(t);case 2:return a.nextTick(function e(){t.call(null,i)});case 3:return a.nextTick(function e(){t.call(null,i,r)});case 4:return a.nextTick(function e(){t.call(null,i,r,n)});default:s=new Array(e-1);o=0;while(o<s.length){s[o++]=arguments[o]}return a.nextTick(function e(){t.apply(null,s)})}}}).call(this)}).call(this,e("_process"))},{_process:57}],57:[function(e,t,i){var r=t.exports={};var n;var s;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){s=clearTimeout}else{s=a}}catch(e){s=a}})();function l(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function u(t){if(s===clearTimeout){return clearTimeout(t)}if((s===a||!s)&&clearTimeout){s=clearTimeout;return clearTimeout(t)}try{return s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}var f=[];var c=false;var h;var d=-1;function p(){if(!c||!h){return}c=false;if(h.length){f=h.concat(f)}else{d=-1}if(f.length){g()}}function g(){if(c){return}var e=l(p);c=true;var t=f.length;while(t){h=f;f=[];while(++d<t){if(h){h[d].run()}}d=-1;t=f.length}h=null;c=false;u(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}}f.push(new m(e,t));if(f.length===1&&!c){l(g)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function y(){}r.on=y;r.addListener=y;r.once=y;r.off=y;r.removeListener=y;r.removeAllListeners=y;r.emit=y;r.prependListener=y;r.prependOnceListener=y;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],58:[function(e,N,L){(function(R){(function(){(function(e){var t=typeof L=="object"&&L&&!L.nodeType&&L;var i=typeof N=="object"&&N&&!N.nodeType&&N;var r=typeof R=="object"&&R;if(r.global===r||r.window===r||r.self===r){e=r}var n,y=2147483647,v=36,b=1,w=26,s=38,o=700,_=72,x=128,k="-",a=/^xn--/,l=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=v-b,S=Math.floor,E=String.fromCharCode,h;function C(e){throw new RangeError(f[e])}function d(e,t){var i=e.length;var r=[];while(i--){r[i]=t(e[i])}return r}function p(e,t){var i=e.split("@");var r="";if(i.length>1){r=i[0]+"@";e=i[1]}e=e.replace(u,".");var n=e.split(".");var s=d(n,t).join(".");return r+s}function A(e){var t=[],i=0,r=e.length,n,s;while(i<r){n=e.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){s=e.charCodeAt(i++);if((s&64512)==56320){t.push(((n&1023)<<10)+(s&1023)+65536)}else{t.push(n);i--}}else{t.push(n)}}return t}function m(e){return d(e,function(e){var t="";if(e>65535){e-=65536;t+=E(e>>>10&1023|55296);e=56320|e&1023}t+=E(e);return t}).join("")}function I(e){if(e-48<10){return e-22}if(e-65<26){return e-65}if(e-97<26){return e-97}return v}function T(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function B(e,t,i){var r=0;e=i?S(e/o):e>>1;e+=S(e/t);for(;e>c*w>>1;r+=v){e=S(e/c)}return S(r+(c+1)*e/(e+s))}function g(e){var t=[],i=e.length,r,n=0,s=x,o=_,a,l,u,f,c,h,d,p,g;a=e.lastIndexOf(k);if(a<0){a=0}for(l=0;l<a;++l){if(e.charCodeAt(l)>=128){C("not-basic")}t.push(e.charCodeAt(l))}for(u=a>0?a+1:0;u<i;){for(f=n,c=1,h=v;;h+=v){if(u>=i){C("invalid-input")}d=I(e.charCodeAt(u++));if(d>=v||d>S((y-n)/c)){C("overflow")}n+=d*c;p=h<=o?b:h>=o+w?w:h-o;if(d<p){break}g=v-p;if(c>S(y/g)){C("overflow")}c*=g}r=t.length+1;o=B(n-f,r,f==0);if(S(n/r)>y-s){C("overflow")}s+=S(n/r);n%=r;t.splice(n++,0,s)}return m(t)}function P(e){var t,i,r,n,s,o,a,l,u,f,c,h=[],d,p,g,m;e=A(e);d=e.length;t=x;i=0;s=_;for(o=0;o<d;++o){c=e[o];if(c<128){h.push(E(c))}}r=n=h.length;if(n){h.push(k)}while(r<d){for(a=y,o=0;o<d;++o){c=e[o];if(c>=t&&c<a){a=c}}p=r+1;if(a-t>S((y-i)/p)){C("overflow")}i+=(a-t)*p;t=a;for(o=0;o<d;++o){c=e[o];if(c<t&&++i>y){C("overflow")}if(c==t){for(l=i,u=v;;u+=v){f=u<=s?b:u>=s+w?w:u-s;if(l<f){break}m=l-f;g=v-f;h.push(E(T(f+m%g,0)));l=S(m/g)}h.push(E(T(l,0)));s=B(i,p,r==n);i=0;++r}}++i;++t}return h.join("")}function O(e){return p(e,function(e){return a.test(e)?g(e.slice(4).toLowerCase()):e})}function M(e){return p(e,function(e){return l.test(e)?"xn--"+P(e):e})}n={version:"1.4.1",ucs2:{decode:A,encode:m},decode:g,encode:P,toASCII:M,toUnicode:O};if(typeof F=="function"&&typeof F.amd=="object"&&F.amd){F("punycode",function(){return n})}else if(t&&i){if(N.exports==t){i.exports=n}else{for(h in n){n.hasOwnProperty(h)&&(t[h]=n[h])}}}else{e.punycode=n}})(this)}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],59:[function(e,t,i){"use strict";function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,r){t=t||"&";i=i||"=";var n={};if(typeof e!=="string"||e.length===0){return n}var s=/\+/g;e=e.split(t);var o=1e3;if(r&&typeof r.maxKeys==="number"){o=r.maxKeys}var a=e.length;if(o>0&&a>o){a=o}for(var l=0;l<a;++l){var u=e[l].replace(s,"%20"),f=u.indexOf(i),c,h,d,p;if(f>=0){c=u.substr(0,f);h=u.substr(f+1)}else{c=u;h=""}d=decodeURIComponent(c);p=decodeURIComponent(h);if(!g(n,d)){n[d]=p}else if(m(n[d])){n[d].push(p)}else{n[d]=[n[d],p]}}return n};var m=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},{}],60:[function(e,t,i){"use strict";var s=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(i,r,n,e){r=r||"&";n=n||"=";if(i===null){i=undefined}if(typeof i==="object"){return a(l(i),function(e){var t=encodeURIComponent(s(e))+n;if(o(i[e])){return a(i[e],function(e){return t+encodeURIComponent(s(e))}).join(r)}else{return t+encodeURIComponent(s(i[e]))}}).join(r)}if(!e)return"";return encodeURIComponent(s(e))+n+encodeURIComponent(s(i))};var o=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function a(e,t){if(e.map)return e.map(t);var i=[];for(var r=0;r<e.length;r++){i.push(t(e[r],r))}return i}var l=Object.keys||function(e){var t=[];for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i))t.push(i)}return t}},{}],61:[function(e,t,i){"use strict";i.decode=i.parse=e("./decode");i.encode=i.stringify=e("./encode")},{"./decode":59,"./encode":60}],62:[function(e,t,i){"use strict";function s(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var o={};function r(e,r,t){if(!t){t=Error}function n(e,t,i){if(typeof r==="string"){return r}else{return r(e,t,i)}}var i=function(r){s(e,r);function e(e,t,i){return r.call(this,n(e,t,i))||this}return e}(t);i.prototype.name=t.name;i.prototype.code=e;o[e]=i}function a(e,t){if(Array.isArray(e)){var i=e.length;e=e.map(function(e){return String(e)});if(i>2){return"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]}else if(i===2){return"one of ".concat(t," ").concat(e[0]," or ").concat(e[1])}else{return"of ".concat(t," ").concat(e[0])}}else{return"of ".concat(t," ").concat(String(e))}}function l(e,t,i){return e.substr(!i||i<0?0:+i,t.length)===t}function u(e,t,i){if(i===undefined||i>e.length){i=e.length}return e.substring(i-t.length,i)===t}function f(e,t,i){if(typeof i!=="number"){i=0}if(i+t.length>e.length){return false}else{return e.indexOf(t,i)!==-1}}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);r("ERR_INVALID_ARG_TYPE",function(e,t,i){var r;if(typeof t==="string"&&l(t,"not ")){r="must not be";t=t.replace(/^not /,"")}else{r="must be"}var n;if(u(e," argument")){n="The ".concat(e," ").concat(r," ").concat(a(t,"type"))}else{var s=f(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(s," ").concat(r," ").concat(a(t,"type"))}n+=". Received type ".concat(typeof i);return n},TypeError);r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});r("ERR_STREAM_PREMATURE_CLOSE","Premature close");r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});r("ERR_MULTIPLE_CALLBACK","Callback called multiple times");r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");r("ERR_STREAM_WRITE_AFTER_END","write after end");r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");t.exports.codes=o},{}],63:[function(f,c,e){(function(u){(function(){"use strict";var e=Object.keys||function(e){var t=[];for(var i in e){t.push(i)}return t};c.exports=o;var t=f("./_stream_readable");var i=f("./_stream_writable");f("inherits")(o,t);{var r=e(i.prototype);for(var n=0;n<r.length;n++){var s=r[n];if(!o.prototype[s])o.prototype[s]=i.prototype[s]}}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e);i.call(this,e);this.allowHalfOpen=true;if(e){if(e.readable===false)this.readable=false;if(e.writable===false)this.writable=false;if(e.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",a)}}}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});Object.defineProperty(o.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(o.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function a(){if(this._writableState.ended)return;u.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(o.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function e(t){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=t;this._writableState.destroyed=t}})}).call(this)}).call(this,f("_process"))},{"./_stream_readable":65,"./_stream_writable":67,_process:57,inherits:24}],64:[function(e,t,i){"use strict";t.exports=n;var r=e("./_stream_transform");e("inherits")(n,r);function n(e){if(!(this instanceof n))return new n(e);r.call(this,e)}n.prototype._transform=function(e,t,i){i(null,e)}},{"./_stream_transform":66,inherits:24}],65:[function(G,X,e){(function(K,Y){(function(){"use strict";X.exports=k;var r;k.ReadableState=x;var L=G("events").EventEmitter;var m=function e(t,i){return t.listeners(i).length};var n=G("./internal/streams/stream");var a=G("buffer").Buffer;var t=Y.Uint8Array||function(){};function l(e){return a.from(e)}function s(e){return a.isBuffer(e)||e instanceof t}var e=G("util");var y;if(e&&e.debuglog){y=e.debuglog("stream")}else{y=function e(){}}var o=G("./internal/streams/buffer_list");var i=G("./internal/streams/destroy");var u=G("./internal/streams/state"),f=u.getHighWaterMark;var c=G("../errors").codes,h=c.ERR_INVALID_ARG_TYPE,d=c.ERR_STREAM_PUSH_AFTER_EOF,p=c.ERR_METHOD_NOT_IMPLEMENTED,F=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var g;var v;var b;G("inherits")(k,n);var w=i.errorOrDestroy;var _=["error","close","destroy","pause","resume"];function j(e,t,i){if(typeof e.prependListener==="function")return e.prependListener(t,i);if(!e._events||!e._events[t])e.on(t,i);else if(Array.isArray(e._events[t]))e._events[t].unshift(i);else e._events[t]=[i,e._events[t]]}function x(e,t,i){r=r||G("./_stream_duplex");e=e||{};if(typeof i!=="boolean")i=t instanceof r;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.readableObjectMode;this.highWaterMark=f(this,e,"readableHighWaterMark",i);this.buffer=new o;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.destroyed=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){if(!g)g=G("string_decoder/").StringDecoder;this.decoder=new g(e.encoding);this.encoding=e.encoding}}function k(e){r=r||G("./_stream_duplex");if(!(this instanceof k))return new k(e);var t=this instanceof r;this._readableState=new x(e,this,t);this.readable=true;if(e){if(typeof e.read==="function")this._read=e.read;if(typeof e.destroy==="function")this._destroy=e.destroy}n.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function e(t){if(!this._readableState){return}this._readableState.destroyed=t}});k.prototype.destroy=i.destroy;k.prototype._undestroy=i.undestroy;k.prototype._destroy=function(e,t){t(e)};k.prototype.push=function(e,t){var i=this._readableState;var r;if(!i.objectMode){if(typeof e==="string"){t=t||i.defaultEncoding;if(t!==i.encoding){e=a.from(e,t);t=""}r=true}}else{r=true}return S(this,e,t,false,r)};k.prototype.unshift=function(e){return S(this,e,null,true,false)};function S(e,t,i,r,n){y("readableAddChunk",t);var s=e._readableState;if(t===null){s.reading=false;U(e,s)}else{var o;if(!n)o=D(s,t);if(o){w(e,o)}else if(s.objectMode||t&&t.length>0){if(typeof t!=="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==a.prototype){t=l(t)}if(r){if(s.endEmitted)w(e,new F);else E(e,s,t,true)}else if(s.ended){w(e,new d)}else if(s.destroyed){return false}else{s.reading=false;if(s.decoder&&!i){t=s.decoder.write(t);if(s.objectMode||t.length!==0)E(e,s,t,false);else B(e,s)}else{E(e,s,t,false)}}}else if(!r){s.reading=false;B(e,s)}}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function E(e,t,i,r){if(t.flowing&&t.length===0&&!t.sync){t.awaitDrain=0;e.emit("data",i)}else{t.length+=t.objectMode?1:i.length;if(r)t.buffer.unshift(i);else t.buffer.push(i);if(t.needReadable)I(e)}B(e,t)}function D(e,t){var i;if(!s(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){i=new h("chunk",["string","Buffer","Uint8Array"],t)}return i}k.prototype.isPaused=function(){return this._readableState.flowing===false};k.prototype.setEncoding=function(e){if(!g)g=G("string_decoder/").StringDecoder;var t=new g(e);this._readableState.decoder=t;this._readableState.encoding=this._readableState.decoder.encoding;var i=this._readableState.buffer.head;var r="";while(i!==null){r+=t.write(i.data);i=i.next}this._readableState.buffer.clear();if(r!=="")this._readableState.buffer.push(r);this._readableState.length=r.length;return this};var C=1073741824;function q(e){if(e>=C){e=C}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function A(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=q(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}k.prototype.read=function(e){y("read",e);e=parseInt(e,10);var t=this._readableState;var i=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){y("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)R(this);else I(this);return null}e=A(e,t);if(e===0&&t.ended){if(t.length===0)R(this);return null}var r=t.needReadable;y("need readable",r);if(t.length===0||t.length-e<t.highWaterMark){r=true;y("length less than watermark",r)}if(t.ended||t.reading){r=false;y("reading or ended",r)}else if(r){y("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=A(i,t)}var n;if(e>0)n=M(e,t);else n=null;if(n===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.awaitDrain=0}if(t.length===0){if(!t.ended)t.needReadable=true;if(i!==e&&t.ended)R(this)}if(n!==null)this.emit("data",n);return n};function U(e,t){y("onEofChunk");if(t.ended)return;if(t.decoder){var i=t.decoder.end();if(i&&i.length){t.buffer.push(i);t.length+=t.objectMode?1:i.length}}t.ended=true;if(t.sync){I(e)}else{t.needReadable=false;if(!t.emittedReadable){t.emittedReadable=true;T(e)}}}function I(e){var t=e._readableState;y("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){y("emitReadable",t.flowing);t.emittedReadable=true;K.nextTick(T,e)}}function T(e){var t=e._readableState;y("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;O(e)}function B(e,t){if(!t.readingMore){t.readingMore=true;K.nextTick(z,e,t)}}function z(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){var i=t.length;y("maybeReadMore read 0");e.read(0);if(i===t.length)break}t.readingMore=false}k.prototype._read=function(e){w(this,new p("_read()"))};k.prototype.pipe=function(i,e){var r=this;var n=this._readableState;switch(n.pipesCount){case 0:n.pipes=i;break;case 1:n.pipes=[n.pipes,i];break;default:n.pipes.push(i);break}n.pipesCount+=1;y("pipe count=%d opts=%j",n.pipesCount,e);var t=(!e||e.end!==false)&&i!==K.stdout&&i!==K.stderr;var s=t?a:g;if(n.endEmitted)K.nextTick(s);else r.once("end",s);i.on("unpipe",o);function o(e,t){y("onunpipe");if(e===r){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;f()}}}function a(){y("onend");i.end()}var l=V(r);i.on("drain",l);var u=false;function f(){y("cleanup");i.removeListener("close",d);i.removeListener("finish",p);i.removeListener("drain",l);i.removeListener("error",h);i.removeListener("unpipe",o);r.removeListener("end",a);r.removeListener("end",g);r.removeListener("data",c);u=true;if(n.awaitDrain&&(!i._writableState||i._writableState.needDrain))l()}r.on("data",c);function c(e){y("ondata");var t=i.write(e);y("dest.write",t);if(t===false){if((n.pipesCount===1&&n.pipes===i||n.pipesCount>1&&N(n.pipes,i)!==-1)&&!u){y("false write response, pause",n.awaitDrain);n.awaitDrain++}r.pause()}}function h(e){y("onerror",e);g();i.removeListener("error",h);if(m(i,"error")===0)w(i,e)}j(i,"error",h);function d(){i.removeListener("finish",p);g()}i.once("close",d);function p(){y("onfinish");i.removeListener("close",d);g()}i.once("finish",p);function g(){y("unpipe");r.unpipe(i)}i.emit("pipe",r);if(!n.flowing){y("pipe resume");r.resume()}return i};function V(i){return function e(){var t=i._readableState;y("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&m(i,"data")){t.flowing=true;O(i)}}}k.prototype.unpipe=function(e){var t=this._readableState;var i={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,i);return this}if(!e){var r=t.pipes;var n=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var s=0;s<n;s++){r[s].emit("unpipe",this,{hasUnpiped:false})}return this}var o=N(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,i);return this};k.prototype.on=function(e,t){var i=n.prototype.on.call(this,e,t);var r=this._readableState;if(e==="data"){r.readableListening=this.listenerCount("readable")>0;if(r.flowing!==false)this.resume()}else if(e==="readable"){if(!r.endEmitted&&!r.readableListening){r.readableListening=r.needReadable=true;r.flowing=false;r.emittedReadable=false;y("on readable",r.length,r.reading);if(r.length){I(this)}else if(!r.reading){K.nextTick(W,this)}}}return i};k.prototype.addListener=k.prototype.on;k.prototype.removeListener=function(e,t){var i=n.prototype.removeListener.call(this,e,t);if(e==="readable"){K.nextTick(P,this)}return i};k.prototype.removeAllListeners=function(e){var t=n.prototype.removeAllListeners.apply(this,arguments);if(e==="readable"||e===undefined){K.nextTick(P,this)}return t};function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0;if(t.resumeScheduled&&!t.paused){t.flowing=true}else if(e.listenerCount("data")>0){e.resume()}}function W(e){y("readable nexttick read 0");e.read(0)}k.prototype.resume=function(){var e=this._readableState;if(!e.flowing){y("resume");e.flowing=!e.readableListening;H(this,e)}e.paused=false;return this};function H(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;K.nextTick($,e,t)}}function $(e,t){y("resume",t.reading);if(!t.reading){e.read(0)}t.resumeScheduled=false;e.emit("resume");O(e);if(t.flowing&&!t.reading)e.read(0)}k.prototype.pause=function(){y("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){y("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function O(e){var t=e._readableState;y("flow",t.flowing);while(t.flowing&&e.read()!==null){}}k.prototype.wrap=function(i){var r=this;var n=this._readableState;var s=false;i.on("end",function(){y("wrapped end");if(n.decoder&&!n.ended){var e=n.decoder.end();if(e&&e.length)r.push(e)}r.push(null)});i.on("data",function(e){y("wrapped data");if(n.decoder)e=n.decoder.write(e);if(n.objectMode&&(e===null||e===undefined))return;else if(!n.objectMode&&(!e||!e.length))return;var t=r.push(e);if(!t){s=true;i.pause()}});for(var e in i){if(this[e]===undefined&&typeof i[e]==="function"){this[e]=function e(t){return function e(){return i[t].apply(i,arguments)}}(e)}}for(var t=0;t<_.length;t++){i.on(_[t],this.emit.bind(this,_[t]))}this._read=function(e){y("wrapped _read",e);if(s){s=false;i.resume()}};return this};if(typeof Symbol==="function"){k.prototype[Symbol.asyncIterator]=function(){if(v===undefined){v=G("./internal/streams/async_iterator")}return v(this)}}Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:false,get:function e(){return this._readableState.highWaterMark}});Object.defineProperty(k.prototype,"readableBuffer",{enumerable:false,get:function e(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(k.prototype,"readableFlowing",{enumerable:false,get:function e(){return this._readableState.flowing},set:function e(t){if(this._readableState){this._readableState.flowing=t}}});k._fromList=M;Object.defineProperty(k.prototype,"readableLength",{enumerable:false,get:function e(){return this._readableState.length}});function M(e,t){if(t.length===0)return null;var i;if(t.objectMode)i=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)i=t.buffer.join("");else if(t.buffer.length===1)i=t.buffer.first();else i=t.buffer.concat(t.length);t.buffer.clear()}else{i=t.buffer.consume(e,t.decoder)}return i}function R(e){var t=e._readableState;y("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;K.nextTick(Q,t,e)}}function Q(e,t){y("endReadableNT",e.endEmitted,e.length);if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");if(e.autoDestroy){var i=t._writableState;if(!i||i.autoDestroy&&i.finished){t.destroy()}}}}if(typeof Symbol==="function"){k.from=function(e,t){if(b===undefined){b=G("./internal/streams/from")}return b(k,e,t)}}function N(e,t){for(var i=0,r=e.length;i<r;i++){if(e[i]===t)return i}return-1}}).call(this)}).call(this,G("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":62,"./_stream_duplex":63,"./internal/streams/async_iterator":68,"./internal/streams/buffer_list":69,"./internal/streams/destroy":70,"./internal/streams/from":72,"./internal/streams/state":74,"./internal/streams/stream":75,_process:57,buffer:17,events:22,inherits:24,"string_decoder/":82,util:16}],66:[function(e,t,i){"use strict";t.exports=f;var r=e("../errors").codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0;var l=e("./_stream_duplex");e("inherits")(f,l);function u(e,t){var i=this._transformState;i.transforming=false;var r=i.writecb;if(r===null){return this.emit("error",new s)}i.writechunk=null;i.writecb=null;if(t!=null)this.push(t);r(e);var n=this._readableState;n.reading=false;if(n.needReadable||n.length<n.highWaterMark){this._read(n.highWaterMark)}}function f(e){if(!(this instanceof f))return new f(e);l.call(this,e);this._transformState={afterTransform:u.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.on("prefinish",c)}function c(){var i=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush(function(e,t){h(i,e,t)})}else{h(this,null,null)}}f.prototype.push=function(e,t){this._transformState.needTransform=false;return l.prototype.push.call(this,e,t)};f.prototype._transform=function(e,t,i){i(new n("_transform()"))};f.prototype._write=function(e,t,i){var r=this._transformState;r.writecb=i;r.writechunk=e;r.writeencoding=t;if(!r.transforming){var n=this._readableState;if(r.needTransform||n.needReadable||n.length<n.highWaterMark)this._read(n.highWaterMark)}};f.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};f.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})};function h(e,t,i){if(t)return e.emit("error",t);if(i!=null)e.push(i);if(e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}},{"../errors":62,"./_stream_duplex":63,inherits:24}],67:[function(H,$,e){(function(V,W){(function(){"use strict";$.exports=S;function L(e,t,i){this.chunk=e;this.encoding=t;this.callback=i;this.next=null}function h(e){var t=this;this.next=null;this.entry=null;this.finish=function(){z(t,e)}}var n;S.WritableState=x;var e={deprecate:H("util-deprecate")};var i=H("./internal/streams/stream");var o=H("buffer").Buffer;var t=W.Uint8Array||function(){};function a(e){return o.from(e)}function l(e){return o.isBuffer(e)||e instanceof t}var r=H("./internal/streams/destroy");var s=H("./internal/streams/state"),u=s.getHighWaterMark;var f=H("../errors").codes,c=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,p=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,v=f.ERR_STREAM_WRITE_AFTER_END,b=f.ERR_UNKNOWN_ENCODING;var w=r.errorOrDestroy;H("inherits")(S,i);function _(){}function x(e,t,i){n=n||H("./_stream_duplex");e=e||{};if(typeof i!=="boolean")i=t instanceof n;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.writableObjectMode;this.highWaterMark=u(this,e,"writableHighWaterMark",i);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var r=e.decodeStrings===false;this.decodeStrings=!r;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){F(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new h(this)}x.prototype.getBuffer=function e(){var t=this.bufferedRequest;var i=[];while(t){i.push(t);t=t.next}return i};(function(){try{Object.defineProperty(x.prototype,"buffer",{get:e.deprecate(function e(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}})();var k;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){k=Function.prototype[Symbol.hasInstance];Object.defineProperty(S,Symbol.hasInstance,{value:function e(t){if(k.call(this,t))return true;if(this!==S)return false;return t&&t._writableState instanceof x}})}else{k=function e(t){return t instanceof this}}function S(e){n=n||H("./_stream_duplex");var t=this instanceof n;if(!t&&!k.call(S,this))return new S(e);this._writableState=new x(e,this,t);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev;if(typeof e.destroy==="function")this._destroy=e.destroy;if(typeof e.final==="function")this._final=e.final}i.call(this)}S.prototype.pipe=function(){w(this,new g)};function E(e,t){var i=new v;w(e,i);V.nextTick(t,i)}function C(e,t,i,r){var n;if(i===null){n=new y}else if(typeof i!=="string"&&!t.objectMode){n=new c("chunk",["string","Buffer"],i)}if(n){w(e,n);V.nextTick(r,n);return false}return true}S.prototype.write=function(e,t,i){var r=this._writableState;var n=false;var s=!r.objectMode&&l(e);if(s&&!o.isBuffer(e)){e=a(e)}if(typeof t==="function"){i=t;t=null}if(s)t="buffer";else if(!t)t=r.defaultEncoding;if(typeof i!=="function")i=_;if(r.ending)E(this,i);else if(s||C(this,r,e,i)){r.pendingcb++;n=I(this,r,s,e,t,i)}return n};S.prototype.cork=function(){this._writableState.corked++};S.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest)M(this,e)}};S.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);this._writableState.defaultEncoding=t;return this};Object.defineProperty(S.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});function A(e,t,i){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=o.from(t,i)}return t}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});function I(e,t,i,r,n,s){if(!i){var o=A(t,r,n);if(r!==o){i=true;n="buffer";r=o}}var a=t.objectMode?1:r.length;t.length+=a;var l=t.length<t.highWaterMark;if(!l)t.needDrain=true;if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null};if(u){u.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{T(e,t,false,a,r,n,s)}return l}function T(e,t,i,r,n,s,o){t.writelen=r;t.writecb=o;t.writing=true;t.sync=true;if(t.destroyed)t.onwrite(new m("write"));else if(i)e._writev(n,t.onwrite);else e._write(n,s,t.onwrite);t.sync=false}function B(e,t,i,r,n){--t.pendingcb;if(i){V.nextTick(n,r);V.nextTick(N,e,t);e._writableState.errorEmitted=true;w(e,r)}else{n(r);e._writableState.errorEmitted=true;w(e,r);N(e,t)}}function P(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function F(e,t){var i=e._writableState;var r=i.sync;var n=i.writecb;if(typeof n!=="function")throw new p;P(i);if(t)B(e,i,r,t,n);else{var s=R(i)||e.destroyed;if(!s&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest){M(e,i)}if(r){V.nextTick(O,e,i,s,n)}else{O(e,i,s,n)}}}function O(e,t,i,r){if(!i)j(e,t);t.pendingcb--;r();N(e,t)}function j(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function M(e,t){t.bufferProcessing=true;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var r=t.bufferedRequestCount;var n=new Array(r);var s=t.corkedRequestsFree;s.entry=i;var o=0;var a=true;while(i){n[o]=i;if(!i.isBuf)a=false;i=i.next;o+=1}n.allBuffers=a;T(e,t,true,t.length,n,"",s.finish);t.pendingcb++;t.lastBufferedRequest=null;if(s.next){t.corkedRequestsFree=s.next;s.next=null}else{t.corkedRequestsFree=new h(t)}t.bufferedRequestCount=0}else{while(i){var l=i.chunk;var u=i.encoding;var f=i.callback;var c=t.objectMode?1:l.length;T(e,t,false,c,l,u,f);i=i.next;t.bufferedRequestCount--;if(t.writing){break}}if(i===null)t.lastBufferedRequest=null}t.bufferedRequest=i;t.bufferProcessing=false}S.prototype._write=function(e,t,i){i(new d("_write()"))};S.prototype._writev=null;S.prototype.end=function(e,t,i){var r=this._writableState;if(typeof e==="function"){i=e;e=null;t=null}else if(typeof t==="function"){i=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(r.corked){r.corked=1;this.uncork()}if(!r.ending)U(this,r,i);return this};Object.defineProperty(S.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function R(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function D(t,i){t._final(function(e){i.pendingcb--;if(e){w(t,e)}i.prefinished=true;t.emit("prefinish");N(t,i)})}function q(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"&&!t.destroyed){t.pendingcb++;t.finalCalled=true;V.nextTick(D,e,t)}else{t.prefinished=true;e.emit("prefinish")}}}function N(e,t){var i=R(t);if(i){q(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");if(t.autoDestroy){var r=e._readableState;if(!r||r.autoDestroy&&r.endEmitted){e.destroy()}}}}return i}function U(e,t,i){t.ending=true;N(e,t);if(i){if(t.finished)V.nextTick(i);else e.once("finish",i)}t.ended=true;e.writable=false}function z(e,t,i){var r=e.entry;e.entry=null;while(r){var n=r.callback;t.pendingcb--;n(i);r=r.next}t.corkedRequestsFree.next=e}Object.defineProperty(S.prototype,"destroyed",{enumerable:false,get:function e(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function e(t){if(!this._writableState){return}this._writableState.destroyed=t}});S.prototype.destroy=r.destroy;S.prototype._undestroy=r.undestroy;S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,H("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":62,"./_stream_duplex":63,"./internal/streams/destroy":70,"./internal/streams/state":74,"./internal/streams/stream":75,_process:57,buffer:17,inherits:24,"util-deprecate":85}],68:[function(v,b,e){(function(y){(function(){"use strict";var e;function r(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}var s=v("./end-of-stream");var o=Symbol("lastResolve");var a=Symbol("lastReject");var l=Symbol("error");var u=Symbol("ended");var f=Symbol("lastPromise");var c=Symbol("handlePromise");var h=Symbol("stream");function d(e,t){return{value:e,done:t}}function t(e){var t=e[o];if(t!==null){var i=e[h].read();if(i!==null){e[f]=null;e[o]=null;e[a]=null;t(d(i,false))}}}function p(e){y.nextTick(t,e)}function g(i,r){return function(e,t){i.then(function(){if(r[u]){e(d(undefined,true));return}r[c](e,t)},t)}}var i=Object.getPrototypeOf(function(){});var m=Object.setPrototypeOf((e={get stream(){return this[h]},next:function e(){var i=this;var t=this[l];if(t!==null){return Promise.reject(t)}if(this[u]){return Promise.resolve(d(undefined,true))}if(this[h].destroyed){return new Promise(function(e,t){y.nextTick(function(){if(i[l]){t(i[l])}else{e(d(undefined,true))}})})}var r=this[f];var n;if(r){n=new Promise(g(r,this))}else{var s=this[h].read();if(s!==null){return Promise.resolve(d(s,false))}n=new Promise(this[c])}this[f]=n;return n}},r(e,Symbol.asyncIterator,function(){return this}),r(e,"return",function e(){var r=this;return new Promise(function(t,i){r[h].destroy(null,function(e){if(e){i(e);return}t(d(undefined,true))})})}),e),i);var n=function e(t){var i;var n=Object.create(m,(i={},r(i,h,{value:t,writable:true}),r(i,o,{value:null,writable:true}),r(i,a,{value:null,writable:true}),r(i,l,{value:null,writable:true}),r(i,u,{value:t._readableState.endEmitted,writable:true}),r(i,c,{value:function e(t,i){var r=n[h].read();if(r){n[f]=null;n[o]=null;n[a]=null;t(d(r,false))}else{n[o]=t;n[a]=i}},writable:true}),i));n[f]=null;s(t,function(e){if(e&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"){var t=n[a];if(t!==null){n[f]=null;n[o]=null;n[a]=null;t(e)}n[l]=e;return}var i=n[o];if(i!==null){n[f]=null;n[o]=null;n[a]=null;i(d(undefined,true))}n[u]=true});t.on("readable",p.bind(null,n));return n};b.exports=n}).call(this)}).call(this,v("_process"))},{"./end-of-stream":71,_process:57}],69:[function(e,t,i){"use strict";function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);if(e)r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});i.push.apply(i,r)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};if(e%2){r(Object(i),true).forEach(function(e){s(t,e,i[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}else{r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}}return t}function s(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:true,configurable:true,writable:true})}else{e[t]=i}return e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function l(e,t,i){if(t)a(e.prototype,t);if(i)a(e,i);return e}var u=e("buffer"),f=u.Buffer;var c=e("util"),h=c.inspect;var d=h&&h.custom||"inspect";function p(e,t,i){f.prototype.copy.call(e,t,i)}t.exports=function(){function e(){o(this,e);this.head=null;this.tail=null;this.length=0}l(e,[{key:"push",value:function e(t){var i={data:t,next:null};if(this.length>0)this.tail.next=i;else this.head=i;this.tail=i;++this.length}},{key:"unshift",value:function e(t){var i={data:t,next:this.head};if(this.length===0)this.tail=i;this.head=i;++this.length}},{key:"shift",value:function e(){if(this.length===0)return;var t=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return t}},{key:"clear",value:function e(){this.head=this.tail=null;this.length=0}},{key:"join",value:function e(t){if(this.length===0)return"";var i=this.head;var r=""+i.data;while(i=i.next){r+=t+i.data}return r}},{key:"concat",value:function e(t){if(this.length===0)return f.alloc(0);var i=f.allocUnsafe(t>>>0);var r=this.head;var n=0;while(r){p(r.data,i,n);n+=r.data.length;r=r.next}return i}},{key:"consume",value:function e(t,i){var r;if(t<this.head.data.length){r=this.head.data.slice(0,t);this.head.data=this.head.data.slice(t)}else if(t===this.head.data.length){r=this.shift()}else{r=i?this._getString(t):this._getBuffer(t)}return r}},{key:"first",value:function e(){return this.head.data}},{key:"_getString",value:function e(t){var i=this.head;var r=1;var n=i.data;t-=n.length;while(i=i.next){var s=i.data;var o=t>s.length?s.length:t;if(o===s.length)n+=s;else n+=s.slice(0,t);t-=o;if(t===0){if(o===s.length){++r;if(i.next)this.head=i.next;else this.head=this.tail=null}else{this.head=i;i.data=s.slice(o)}break}++r}this.length-=r;return n}},{key:"_getBuffer",value:function e(t){var i=f.allocUnsafe(t);var r=this.head;var n=1;r.data.copy(i);t-=r.data.length;while(r=r.next){var s=r.data;var o=t>s.length?s.length:t;s.copy(i,i.length-t,0,o);t-=o;if(t===0){if(o===s.length){++n;if(r.next)this.head=r.next;else this.head=this.tail=null}else{this.head=r;r.data=s.slice(o)}break}++n}this.length-=n;return i}},{key:d,value:function e(t,i){return h(this,n({},i,{depth:0,customInspect:false}))}}]);return e}()},{buffer:17,util:16}],70:[function(e,r,t){(function(l){(function(){"use strict";function e(e,t){var i=this;var r=this._readableState&&this._readableState.destroyed;var n=this._writableState&&this._writableState.destroyed;if(r||n){if(t){t(e)}else if(e){if(!this._writableState){l.nextTick(a,this,e)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;l.nextTick(a,this,e)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(e||null,function(e){if(!t&&e){if(!i._writableState){l.nextTick(s,i,e)}else if(!i._writableState.errorEmitted){i._writableState.errorEmitted=true;l.nextTick(s,i,e)}else{l.nextTick(o,i)}}else if(t){l.nextTick(o,i);t(e)}else{l.nextTick(o,i)}});return this}function s(e,t){a(e,t);o(e)}function o(e){if(e._writableState&&!e._writableState.emitClose)return;if(e._readableState&&!e._readableState.emitClose)return;e.emit("close")}function t(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function a(e,t){e.emit("error",t)}function i(e,t){var i=e._readableState;var r=e._writableState;if(i&&i.autoDestroy||r&&r.autoDestroy)e.destroy(t);else e.emit("error",t)}r.exports={destroy:e,undestroy:t,errorOrDestroy:i}}).call(this)}).call(this,e("_process"))},{_process:57}],71:[function(e,t,i){"use strict";var d=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function p(r){var n=false;return function(){if(n)return;n=true;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}r.apply(this,t)}}function g(){}function m(e){return e.setHeader&&typeof e.abort==="function"}function y(i,e,r){if(typeof e==="function")return y(i,null,e);if(!e)e={};r=p(r||g);var n=e.readable||e.readable!==false&&i.readable;var s=e.writable||e.writable!==false&&i.writable;var t=function e(){if(!i.writable)a()};var o=i._writableState&&i._writableState.finished;var a=function e(){s=false;o=true;if(!n)r.call(i)};var l=i._readableState&&i._readableState.endEmitted;var u=function e(){n=false;l=true;if(!s)r.call(i)};var f=function e(t){r.call(i,t)};var c=function e(){var t;if(n&&!l){if(!i._readableState||!i._readableState.ended)t=new d;return r.call(i,t)}if(s&&!o){if(!i._writableState||!i._writableState.ended)t=new d;return r.call(i,t)}};var h=function e(){i.req.on("finish",a)};if(m(i)){i.on("complete",a);i.on("abort",c);if(i.req)h();else i.on("request",h)}else if(s&&!i._writableState){i.on("end",t);i.on("close",t)}i.on("end",u);i.on("finish",a);if(e.error!==false)i.on("error",f);i.on("close",c);return function(){i.removeListener("complete",a);i.removeListener("abort",c);i.removeListener("request",h);if(i.req)i.req.removeListener("finish",a);i.removeListener("end",t);i.removeListener("close",t);i.removeListener("finish",a);i.removeListener("end",u);i.removeListener("error",f);i.removeListener("close",c)}}t.exports=y},{"../../../errors":62}],72:[function(e,t,i){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],73:[function(o,e,t){"use strict";var a;function l(e){var t=false;return function(){if(t)return;t=true;e.apply(void 0,arguments)}}var i=o("../../../errors").codes,r=i.ERR_MISSING_ARGS,u=i.ERR_STREAM_DESTROYED;function n(e){if(e)throw e}function f(e){return e.setHeader&&typeof e.abort==="function"}function c(t,e,i,r){r=l(r);var n=false;t.on("close",function(){n=true});if(a===undefined)a=o("./end-of-stream");a(t,{readable:e,writable:i},function(e){if(e)return r(e);n=true;r()});var s=false;return function(e){if(n)return;if(s)return;s=true;if(f(t))return t.abort();if(typeof t.destroy==="function")return t.destroy();r(e||new u("pipe"))}}function h(e){e()}function d(e,t){return e.pipe(t)}function p(e){if(!e.length)return n;if(typeof e[e.length-1]!=="function")return n;return e.pop()}function s(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++){n[t]=arguments[t]}var s=p(n);if(Array.isArray(n[0]))n=n[0];if(n.length<2){throw new r("streams")}var o;var a=n.map(function(e,t){var i=t<n.length-1;var r=t>0;return c(e,i,r,function(e){if(!o)o=e;if(e)a.forEach(h);if(i)return;a.forEach(h);s(o)})});return n.reduce(d)}e.exports=s},{"../../../errors":62,"./end-of-stream":71}],74:[function(e,t,i){"use strict";var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function a(e,t,i){return e.highWaterMark!=null?e.highWaterMark:t?e[i]:null}function r(e,t,i,r){var n=a(t,r,i);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=r?i:"highWaterMark";throw new o(s,n)}return Math.floor(n)}return e.objectMode?16:16*1024}t.exports={getHighWaterMark:r}},{"../../../errors":62}],75:[function(e,t,i){t.exports=e("events").EventEmitter},{events:22}],76:[function(e,t,i){i=t.exports=e("./lib/_stream_readable.js");i.Stream=i;i.Readable=i;i.Writable=e("./lib/_stream_writable.js");i.Duplex=e("./lib/_stream_duplex.js");i.Transform=e("./lib/_stream_transform.js");i.PassThrough=e("./lib/_stream_passthrough.js");i.finished=e("./lib/internal/streams/end-of-stream.js");i.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":63,"./lib/_stream_passthrough.js":64,"./lib/_stream_readable.js":65,"./lib/_stream_transform.js":66,"./lib/_stream_writable.js":67,"./lib/internal/streams/end-of-stream.js":71,"./lib/internal/streams/pipeline.js":73}],77:[function(e,t,i){"use strict";function r(e,t,i){var r=this;this._callback=e;this._args=i;this._interval=setInterval(e,t,this._args);this.reschedule=function(e){if(!e)e=r._interval;if(r._interval)clearInterval(r._interval);r._interval=setInterval(r._callback,e,r._args)};this.clear=function(){if(r._interval){clearInterval(r._interval);r._interval=undefined}};this.destroy=function(){if(r._interval){clearInterval(r._interval)}r._callback=undefined;r._interval=undefined;r._args=undefined}}function n(){if(typeof arguments[0]!=="function")throw new Error("callback needed");if(typeof arguments[1]!=="number")throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++){e[t]=arguments[t+2]}}return new r(arguments[0],arguments[1],e)}t.exports=n},{}],78:[function(e,t,i){"use strict";t.exports=e("./index.js")()},{"./index.js":79}],79:[function(e,r,t){(function(i){(function(){"use strict";r.exports=e;function f(e){if(e instanceof i){return i.from(e)}return new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function e(e){e=e||{};if(e.circles)return t(e);return e.proto?o:s;function n(e,t){var i=Object.keys(e);var r=new Array(i.length);for(var n=0;n<i.length;n++){var s=i[n];var o=e[s];if(typeof o!=="object"||o===null){r[s]=o}else if(o instanceof Date){r[s]=new Date(o)}else if(ArrayBuffer.isView(o)){r[s]=f(o)}else{r[s]=t(o)}}return r}function s(e){if(typeof e!=="object"||e===null)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return n(e,s);if(e instanceof Map)return new Map(n(Array.from(e),s));if(e instanceof Set)return new Set(n(Array.from(e),s));var t={};for(var i in e){if(Object.hasOwnProperty.call(e,i)===false)continue;var r=e[i];if(typeof r!=="object"||r===null){t[i]=r}else if(r instanceof Date){t[i]=new Date(r)}else if(r instanceof Map){t[i]=new Map(n(Array.from(r),s))}else if(r instanceof Set){t[i]=new Set(n(Array.from(r),s))}else if(ArrayBuffer.isView(r)){t[i]=f(r)}else{t[i]=s(r)}}return t}function o(e){if(typeof e!=="object"||e===null)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return n(e,o);if(e instanceof Map)return new Map(n(Array.from(e),o));if(e instanceof Set)return new Set(n(Array.from(e),o));var t={};for(var i in e){var r=e[i];if(typeof r!=="object"||r===null){t[i]=r}else if(r instanceof Date){t[i]=new Date(r)}else if(r instanceof Map){t[i]=new Map(n(Array.from(r),o))}else if(r instanceof Set){t[i]=new Set(n(Array.from(r),o))}else if(ArrayBuffer.isView(r)){t[i]=f(r)}else{t[i]=o(r)}}return t}}function t(e){var l=[];var u=[];return e.proto?a:o;function s(e,t){var i=Object.keys(e);var r=new Array(i.length);for(var n=0;n<i.length;n++){var s=i[n];var o=e[s];if(typeof o!=="object"||o===null){r[s]=o}else if(o instanceof Date){r[s]=new Date(o)}else if(ArrayBuffer.isView(o)){r[s]=f(o)}else{var a=l.indexOf(o);if(a!==-1){r[s]=u[a]}else{r[s]=t(o)}}}return r}function o(e){if(typeof e!=="object"||e===null)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return s(e,o);if(e instanceof Map)return new Map(s(Array.from(e),o));if(e instanceof Set)return new Set(s(Array.from(e),o));var t={};l.push(e);u.push(t);for(var i in e){if(Object.hasOwnProperty.call(e,i)===false)continue;var r=e[i];if(typeof r!=="object"||r===null){t[i]=r}else if(r instanceof Date){t[i]=new Date(r)}else if(r instanceof Map){t[i]=new Map(s(Array.from(r),o))}else if(r instanceof Set){t[i]=new Set(s(Array.from(r),o))}else if(ArrayBuffer.isView(r)){t[i]=f(r)}else{var n=l.indexOf(r);if(n!==-1){t[i]=u[n]}else{t[i]=o(r)}}}l.pop();u.pop();return t}function a(e){if(typeof e!=="object"||e===null)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return s(e,a);if(e instanceof Map)return new Map(s(Array.from(e),a));if(e instanceof Set)return new Set(s(Array.from(e),a));var t={};l.push(e);u.push(t);for(var i in e){var r=e[i];if(typeof r!=="object"||r===null){t[i]=r}else if(r instanceof Date){t[i]=new Date(r)}else if(r instanceof Map){t[i]=new Map(s(Array.from(r),a))}else if(r instanceof Set){t[i]=new Set(s(Array.from(r),a))}else if(ArrayBuffer.isView(r)){t[i]=f(r)}else{var n=l.indexOf(r);if(n!==-1){t[i]=u[n]}else{t[i]=a(r)}}}l.pop();u.pop();return t}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:17}],80:[function(e,t,i){var r=e("buffer");var n=r.Buffer;function s(e,t){for(var i in e){t[i]=e[i]}}if(n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow){t.exports=r}else{s(r,i);i.Buffer=o}function o(e,t,i){return n(e,t,i)}o.prototype=Object.create(n.prototype);s(n,o);o.from=function(e,t,i){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return n(e,t,i)};o.alloc=function(e,t,i){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var r=n(e);if(t!==undefined){if(typeof i==="string"){r.fill(t,i)}else{r.fill(t)}}else{r.fill(0)}return r};o.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return n(e)};o.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return r.SlowBuffer(e)}},{buffer:17}],81:[function(e,t,i){t.exports=r;function r(e){var t=e._readableState;if(!t)return null;return t.objectMode||typeof e._duplexState==="number"?e.read():e.read(n(t))}function n(e){if(e.buffer.length){if(e.buffer.head){return e.buffer.head.data.length}return e.buffer[0].length}return e.length}},{}],82:[function(e,t,i){"use strict";var r=e("safe-buffer").Buffer;var n=r.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function s(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true}}}function o(e){var t=s(e);if(typeof t!=="string"&&(r.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}i.StringDecoder=a;function a(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=p;this.end=g;t=4;break;case"utf8":this.fillLast=c;t=4;break;case"base64":this.text=m;this.end=y;t=3;break;default:this.write=v;this.end=b;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=r.allocUnsafe(t)}a.prototype.write=function(e){if(e.length===0)return"";var t;var i;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";i=this.lastNeed;this.lastNeed=0}else{i=0}if(i<e.length)return t?t+this.text(e,i):this.text(e,i);return t||""};a.prototype.end=d;a.prototype.text=h;a.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function l(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return e>>6===2?-1:-2}function u(e,t,i){var r=t.length-1;if(r<i)return 0;var n=l(t[r]);if(n>=0){if(n>0)e.lastNeed=n-1;return n}if(--r<i||n===-2)return 0;n=l(t[r]);if(n>=0){if(n>0)e.lastNeed=n-2;return n}if(--r<i||n===-2)return 0;n=l(t[r]);if(n>=0){if(n>0){if(n===2)n=0;else e.lastNeed=n-3}return n}return 0}function f(e,t,i){if((t[0]&192)!==128){e.lastNeed=0;return"�"}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return"�"}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return"�"}}}}function c(e){var t=this.lastTotal-this.lastNeed;var i=f(this,e,t);if(i!==undefined)return i;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function h(e,t){var i=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var r=e.length-(i-this.lastNeed);e.copy(this.lastChar,0,r);return e.toString("utf8",t,r)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"�";return t}function p(e,t){if((e.length-t)%2===0){var i=e.toString("utf16le",t);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return i.slice(0,-1)}}return i}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1)}function g(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function m(e,t){var i=(e.length-t)%3;if(i===0)return e.toString("base64",t);this.lastNeed=3-i;this.lastTotal=3;if(i===1){this.lastChar[0]=e[e.length-1]}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString("base64",t,e.length-i)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t}function v(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}},{"safe-buffer":80}],83:[function(e,t,i){"use strict";var R=e("punycode");var N=e("./util");i.parse=o;i.resolve=l;i.resolveObject=u;i.format=a;i.Url=A;function A(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var L=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,F=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],s=["{","}","|","\\","^","`"].concat(n),j=["'"].concat(s),D=["%","/","?",";","#"].concat(j),q=["/","?","#"],U=255,z=/^[+a-z0-9A-Z_-]{0,63}$/,V=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,W={javascript:true,"javascript:":true},H={javascript:true,"javascript:":true},$={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},Q=e("querystring");function o(e,t,i){if(e&&N.isObject(e)&&e instanceof A)return e;var r=new A;r.parse(e,t,i);return r}A.prototype.parse=function(e,t,i){if(!N.isString(e)){throw new TypeError("Parameter 'url' must be a string, not "+typeof e)}var r=e.indexOf("?"),n=r!==-1&&r<e.indexOf("#")?"?":"#",s=e.split(n),o=/\\/g;s[0]=s[0].replace(o,"/");e=s.join(n);var a=e;a=a.trim();if(!i&&e.split("#").length===1){var l=F.exec(a);if(l){this.path=a;this.href=a;this.pathname=l[1];if(l[2]){this.search=l[2];if(t){this.query=Q.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(t){this.search="";this.query={}}return this}}var u=L.exec(a);if(u){u=u[0];var f=u.toLowerCase();this.protocol=f;a=a.substr(u.length)}if(i||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=a.substr(0,2)==="//";if(c&&!(u&&H[u])){a=a.substr(2);this.slashes=true}}if(!H[u]&&(c||u&&!$[u])){var h=-1;for(var d=0;d<q.length;d++){var p=a.indexOf(q[d]);if(p!==-1&&(h===-1||p<h))h=p}var g,m;if(h===-1){m=a.lastIndexOf("@")}else{m=a.lastIndexOf("@",h)}if(m!==-1){g=a.slice(0,m);a=a.slice(m+1);this.auth=decodeURIComponent(g)}h=-1;for(var d=0;d<D.length;d++){var p=a.indexOf(D[d]);if(p!==-1&&(h===-1||p<h))h=p}if(h===-1)h=a.length;this.host=a.slice(0,h);a=a.slice(h);this.parseHost();this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){var v=this.hostname.split(/\./);for(var d=0,b=v.length;d<b;d++){var w=v[d];if(!w)continue;if(!w.match(z)){var _="";for(var x=0,k=w.length;x<k;x++){if(w.charCodeAt(x)>127){_+="x"}else{_+=w[x]}}if(!_.match(z)){var S=v.slice(0,d);var E=v.slice(d+1);var C=w.match(V);if(C){S.push(C[1]);E.unshift(C[2])}if(E.length){a="/"+E.join(".")+a}this.hostname=S.join(".");break}}}}if(this.hostname.length>U){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!y){this.hostname=R.toASCII(this.hostname)}var A=this.port?":"+this.port:"";var I=this.hostname||"";this.host=I+A;this.href+=this.host;if(y){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(a[0]!=="/"){a="/"+a}}}if(!W[f]){for(var d=0,b=j.length;d<b;d++){var T=j[d];if(a.indexOf(T)===-1)continue;var B=encodeURIComponent(T);if(B===T){B=escape(T)}a=a.split(T).join(B)}}var P=a.indexOf("#");if(P!==-1){this.hash=a.substr(P);a=a.slice(0,P)}var O=a.indexOf("?");if(O!==-1){this.search=a.substr(O);this.query=a.substr(O+1);if(t){this.query=Q.parse(this.query)}a=a.slice(0,O)}else if(t){this.search="";this.query={}}if(a)this.pathname=a;if($[f]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var A=this.pathname||"";var M=this.search||"";this.path=A+M}this.href=this.format();return this};function a(e){if(N.isString(e))e=o(e);if(!(e instanceof A))return A.prototype.format.call(e);return e.format()}A.prototype.format=function(){var e=this.auth||"";if(e){e=encodeURIComponent(e);e=e.replace(/%3A/i,":");e+="@"}var t=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=false,s="";if(this.host){n=e+this.host}else if(this.hostname){n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){n+=":"+this.port}}if(this.query&&N.isObject(this.query)&&Object.keys(this.query).length){s=Q.stringify(this.query)}var o=this.search||s&&"?"+s||"";if(t&&t.substr(-1)!==":")t+=":";if(this.slashes||(!t||$[t])&&n!==false){n="//"+(n||"");if(i&&i.charAt(0)!=="/")i="/"+i}else if(!n){n=""}if(r&&r.charAt(0)!=="#")r="#"+r;if(o&&o.charAt(0)!=="?")o="?"+o;i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)});o=o.replace("#","%23");return t+n+i+o+r};function l(e,t){return o(e,false,true).resolve(t)}A.prototype.resolve=function(e){return this.resolveObject(o(e,false,true)).format()};function u(e,t){if(!e)return t;return o(e,false,true).resolveObject(t)}A.prototype.resolveObject=function(e){if(N.isString(e)){var t=new A;t.parse(e,false,true);e=t}var i=new A;var r=Object.keys(this);for(var n=0;n<r.length;n++){var s=r[n];i[s]=this[s]}i.hash=e.hash;if(e.href===""){i.href=i.format();return i}if(e.slashes&&!e.protocol){var o=Object.keys(e);for(var a=0;a<o.length;a++){var l=o[a];if(l!=="protocol")i[l]=e[l]}if($[i.protocol]&&i.hostname&&!i.pathname){i.path=i.pathname="/"}i.href=i.format();return i}if(e.protocol&&e.protocol!==i.protocol){if(!$[e.protocol]){var u=Object.keys(e);for(var f=0;f<u.length;f++){var c=u[f];i[c]=e[c]}i.href=i.format();return i}i.protocol=e.protocol;if(!e.host&&!H[e.protocol]){var h=(e.pathname||"").split("/");while(h.length&&!(e.host=h.shift()));if(!e.host)e.host="";if(!e.hostname)e.hostname="";if(h[0]!=="")h.unshift("");if(h.length<2)h.unshift("");i.pathname=h.join("/")}else{i.pathname=e.pathname}i.search=e.search;i.query=e.query;i.host=e.host||"";i.auth=e.auth;i.hostname=e.hostname||e.host;i.port=e.port;if(i.pathname||i.search){var d=i.pathname||"";var p=i.search||"";i.path=d+p}i.slashes=i.slashes||e.slashes;i.href=i.format();return i}var g=i.pathname&&i.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",y=m||g||i.host&&e.pathname,v=y,b=i.pathname&&i.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],w=i.protocol&&!$[i.protocol];if(w){i.hostname="";i.port=null;if(i.host){if(b[0]==="")b[0]=i.host;else b.unshift(i.host)}i.host="";if(e.protocol){e.hostname=null;e.port=null;if(e.host){if(h[0]==="")h[0]=e.host;else h.unshift(e.host)}e.host=null}y=y&&(h[0]===""||b[0]==="")}if(m){i.host=e.host||e.host===""?e.host:i.host;i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname;i.search=e.search;i.query=e.query;b=h}else if(h.length){if(!b)b=[];b.pop();b=b.concat(h);i.search=e.search;i.query=e.query}else if(!N.isNullOrUndefined(e.search)){if(w){i.hostname=i.host=b.shift();var _=i.host&&i.host.indexOf("@")>0?i.host.split("@"):false;if(_){i.auth=_.shift();i.host=i.hostname=_.shift()}}i.search=e.search;i.query=e.query;if(!N.isNull(i.pathname)||!N.isNull(i.search)){i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")}i.href=i.format();return i}if(!b.length){i.pathname=null;if(i.search){i.path="/"+i.search}else{i.path=null}i.href=i.format();return i}var x=b.slice(-1)[0];var k=(i.host||e.host||b.length>1)&&(x==="."||x==="..")||x==="";var S=0;for(var E=b.length;E>=0;E--){x=b[E];if(x==="."){b.splice(E,1)}else if(x===".."){b.splice(E,1);S++}else if(S){b.splice(E,1);S--}}if(!y&&!v){for(;S--;S){b.unshift("..")}}if(y&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")){b.unshift("")}if(k&&b.join("/").substr(-1)!=="/"){b.push("")}var C=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(w){i.hostname=i.host=C?"":b.length?b.shift():"";var _=i.host&&i.host.indexOf("@")>0?i.host.split("@"):false;if(_){i.auth=_.shift();i.host=i.hostname=_.shift()}}y=y||i.host&&b.length;if(y&&!C){b.unshift("")}if(!b.length){i.pathname=null;i.path=null}else{i.pathname=b.join("/")}if(!N.isNull(i.pathname)||!N.isNull(i.search)){i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")}i.auth=e.auth||i.auth;i.slashes=i.slashes||e.slashes;i.href=i.format();return i};A.prototype.parseHost=function(){var e=this.host;var t=r.exec(e);if(t){t=t[0];if(t!==":"){this.port=t.substr(1)}e=e.substr(0,e.length-t.length)}if(e)this.hostname=e}},{"./util":84,punycode:58,querystring:61}],84:[function(e,t,i){"use strict";t.exports={isString:function(e){return typeof e==="string"},isObject:function(e){return typeof e==="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}}},{}],85:[function(e,t,i){(function(i){(function(){t.exports=e;function e(e,t){if(n("noDeprecation")){return e}var i=false;function r(){if(!i){if(n("throwDeprecation")){throw new Error(t)}else if(n("traceDeprecation")){console.trace(t)}else{console.warn(t)}i=true}return e.apply(this,arguments)}return r}function n(e){try{if(!i.localStorage)return false}catch(e){return false}var t=i.localStorage[e];if(null==t)return false;return String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],86:[function(e,t,i){t.exports=r;function r(n,e){if(n&&e)return r(n)(e);if(typeof n!=="function")throw new TypeError("need wrapper function");Object.keys(n).forEach(function(e){t[e]=n[e]});return t;function t(){var e=new Array(arguments.length);for(var t=0;t<e.length;t++){e[t]=arguments[t]}var i=n.apply(this,e);var r=e[e.length-1];if(typeof i==="function"&&i!==r){Object.keys(r).forEach(function(e){i[e]=r[e]})}return i}}},{}],87:[function(e,t,i){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native "+"WebSocket object")}},{}],88:[function(e,t,i){t.exports=r;var n=Object.prototype.hasOwnProperty;function r(){var e={};for(var t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(n.call(i,r)){e[r]=i[r]}}}return e}},{}],89:[function(e,t,i){"use strict";t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next){yield e.value}}}},{}],90:[function(e,t,i){"use strict";t.exports=s;s.Node=a;s.create=s;function s(e){var t=this;if(!(t instanceof s)){t=new s}t.tail=null;t.head=null;t.length=0;if(e&&typeof e.forEach==="function"){e.forEach(function(e){t.push(e)})}else if(arguments.length>0){for(var i=0,r=arguments.length;i<r;i++){t.push(arguments[i])}}return t}s.prototype.removeNode=function(e){if(e.list!==this){throw new Error("removing node which does not belong to this list")}var t=e.next;var i=e.prev;if(t){t.prev=i}if(i){i.next=t}if(e===this.head){this.head=t}if(e===this.tail){this.tail=i}e.list.length--;e.next=null;e.prev=null;e.list=null;return t};s.prototype.unshiftNode=function(e){if(e===this.head){return}if(e.list){e.list.removeNode(e)}var t=this.head;e.list=this;e.next=t;if(t){t.prev=e}this.head=e;if(!this.tail){this.tail=e}this.length++};s.prototype.pushNode=function(e){if(e===this.tail){return}if(e.list){e.list.removeNode(e)}var t=this.tail;e.list=this;e.prev=t;if(t){t.next=e}this.tail=e;if(!this.head){this.head=e}this.length++};s.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){r(this,arguments[e])}return this.length};s.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){n(this,arguments[e])}return this.length};s.prototype.pop=function(){if(!this.tail){return undefined}var e=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return e};s.prototype.shift=function(){if(!this.head){return undefined}var e=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return e};s.prototype.forEach=function(e,t){t=t||this;for(var i=this.head,r=0;i!==null;r++){e.call(t,i.value,r,this);i=i.next}};s.prototype.forEachReverse=function(e,t){t=t||this;for(var i=this.tail,r=this.length-1;i!==null;r--){e.call(t,i.value,r,this);i=i.prev}};s.prototype.get=function(e){for(var t=0,i=this.head;i!==null&&t<e;t++){i=i.next}if(t===e&&i!==null){return i.value}};s.prototype.getReverse=function(e){for(var t=0,i=this.tail;i!==null&&t<e;t++){i=i.prev}if(t===e&&i!==null){return i.value}};s.prototype.map=function(e,t){t=t||this;var i=new s;for(var r=this.head;r!==null;){i.push(e.call(t,r.value,this));r=r.next}return i};s.prototype.mapReverse=function(e,t){t=t||this;var i=new s;for(var r=this.tail;r!==null;){i.push(e.call(t,r.value,this));r=r.prev}return i};s.prototype.reduce=function(e,t){var i;var r=this.head;if(arguments.length>1){i=t}else if(this.head){r=this.head.next;i=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var n=0;r!==null;n++){i=e(i,r.value,n);r=r.next}return i};s.prototype.reduceReverse=function(e,t){var i;var r=this.tail;if(arguments.length>1){i=t}else if(this.tail){r=this.tail.prev;i=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var n=this.length-1;r!==null;n--){i=e(i,r.value,n);r=r.prev}return i};s.prototype.toArray=function(){var e=new Array(this.length);for(var t=0,i=this.head;i!==null;t++){e[t]=i.value;i=i.next}return e};s.prototype.toArrayReverse=function(){var e=new Array(this.length);for(var t=0,i=this.tail;i!==null;t++){e[t]=i.value;i=i.prev}return e};s.prototype.slice=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var i=new s;if(t<e||t<0){return i}if(e<0){e=0}if(t>this.length){t=this.length}for(var r=0,n=this.head;n!==null&&r<e;r++){n=n.next}for(;n!==null&&r<t;r++,n=n.next){i.push(n.value)}return i};s.prototype.sliceReverse=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var i=new s;if(t<e||t<0){return i}if(e<0){e=0}if(t>this.length){t=this.length}for(var r=this.length,n=this.tail;n!==null&&r>t;r--){n=n.prev}for(;n!==null&&r>e;r--,n=n.prev){i.push(n.value)}return i};s.prototype.splice=function(e,t,...i){if(e>this.length){e=this.length-1}if(e<0){e=this.length+e}for(var r=0,n=this.head;n!==null&&r<e;r++){n=n.next}var s=[];for(var r=0;n&&r<t;r++){s.push(n.value);n=this.removeNode(n)}if(n===null){n=this.tail}if(n!==this.head&&n!==this.tail){n=n.prev}for(var r=0;r<i.length;r++){n=o(this,n,i[r])}return s};s.prototype.reverse=function(){var e=this.head;var t=this.tail;for(var i=e;i!==null;i=i.prev){var r=i.prev;i.prev=i.next;i.next=r}this.head=t;this.tail=e;return this};function o(e,t,i){var r=t===e.head?new a(i,null,t,e):new a(i,t,t.next,e);if(r.next===null){e.tail=r}if(r.prev===null){e.head=r}e.length++;return r}function r(e,t){e.tail=new a(t,e.tail,null,e);if(!e.head){e.head=e.tail}e.length++}function n(e,t){e.head=new a(t,null,e.head,e);if(!e.tail){e.tail=e.head}e.length++}function a(e,t,i,r){if(!(this instanceof a)){return new a(e,t,i,r)}this.list=r;this.value=e;if(t){t.next=this;this.prev=t}else{this.prev=null}if(i){i.prev=this;this.next=i}else{this.next=null}}try{e("./iterator.js")(s)}catch(e){}},{"./iterator.js":89}]},{},[12])(12)});const TICKINTERVAL=120;class DashClient{constructor(e){let t=this;this.dashid=e.dashid;this.dashtoken=e.dashtoken;this.pubsubQueue=[];this.pubsubTimer=0;this.option=e;this.shadowdata={};this.host=e.mqtthost;this.mqttoptions={keepalive:30,clientId:`${t.dashid}-${Date.now()}`,username:t.dashid,password:t.dashtoken,protocolId:"MQTT",protocolVersion:4,clean:true,reconnectPeriod:4e3,connectTimeout:30*1e3,rejectUnauthorized:false};this.eventhandler={}}setCredential(e){if(e.host)this.host=e.host;if(e.clientId)this.mqttoptions.clientId=e.clientId;if(e.username)this.mqttoptions.username=e.username;if(e.password)this.mqttoptions.password=e.password}finalize(){if(this.client){this.client.end();delete this.client}}setEventHandler(e){let r=this;e.on("message",function(e,t,i){if(e=="@private/shadow/data/get/response"){let e;try{e=JSON.parse(t.toString())}catch(e){}r.shadowdata[e.deviceid]=e.data}r.emit("message",e,t)});e.on("connect",function(){r.emit("connected")});e.on("close",function(){r.emit("disconnected")})}tick(){let t=this;if(t.pubsubTimer==0){t.pubsubTimer=setInterval(()=>{let e=t.pubsubQueue[0];if(e){if(e.op=="pub"){if(t.client){t.client.publish(e.topic,e.payload)}else{console.log("whoop -------");console.log(e.topic)}t.pubsubQueue.shift()}else if(e.op=="sub"){if(t.client){t.client.subscribe(e.topic);t.pubsubQueue.shift()}}}else{clearInterval(t.pubsubTimer);t.pubsubTimer=0}},TICKINTERVAL)}}publish(e,t){this.pubsubQueue.push({op:"pub",topic:e,payload:t});this.tick()}subscribe(e){this.pubsubQueue.push({op:"sub",topic:e});this.tick()}connect(){let e=this;if(this.client){this.client.end();delete this.client}this.client=mqtt.connect(e.host,e.mqttoptions);this.setEventHandler(e.client)}on(t,i){if(!this.eventhandler[t]){this.eventhandler[t]=[]}for(let e of this.eventhandler[t]){if(e===i)return}this.eventhandler[t].push(i)}emit(t,i,r,n,s){if(this.eventhandler[t]){for(let e of this.eventhandler[t]){if(typeof e=="function"){e(i,r,n,s)}}}}removeListener(e,t){if(!this.eventhandler[e]){return}let i=this.eventhandler[e];for(let e in i){if(i[e]===t){i.splice(e,1);return}}}getShadowAttribute(t){let i=this;if(!i.shadowdata||!i.shadowdata[t]){return[]}else{let e;e=allObjectPath(i.shadowdata[t]);console.log(e);return e}}getFeedAttribute(e){let r=this;let n=JSON.stringify({metrics:[{name:e}]});console.log(r.option.dshost);return new Promise((i,e)=>{let t;if(r.dashtoken.startsWith("eyJ")){t=`Bearer ${r.dashtoken}`}else{t=`Dash ${r.dashid}:${r.dashtoken}`}$.ajax({url:`${r.option.dshost}/feed/api/v1/datapoints/query/tags`,type:"post",data:n,headers:{Authorization:t},contentType:"application/json",success:function(e){let t=e.queries[0].results[0].tags.attr;if(t){i(t)}else{i(null)}}})})}}if(typeof localStore==="undefined"){localStore={}}(function(){freeboard.loadDatasourcePlugin({type_name:"localstore_datasource",display_name:"LocalStore",external_scripts:[""],settings:[{name:"namespace",display_name:"Namespace",type:"text",description:"",required:false}],newInstance:function(e,t,i){t(new r(e,i))}});var r=function(e,i){let r=this;let t=e;let n=`PIEDASH:${t.namespace}:LOCALVAR`;r.storage={};try{let t=window.localStorage.getItem(n);if(t&&typeof(t=="string")){let e=JSON.parse(t);if(e&&typeof e=="object"){r.storage=e}i(r.storage)}else{r.storage={}}}catch(e){console.log(e)}r.onSettingsChanged=function(e){t=e;n=`PIEDASH:${t.namespace}:LOCALVAR`};r.updateNow=function(){};r.onDispose=function(){};localStore.set=function(e,t){r.storage[e]=t;window.localStorage.setItem(n,JSON.stringify(r.storage));i(r.storage)};localStore.reset=function(){r.storage={};window.localStorage.setItem(n,"{}");i(r.storage)};localStore.get=function(e){return r.storage[e]}}})();const PRESTART_DURATION=1e3;(function(){freeboard.loadDatasourcePlugin({type_name:"piedash_datasource",display_name:"PieDash",external_scripts:[""],settings:[{name:"dashid",display_name:"Dash ID",type:"text",description:"",required:true},{name:"dashtoken",display_name:"Dash Token",type:"text",description:"",required:true},{name:"platform",display_name:"Platform",type:"text",description:"",required:true}],newInstance:function(e,t,i,r){t(new myDatasourcePlugin(e,i,r))}});myDatasourcePlugin=function(a,l,e){let f=this;let u=a;this.datasourcelist=[];this.resolver={group:{}};this.sublist=[];this.publist=[];this.subtimer=0;this.pubtimer=0;this.cache={};this.store={};this.mainpiets={};this.dsready=false;this.ready=false;this.id_to_alias=function(t){for(let e of this.datasourcelist.device){if(e.id==t){if(e.alias)return e.alias;else return e.id}}return null};this.alias_to_id=function(t){if(f.datasourcelist&&f.datasourcelist.device){for(let e of f.datasourcelist.device){if(e.alias==t){return e.id}}}return null};this.name=u.name;this.dashclient=new DashClient({mqtthost:getPlatformMQTTURI(a.platform),dshost:getPlatformDSURI(a.platform),gqlhost:getPlatformGraphQLURI(a.platform),dashid:u.dashid,dashtoken:u.dashtoken});l(f.store);dashclients[f.name]=this.dashclient;this.onSettingsChanged=function(e){};this.updateNow=function(){};this.onDispose=function(){console.log("Disposing dashclient...");if(f.dashclient){f.dashclient.finalize();delete f.dashclient}};async function c({deviceid:e,startts:t,endts:i,filter:r}){let n=r||[];const s=`${getPlatformDSURI(a.platform)}/feed/api/v1/datapoints/query`;let o;if(n){o={attr:n}}else{o=undefined}return fetch(s,{method:"POST",cache:"no-cache",headers:{"Content-Type":`application/json`,Authorization:`Dash ${u.dashid}:${u.dashtoken}`},body:JSON.stringify({start_absolute:t,end_absolute:i,metrics:[{name:e,group_by:[{name:"tag",tags:["attr"]}],tags:o,aggregators:[{name:"avg",sampling:{value:"1",unit:"seconds"}}]}]})}).catch(e=>{console.log(e)})}function t(i){let r=[];for(let t in i){let e=[];for(p of i[t].values){e.push({x:p[0],y:Number(p[1])})}try{if(i[t]&&i[t].tags&&i[t].tags.attr){r.push({data:e,name:i[t].tags.attr[0]})}}catch(e){console.log(e)}}return r}function h(i){let r={};for(let t in i){let e={};for(p of i[t].values){e[String(p[0])]=Number(p[1])}try{if(i[t]&&i[t].tags&&i[t].tags.attr){r[i[t].tags.attr[0]]=e}}catch(e){console.log(e)}}return r}function d(r){let n=[];for(let i in r){let e=[];let t=Object.keys(r[i]).sort();for(key of t){e.push({x:Number(key),y:Number(r[i][key])})}n.push({data:e,name:i})}return n}function g(i,r){for(let t in r){if(i[t]==undefined)i[t]={...r[t]};else{for(let e in r[t]){i[t][e]=r[t][e]}}}delete r}function r({deviceid:e,groupid:t}){if(e&&t){if(!f.resolver.group[t])f.resolver.group[t]=[];f.resolver.group[t].push(e)}}this.fetchFeedData=async function({deviceid:n,startts:t,endts:i,filter:s}){let o=this;return new Promise((r,e)=>{c({deviceid:n,startts:t,endts:i,filter:s}).then(e=>e.json()).then(i=>{if(i&&i.queries&&i.queries[0]){let e=h(i.queries[0].results);if(!o.mainpiets)o.mainpiets={};if(!o.mainpiets[n])o.mainpiets[n]={};g(o.mainpiets[n],e);let t=d(o.mainpiets[n]);r(t)}else{r({})}})})};function m(t,i){if(t==null||t==undefined){t=i;return false}if(i==null||i==undefined){if(t==null||t==undefined)return false;else{t=null;return true}}let r=false;for(let e of i){if(t.indexOf(e)<0){t.push(e);r=true}}return r}this.refreshOutdatedFeedData=async function(){if(f.ready){for(let i in f.cache){let t=f.cache[i];if(t.outdated){let e=await f.fetchFeedData({deviceid:f.alias_to_id(i),startts:t.startts,endts:t.endts,filter:t.filter});f.cache[i].outdated=false;f.store[i].feed=e;l(f.store)}}}else{}};this.requestFeedData=async function({alias:e,startts:t,endts:i,filter:r}){let n=f.alias_to_id(e);if(!n)return;if(f.cache[e]==undefined){f.cache[e]={startts:Date.now(),endts:0,filter:[],outdated:true}}let s,o;let a=f.cache[e].startts;let l=f.cache[e].endts;let u=m(f.cache[e].filter,r);if(u||!f.ready){f.cache[e].startts=Math.min(t,a);f.cache[e].endts=Math.max(i,l);f.cache[e].outdated=true;f.refreshOutdatedFeedData()}else{if(t<a){s=t;if(i<l){o=a}else{o=i}}else{o=i;s=l}if(t<a||l<i){if(n){f.cache[e].startts=s;f.cache[e].endts=o;f.cache[e].outdated=true;f.refreshOutdatedFeedData()}}}};emitter.on("DASH_READY",function(){console.log("Dash Ready");f.refreshOutdatedFeedData()});emitter.on("FEED_DATA_RANGE_CONFIG",async function(e){let t=e.alias;let i=dayjs().subtract(e.since_duration,e.since_unit).unix()*1e3;let r=Date.now();let n=e.filter;await f.requestFeedData({alias:t,startts:i,endts:r,filter:n});l(f.store)});emitter.on("DASHTOKEN_UPDATED",async function(e){console.log("dashtoken updated >>>");f.dashclient.finalize();f.dashclient.setCredential({host:e.mqtthost,clientId:`${e.dashid}-${Date.now()}`,username:e.dashid,password:e.dashtoken});f.dashclient.connect()});this.dashclient.on("message",async(o,a)=>{if(o=="@private/dash/datasource/get/response"){this.dsready=true;console.log("datasource mapping table ready..");let e=JSON.parse(a);let r={};this.datasourcelist=e;for(let i of e.device){let e=i.id;let t=this.id_to_alias(i.id);initDeviceFunction({id:i.id,alias:t});if(f.store[t]!=undefined){if(r[t]==undefined)r[t]=2;else r[t]++;t=t+`(${r[t]})`}f.store[t]={status:null,shadow:{},feed:[],msg:{},id:e};if(i.allow.feed_read===true||i.allow.feed_read=="#"){this.dashclient.subscribe(`@dash/feed/data/updated/${e}`)}this.dashclient.publish(`@dash/device/status/get/${e}`);if(i.allow.msg_sub===true||i.allow.msg_sub==="#"){this.dashclient.subscribe(`@dash/device/status/changed/${e}`);this.dashclient.subscribe(`@dash/msg/device/${e}/#`)}if(i.allow.shadow_read===true||i.allow.shadow_read=="#"){this.dashclient.subscribe(`@dash/shadow/data/updated/${e}`);this.dashclient.publish(`@dash/shadow/data/get/${e}`)}}f.store=Object.keys(f.store).sort().reduce((e,t)=>{e[t]=f.store[t];return e},{});l(f.store);emitter.emit("DASH_RESOURCE_LOADED");freeboard.emit("DATASOURCE_INITIALIZED");freeboard.DATASOURCE_INITIALIZED=true}else if(o.startsWith(`@shadow/data/updated/`)){let e=JSON.parse(a);let t=this.id_to_alias(e.deviceid);if(!this.store[t]){this.store[t]={status:null,shadow:{},feed:[],msg:{},id:deviceid}}this.store[t]["shadow"]=deepMerge(this.store[t]["shadow"],e.data);let i={};i[t]={};i[t]["shadow"]=e.data;l(f.store,i)}else if(o.startsWith(`@device/status/changed/`)){let e=JSON.parse(a);let t=this.id_to_alias(e.deviceid);if(!this.store[t]){this.store[t]={status:null,shadow:{},feed:[],msg:{},id:deviceid}}this.store[t]["status"]=e.status;let i={};i[t]={};i[t]["status"]={status:e.status};l(f.store,i)}else if(o.startsWith(`@private/device/status/get/response`)){let e=JSON.parse(a);let t=this.id_to_alias(e.deviceid);if(e.groupid){r({deviceid:e.deviceid,groupid:e.groupid})}else if(e.privategroupid){r({deviceid:e.deviceid,groupid:e.privategroupid})}if(!this.store[t]){this.store[t]={status:null,shadow:{},feed:[],msg:{},id:deviceid}}this.store[t]["status"]=e.status;let i={};i[t]={};i[t]["status"]={status:e.status};l(f.store,i)}else if(o.startsWith(`@private/shadow/data/get/response`)){let e=JSON.parse(a);let t=this.id_to_alias(e.deviceid);if(!this.store[t]){this.store[t]={status:null,shadow:{},feed:[],msg:{},id:e.deviceid}}this.store[t]["shadow"]=deepMerge(this.store[t]["shadow"],e.data);let i={};i[t]={};i[t]["shadow"]=e.data;l(f.store,i)}else if(o.startsWith(`@feed/data/updated/`)){let i=JSON.parse(a);let r=this.id_to_alias(i.deviceid);let n=i.newdata;for(let t=0;t<f.store[r]["feed"].length;t++){let e=f.store[r]["feed"][t].name;if(n&&n[e]!==undefined&&n[e]!=null){f.store[r]["feed"][t].data.push({x:i.timestamp,y:n[e]});delete n[e]}}for(key in n){f.store[r]["feed"].push({name:key,data:[{x:i.timestamp,y:n[key]}]})}}else if(o.startsWith(`@msg/`)){let e=o.split("/");let t=e.splice(2);let i=t.join(".").toString();let r=e[1];let n={};let s=f.resolver.group[r];if(s&&s.length>0){for(deviceid of s){let=alias=f.id_to_alias(deviceid);n[alias]={msg:{}};if(!f.store[alias]){f.store[alias]={status:null,shadow:{},feed:[],msg:{},id:deviceid}}objectPath.set(n[alias]["msg"],i,String(a));objectPath.set(f.store[alias]["msg"],i,String(a))}}l(f.store,n)}});this.dashclient.on("connected",()=>{console.log("connected");f.store={};f.launchts=Date.now()+PRESTART_DURATION;if(!f.timer){f.timer=setInterval(()=>{if(Date.now()>=f.launchts&&f.dsready){clearInterval(f.timer);f.timer=0;f.ready=true;emitter.emit("DASH_READY")}},500)}e({code:1,color:"CONNECTED",dashid:f.dashclient.dashid,dashtoken:f.dashclient.dashtoken});this.dashclient.subscribe("@private/#");this.dashclient.publish("@dash/datasource/get")});this.dashclient.on("disconnected",()=>{console.log("disconnected");e({code:0,color:"DISCONNECTED"})});this.dashclient.connect()}})();if(typeof emitter=="undefined"){eventhandler={};eventhandler_once={};emitter={on(t,i){if(!eventhandler[t]){eventhandler[t]=[]}for(let e of eventhandler[t]){if(e===i)return}eventhandler[t].push(i)},once(t,i){if(!eventhandler_once[t]){eventhandler_once[t]=[]}for(let e of eventhandler_once[t]){if(e===i)return}eventhandler_once[t].push(i)},emit(r,n,s,o,a){if(eventhandler[r]){for(let e of eventhandler[r]){if(typeof e=="function"){e(n,s,o,a)}}}if(eventhandler_once[r]){for(let i of eventhandler_once[r]){if(typeof i=="function"){i(n,s,o,a)}let t=eventhandler_once[r];for(let e in t){if(t[e]===i){t.splice(e,1);return}}}}},removeAllListeners(e){if(e){delete eventhandler[e];delete eventhandler_once[e]}else{eventhandler={};eventhandler_once={}}},removeListener(e,t){let i;i=eventhandler[e];for(let e in i){if(i[e]===t){i.splice(e,1);return}}i=eventhandler_once[e];for(let e in i){if(i[e]===t){i.splice(e,1);return}}}}}const DATASOURCE_LOCALSTORE_NAME="var";let _device;if(typeof globalStore==="undefined"){globalStore={}}if(typeof dashclients==="undefined"){dashclients={}}if(typeof _device==="undefined"){_device={}}if(datasources[DATASOURCE_LOCALSTORE_NAME]==undefined){datasources[DATASOURCE_LOCALSTORE_NAME]={}}if(typeof lastWidgetActionExecuted==="undefined"){lastWidgetActionExecuted={}}function transpile_macro_code(e){if(e==undefined)return e;let t=new RegExp("\\$([a-zA-Z0-9_]*)[\\s]*=([^;]*)","g");e=e.replace(t,'_varset("$1",$2)');let i=new RegExp("\\$([a-zA-Z0-9_]+)","g");e=e.replace(i,'datasources["var"]["'+"$1"+'"]');let r=new RegExp("#\\[([^#\\]]*)\\]\\.","g");e=e.replace(r,"_device[$1].");let n=new RegExp("#\\[","g");e=e.replace(n,'datasources["dash"][');return e}function allObjectPath(i={},r="",n=[]){let s=Object.keys(i).sort((e,t)=>{return e>t?1:-1});for(let t=0;t<s.length;t++){let e=s[t];if(typeof i[e]=="object"){allObjectPath(i[e],`${r?r+".":""}${e}`,n)}else{n.push(`${r?r+".":""}${e}`)}}return n}function allObjectPathValue(i={},r="",n={}){let s=Object.keys(i).sort((e,t)=>{return e>t?1:-1});for(let t=0;t<s.length;t++){let e=s[t];if(typeof i[e]=="object"){allObjectPathValue(i[e],`${r?r+".":""}${e}`,n)}else{if(r){n[`${r?r+".":""}${e}`]=i[e]}else{n[`${e}`]=i[e]}}}return n}function getFeedAttribute({feedname:e,feedid:r}){const n="dash";let t=this.freeboardmodel.datasourceData;if(!r&&e){r=t[n][e].id}return new Promise(async(e,t)=>{let i=await dashclients[n].getFeedAttribute(r);e(i)})}function getShadowAttribute({devicealias:e,deviceid:r}){const n="dash";let t=this.freeboardmodel.datasourceData;if(!r&&e){r=t[n][e].id}return new Promise(async(e,t)=>{let i=await dashclients[n].getShadowAttribute(r);e(i)})}function initDeviceFunction({alias:e,id:n}){const s="dash";if(_device===undefined)_device={};if(_device[e]===undefined)_device[e]={};_device[e].publishMsg=function(e,t){dashclients[s].publish(`@dash/msg/device/${n}/${e}`,String(t))};_device[e].publishMSG=_device[e].publishMsg;_device[e].privateMsg=function(e,t){dashclients[s].publish(`@dash/private/device/${n}/${e}`,String(t))};_device[e].privateMSG=_device[e].privateMsg;_device[e].writeShadow=function(t,i){let r=undefined;if(typeof t=="object"){r=JSON.stringify({data:t})}else if(typeof t=="string"){if(i!==null&&i!==undefined){let e={};e[t]=i;r=JSON.stringify({data:e})}}if(r!=undefined){dashclients[s].publish(`@dash/shadow/data/update/${n}`,r)}}}function _varset(e,t){try{localStore.set(e,t)}catch(e){console.log(e)}}function _varreset(){try{localStore.reset()}catch(e){console.log(e)}}function isWidgetActionSet(e,t){if(globalStore[e][t]!=undefined&&globalStore[e][t].trim()!="")return true;else return false}function setWidgetAction(e,t,i){if(!globalStore[e]){globalStore[e]={}}globalStore[e][t]=i}function executeWidgetAction(e,t,i){let r;if(typeof e=="string")r=e;if(typeof e=="object")r=e.widgetID;let n=globalStore[r][t];if(!lastWidgetActionExecuted[r]){lastWidgetActionExecuted[r]=0}setTimeout(()=>{if(typeof n=="string"){runCode(n,i)}else if(typeof n=="function"){n(i)}},10)}function executeCodeText(e,t){runCode(e,t)}function runCode(cmd,context={}){let self=this;let datasources=this.freeboardmodel.datasourceData;function evaluate(code,args={}){args._device=_device;this._device=_device;return function evaluateEval(){const argsStr=Object.keys(args).map(e=>`${e} = this.${e}`).join(",");const argsDef=argsStr?`let ${argsStr};`:"";let output;try{output=eval(`${argsDef}${code}`)}catch(e){console.log(e)}return output}.call(args)}try{cmd=transpile_macro_code(cmd);outcome=evaluate(cmd,context)}catch(e){}}function randomString(e){return Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)}function toggleTheme(){var e=document.getElementById("netpie-theme-css");if(e!=null){e.parentNode.removeChild(e);np_theme="default"}else{var t=document.createElement("link");t.id="netpie-theme-css";t.href="css/nexpie_theme.css";t.rel="stylesheet";document.head.appendChild(t);np_theme="netpie"}saveTheme();freeboard.emit("theme_changed")}function changeTheme(e){if(e=="dark"){var t=document.getElementById("netpie-theme-css");if(t){t.parentNode.removeChild(t)}np_theme="default"}else{var e=document.createElement("link");e.id="netpie-theme-css";e.href="css/nexpie_theme.css";e.rel="stylesheet";document.head.appendChild(e);np_theme="netpie"}saveTheme();freeboard.emit("theme_changed")}if(typeof np_theme==="undefined"){np_theme="default"}function saveTheme(){var e=window.localStorage.getItem("netpie.freeboard.dashboard");if(e!==null){var t=JSON.parse(e);t.theme=np_theme;window.localStorage.setItem("netpie.freeboard.dashboard",JSON.stringify(t))}}function getPlatformGraphQLURI(e){switch(e){case"NEXIIOT":return"https://gqlv2.nexiiot.io";case"NEXPIE":return"https://gqlv2.nexpie.io";case"NETPIE":return"https://gqlv2.netpie.io";case"DEV":return"https://dev-gqlv2.nexpie.io";case"LOCAL":return"https://dev-gqlv2.nexpie.io";default:return null}}function getPlatformMQTTURI(e){switch(e){case"NEXIIOT":return"wss://dashmqtt.nexiiot.io/mqtt";case"NEXPIE":return"wss://dashmqtt.nexpie.io/mqtt";case"NETPIE":return"wss://dashmqtt.netpie.io/mqtt";case"DEV":return"wss://dev-dashmqtt.nexpie.io:31990/mqtt";case"LOCAL":return"ws://localhost:18083/mqtt";default:return null}}function getPlatformDSURI(e){switch(e){case"NEXIIOT":return"https://ds.nexiiot.io";case"NEXPIE":return"https://ds.nexpie.io";case"NETPIE":return"https://ds.netpie.io";case"DEV":return"https://dev-ds.nexpie.io";case"LOCAL":return"https://dev-ds.nexpie.io";default:return null}}function deepMerge(e={},t={}){const i={...e,...t};for(const r of Object.keys(i)){if(typeof i[r]==="object"&&i[r]!==null){i[r]=deepMerge(e[r],t[r])}}return i}freeboard.on("load_theme",function(){var e=document.getElementById("netpie-theme-css");var t=window.localStorage.getItem("netpie.freeboard.dashboard");var i=JSON.parse(t);if(i!==null){if(i.theme===null||i.theme=="default"){if(e!=null){e.parentNode.removeChild(e)}np_theme="default";document.getElementById("theme-toggle").checked=false}if(i.theme=="netpie"){var r=document.createElement("link");r.id="netpie-theme-css";r.href="css/nexpie_theme.css";r.rel="stylesheet";document.head.appendChild(r);np_theme="netpie";document.getElementById("theme-toggle").checked=true}}else{np_theme="default";document.getElementById("theme-toggle").checked=false}saveTheme()});freeboard.emit("load_theme");(function(e,t){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{e.objectPath=t()}})(this,function(){var t=Object.prototype.toString;function u(e,t){if(e==null){return false}return Object.prototype.hasOwnProperty.call(e,t)}function f(e){if(!e){return true}if(h(e)&&e.length===0){return true}else if(typeof e!=="string"){for(var t in e){if(u(e,t)){return false}}return true}return false}function i(e){return t.call(e)}function c(e){return typeof e==="object"&&i(e)==="[object Object]"}var h=Array.isArray||function(e){return t.call(e)==="[object Array]"};function d(e){return typeof e==="boolean"||i(e)==="[object Boolean]"}function p(e){var t=parseInt(e);if(t.toString()===e){return t}return e}function e(n){n=n||{};var o=function(i){return Object.keys(o).reduce(function(e,t){if(t==="create"){return e}if(typeof o[t]==="function"){e[t]=o[t].bind(o,i)}return e},{})};var s;if(n.includeInheritedProps){s=function(){return true}}else{s=function(e,t){return typeof t==="number"&&Array.isArray(e)||u(e,t)}}function r(e,t){if(s(e,t)){return e[t]}}var a;if(n.includeInheritedProps){a=function(e,t){if(typeof t!=="string"&&typeof t!=="number"){t=String(t)}var i=r(e,t);if(t==="__proto__"||t==="prototype"||t==="constructor"&&typeof i==="function"){throw new Error("For security reasons, object's magic properties cannot be set")}return i}}else{a=function(e,t){return r(e,t)}}function l(e,t,i,r){if(typeof t==="number"){t=[t]}if(!t||t.length===0){return e}if(typeof t==="string"){return l(e,t.split(".").map(p),i,r)}var n=t[0];var s=a(e,n);if(t.length===1){if(s===void 0||!r){e[n]=i}return s}if(s===void 0){if(typeof t[1]==="number"){e[n]=[]}else{e[n]={}}}return l(e[n],t.slice(1),i,r)}o.has=function(e,t){if(typeof t==="number"){t=[t]}else if(typeof t==="string"){t=t.split(".")}if(!t||t.length===0){return!!e}for(var i=0;i<t.length;i++){var r=p(t[i]);if(typeof r==="number"&&h(e)&&r<e.length||(n.includeInheritedProps?r in Object(e):u(e,r))){e=e[r]}else{return false}}return true};o.ensureExists=function(e,t,i){return l(e,t,i,true)};o.set=function(e,t,i,r){return l(e,t,i,r)};o.insert=function(e,t,i,r){var n=o.get(e,t);r=~~r;if(!h(n)){n=[];o.set(e,t,n)}n.splice(r,0,i)};o.empty=function(e,t){if(f(t)){return void 0}if(e==null){return void 0}var i,r;if(!(i=o.get(e,t))){return void 0}if(typeof i==="string"){return o.set(e,t,"")}else if(d(i)){return o.set(e,t,false)}else if(typeof i==="number"){return o.set(e,t,0)}else if(h(i)){i.length=0}else if(c(i)){for(r in i){if(s(i,r)){delete i[r]}}}else{return o.set(e,t,null)}};o.push=function(e,t){var i=o.get(e,t);if(!h(i)){i=[];o.set(e,t,i)}i.push.apply(i,Array.prototype.slice.call(arguments,2))};o.coalesce=function(e,t,i){var r;for(var n=0,s=t.length;n<s;n++){if((r=o.get(e,t[n]))!==void 0){return r}}return i};o.get=function(e,t,i){if(typeof t==="number"){t=[t]}if(!t||t.length===0){return e}if(e==null){return i}if(typeof t==="string"){return o.get(e,t.split("."),i)}var r=p(t[0]);var n=a(e,r);if(n===void 0){return i}if(t.length===1){return n}return o.get(e[r],t.slice(1),i)};o.del=function e(t,i){if(typeof i==="number"){i=[i]}if(t==null){return t}if(f(i)){return t}if(typeof i==="string"){return o.del(t,i.split("."))}var r=p(i[0]);a(t,r);if(!s(t,r)){return t}if(i.length===1){if(h(t)){t.splice(r,1)}else{delete t[r]}}else{return o.del(t[r],i.slice(1))}return t};return o}var r=e();r.create=e;r.withInheritedProps=e({includeInheritedProps:true});return r});function bestFontColor(e){let t=hexToRgb(e);if(t){if(t.r*.299+t.g*.587+t.b*.114>186)return"#000";else return"#fff"}else{return"#888"}}freeboard.addStyle(".indicator-light","border-radius:50%;width:22px;height:22px;border:2px solid #3d3d3d;margin-top:5px;float:left;background-color:#222;margin-right:10px;");freeboard.addStyle(".indicator-light.on","background-color:#FFC773;box-shadow: 0px 0px 8px #FF9900;border-color:#FDF1DF;");freeboard.addStyle(".indicator-text","margin-top:10px;");var indicatorWidget=function(e){var t=this;var i=$('<div class="section-title"></div>');var r=$('<div class="indicator-text"></div>');var n=$('<div class="indicator-light"></div>');var s=e;var o=false;var a;var l;var u=100;let f,c,h,d;let p,g,m=0,y;r.css("user-select","none");function v(e,t){const i=(new Option).style;i.color=e;if(t==undefined){if(i.color.toString()!==""){return{result:true,color:i.color.toString()}}else{return{result:false,color:"#FFC773"}}}else{let e=i.color.toString().replace("rgb","rgba").replace(")",` ,${t})`);return{result:true,color:e}}}function b(){if(f){h=f}else{h=s.oncolor}if(c){d=c}else{d=s.offcolor}if(o&&s.value.trim().length>0){n.css({"background-color":v(h).color,"box-shadow":"0px 0px 10px "+v(h).color,border:"2px solid "+v("#fff",.65).color,filter:`brightness(100%)`,"-moz-transition":`all .1s ease-in`,"-o-transition":`all .1s ease-in`,"-webkit-transition":`all .1s ease-in`,transition:`all .1s ease-in`})}else{n.css({"background-color":v(d).color,"box-shadow":"none",border:"2px solid "+v("#fff",.85).color,filter:`brightness(100%)`})}if(o){r.text(_.isUndefined(a)?_.isUndefined(s.on_text)?"":s.on_text:a)}else{r.text(_.isUndefined(l)?_.isUndefined(s.off_text)?"":s.off_text:l)}}function w(){u=u==100?40:100;let e=y/2;let t=y/2;if(o){if(u>60){n.css({filter:`brightness(${u}%)`,"box-shadow":"0px 0px 8px "+v(h).color,border:"2px solid "+v("#fff",.65).color})}else{n.css({filter:`brightness(${u}%)`,"box-shadow":"none",border:"2px solid "+v("#fff",1).color})}}else{n.css({"background-color":v(d).color,filter:`brightness(100%)`,"box-shadow":"none",border:"2px solid "+v("#fff",.85).color})}}function x(){if(p){if(m){if(!y||y!=g){y=g;clearInterval(m);m=setInterval(()=>{w()},Math.round(1/y*500))}}else{y=g||1;m=setInterval(()=>{w()},Math.round(1/y*500))}}else{if(m){clearInterval(m);m=0;b()}}}this.render=function(e){$(e).append(i).append(n).append(r);i.css("user-select","none")};this.onSettingsChanged=function(e){s=e;i.html(_.isUndefined(e.title)?"":e.title);setTimeout(()=>{b()},1)};this.onCalculatedValueChanged=function(e,t){let i=false;if(e=="value"){o=t?true:false}if(e=="on_text"){a=t}if(e=="off_text"){l=t}if(e=="blinking"){if(p!=(t?true:false)){p=t?true:false;i=true}}if(e=="blinkfrequency"){if(g!=Number(t)||1){g=Number(t)||1;i=true}}if(i){x()}if(e=="var_oncolor"){f=t}if(e=="var_offcolor"){c=t}b()};this.onDispose=function(){};this.getHeight=function(){return 1};this.onSettingsChanged(e)};freeboard.loadWidgetPlugin({type_name:"indicator",display_name:"Indicator Light",settings:[{name:"title",display_name:"Title",type:"text"},{name:"oncolor",display_name:"Light On Color",type:"color",default_value:"#FFC773"},{name:"var_oncolor",display_name:"Or",type:"calculated",description:"Add a condition to set the light color. This will override static color."},{name:"offcolor",display_name:"Light Off Color",type:"color",default_value:"#222222"},{name:"var_offcolor",display_name:"Or",type:"calculated",description:"Add a condition to set the light color. This will override static color."},{name:"value",display_name:"Light State",type:"calculated",description:"Boolean TRUE or 1 to represent ON, FALSE or 0 to represent OFF"},{name:"blinking",display_name:"Blinking",type:"calculated",default_value:"",description:"Set to 1 or boolean true to enable blinking "},{name:"blinkfrequency",display_name:"Blink Frequency",type:"calculated",default_value:"1",description:"Blink frequence in Hz. Used only when blinking is enabled"},{name:"on_text",display_name:"On Text",type:"calculated",default_value:"ON"},{name:"off_text",display_name:"Off Text",type:"calculated",default_value:"OFF"}],newInstance:function(e,t){t(new indicatorWidget(e))}});freeboard.addStyle(".gauge-widget-wrapper","width: 100%;text-align: center; margin-top:-25px; ");freeboard.addStyle(".gauge-widget","width:100%;height:120px;display:inline-block;");var gaugeWidget=function(e){var t=this;var i="gauge-"+randomString(8);var r=$('<h2 class="section-title"></h2>');var s=$('<div class="gauge-widget" id="'+i+'" style="user-select:none" ></div>');var o;var a=false;var l=e;function n(){if(!a){return}let n={id:i,value:_.isUndefined(l.min_value)?0:l.min_value,min:_.isUndefined(l.min_value)?0:l.min_value,max:_.isUndefined(l.max_value)?0:l.max_value,label:l.units||"",showInnerShadow:false,valueFontColor:"#d3d4d4",humanFriendly:l.human_friendly!=undefined?l.human_friendly:true,humanFriendlyDecimal:l.decimal,decimals:l.decimal,hideInnerShadow:true};if(l.rangeonpercent==undefined){l.rangeonpercent=false}if(l.rangecolor&&l.rangecolor.length>0){n.customSectors=[];for(let e=0;e<l.rangecolor.length;e++){let r=l.rangecolor[e];if(r.from==undefined||r.from.trim()==""||r.to==undefined||r.to.trim()==""){if(!n.levelColors)n.levelColors=[];n.levelColors.push(r.color)}else{let t,i;if(l.rangeonpercent){let e=Number(l.max_value)-Number(l.min_value);t=e*Number(r.from)/100+Number(l.min_value);i=e*Number(r.to)/100+Number(l.min_value)}else{t=Number(r.from);i=Number(r.to)}n.customSectors.push({color:r.color,lo:t||0,hi:i||100})}}}s.empty();o=new JustGage(n)}this.render=function(e){a=true;$(e).append(r).append($('<div class="gauge-widget-wrapper"></div>').append(s));n()};this.onSettingsChanged=function(e){l=e;n();r.html(e.title);r.css("user-select","none")};this.onCalculatedValueChanged=function(e,t){if(!_.isUndefined(o)){o.refresh(Number(t))}};this.onDispose=function(){};this.getHeight=function(){return 2};this.onSettingsChanged(e)};freeboard.loadWidgetPlugin({type_name:"gauge",display_name:"Gauge",settings:[{name:"title",display_name:"Title",type:"text"},{name:"value",display_name:"Value",type:"calculated"},{name:"units",display_name:"Units",type:"text"},{name:"min_value",display_name:"Minimum",type:"number",default_value:0},{name:"max_value",display_name:"Maximum",type:"number",default_value:100},{name:"decimal",display_name:"Decimal Digit",type:"slider",min:0,max:6,default_value:2},{name:"human_friendly",display_name:"Human Friendly Number",type:"boolean",default_value:true},{name:"rangecolor",display_name:"Range Color ",type:"array",settings:[{name:"from",display_name:"From",type:"text"},{name:"to",display_name:"To",type:"text"},{name:"color",display_name:"Color",type:"color"}]},{name:"rangeonpercent",display_name:"Range On Percent",type:"boolean",default_value:false}],newInstance:function(e,t){t(new gaugeWidget(e))}});(function(){var l={red:["#FFF","#e74c3c"],green:["#FFF","#2ecc71"],blue:["#FFF","#3498db"],yellow:["#FFF","#f1c40f"],white:["#454545","#ecf0f1"],grey:["#FFF","#bdc3c7"]};freeboard.loadWidgetPlugin({type_name:"Button",display_name:"Button",description:"A simple button widget that can perform Javascript action.",fill_size:false,settings:[{name:"caption",display_name:"Button Caption",type:"text"},{name:"label",display_name:"Label",type:"text"},{name:"color",display_name:"Button Color",type:"option",options:[{name:"Red",value:"red"},{name:"Green",value:"green"},{name:"Blue",value:"blue"},{name:"Yellow",value:"yellow"},{name:"White",value:"white"},{name:"Grey",value:"grey"}]},{name:"onClick",display_name:"onClick action",type:"script",description:"Add some Javascript here."},{name:"onInitial",display_name:"onInitial Action",type:"script",description:"JS code to run after a button is created"}],newInstance:function(e,t,i){t(new r(e,i))}});var r=function(t,i){var r=this;var n=t;var s=$(`<input type="button" class="netpie-button" id="${t.id}"  value="${t.caption||""}"
            onClick="${i.getCommand("onClick")}"
        >`);var o=$(`<div class="netpie-button-text">${t.label?t.label:""}</div>`);o.css("user-select","none");i.setCommand("onClick",n.onClick);i.setCommand("onInitial",n.onInitial);function a(e){if(l[e]){s.css({color:l[e][0],"background-color":l[e][1]})}}a(t.color);i.on("ready",()=>{i.triggerAction("onInitial")});r.getHeight=function(){return 1};r.onSettingsChanged=function(e){n=e;document.getElementById(t.id).value=e.caption;a(e.color);o.text(e.label?e.label:"");i.setCommand("onClick",n.onClick);i.setCommand("onInitial",n.onInitial);if(n.label==""||n.label==undefined){$(`#${r.widgetID}`).css("width","100%")}else{$(`#${r.widgetID}`).css("width","50%")}};r.render=function(e){$(e).append(s).append(o);if(n.label==""||n.label==undefined){$(`#${r.widgetID}`).css("width","100%")}else{$(`#${r.widgetID}`).css("width","50%")}};r.onCalculatedValueChanged=function(e,t){if(e=="label"){$(s).val(t)}};r.onDispose=function(){}}})();(function(){freeboard.loadWidgetPlugin({type_name:"Toggle",display_name:"Toggle",description:"A simple toggle widget that can perform Javascript action.",fill_size:false,settings:[{name:"label",display_name:"Label",type:"text"},{name:"oncolor",display_name:"Toggle On Color",type:"color",default_value:"#00C853"},{name:"var_oncolor",display_name:"or",type:"calculated",description:"Add a condition to set the filled color here. This will override the static color."},{name:"offcolor",display_name:"Toggle Off Color",type:"color",default_value:"#F44336"},{name:"var_offcolor",display_name:"or",type:"calculated",description:"Add a condition to set the filled color here. This will override the static color."},{name:"ontext",display_name:"Toggle On Caption",type:"text",default_value:"ON"},{name:"offtext",display_name:"Toggle Off Caption",type:"text",default_value:"OFF"},{name:"state",display_name:"Toggle State",type:"calculated",description:"Add a condition to switch a toggle state here. Otherwise it just toggle by click.",default_value:""},{name:"onToggleOn",display_name:"onToggleOn Action",type:"script",description:"JS code to run when a toggle is switched to ON"},{name:"onToggleOff",display_name:"onToggleOff Action",type:"script",description:"JS code to run when a toggle is switched to OFF"},{name:"onInitial",display_name:"onInitial Action",type:"script",description:"JS code to run after a toggle is created"}],newInstance:function(e,t,i){t(new r(e,i))}});var r=function(o,a){var l=this;var u=o;let f;let c,h,d;a.on("ready",()=>{a.triggerAction("onInitial")});l.render=function(e){let t=u.oncolor;let i=u.offcolor;if(c){t=c}else{t=u.oncolor||"#00C853"}if(h){i=h}else{i=u.offcolor||"#F44336"}let r=bestFontColor(t);let n=bestFontColor(i);if(f){f.remove()}let s=d?"CHECKED":"";if(typeof u.state=="string"){u.state=u.state.trim()}f=$(`<div class="netpie-toggle" id="${o.id}_container" style="--oncolor:${t}; --offcolor:${i}; --onfontcolor:${r}; --offfontcolor:${n};" >
                <input type="checkbox" name="toggle"  ${s}  class="netpie-toggle-checkbox" id="${o.id}"
                    onChange="${a.getCommand("onToggleChanged")}"
                    onClick="${a.getCommand("onToggleClicked")} ; ${u.state==""?"":"this.checked=!this.checked"}"   >
                <label class="netpie-toggle-label" for="${o.id}">
                <span class="netpie-toggle-inner" ontext="${u.ontext}" offtext="${u.offtext}" id="${o.id}_inner"></span>
                <span class="netpie-toggle-switch"></span></label></div>
                <div class="netpie-toggle-text" id="${o.id}_toggleText" style="user-select: none;">${u.label||""}</div>`);a.setCommand("onInitial",u.onInitial);a.setCommand("onToggleChanged",function(e){d=$("#"+o.id).prop("checked")});a.setCommand("onToggleClicked",function(e){if(d){a.execute(u.onToggleOff)}else{a.execute(u.onToggleOn)}});if(e){l.containerElement=e}else{e=l.containerElement}$(e).append(f);if(u.label==""||u.label==undefined){$(`#${o.id}_container`).css("width","100%")}else{$(`#${o.id}_container`).css("width","50%")}};l.getHeight=function(){return 1};l.onSettingsChanged=function(e){u=e;if(u.label==""||u.label==undefined){$(`#${o.id}_container`).css("width","100%")}else{$(`#${o.id}_container`).css("width","50%")}a.setCommand("onInitial",u.onInitial);$("#"+o.id+"_inner").attr("ontext",e.ontext||"");$("#"+o.id+"_inner").attr("offtext",e.offtext||"");document.getElementById(o.id+"_toggleText").innerHTML=e.label||"";l.render()};l.onCalculatedValueChanged=function(e,t){if(e=="state"){document.getElementById(o.id).checked=t;d=t?true:false}if(e=="var_oncolor"){c=t}if(e=="var_offcolor"){h=t}l.render()};l.onDispose=function(){}}})();if(typeof sliderObject=="undefined"){sliderObject={}}(function(){var u={red:["#FFF","#e74c3c"],green:["#FFF","#2ecc71"],blue:["#FFF","#3498db"],yellow:["#FFF","#f1c40f"],white:["#454545","#ecf0f1"],grey:["#FFF","#bdc3c7"]};freeboard.loadWidgetPlugin({type_name:"Slider",display_name:"Slider",description:"A slider widget that can perform Javascript action.",fill_size:false,settings:[{name:"caption",display_name:"Slider Caption",type:"text"},{name:"color",display_name:"Filled Color",type:"option",options:[{name:"Red",value:"red"},{name:"Green",value:"green"},{name:"Blue",value:"blue"},{name:"Yellow",value:"yellow"},{name:"White",value:"white"},{name:"Grey",value:"grey"}],default_value:"grey"},{name:"showvalue",display_name:"Display value",type:"boolean",default_value:1},{name:"min",display_name:"Min Value",type:"text",default_value:0},{name:"max",display_name:"Max Value",type:"text",default_value:100},{name:"step",display_name:"Step",type:"text",default_value:1},{name:"sensitivity",display_name:"sensitivity (ms)",type:"number",default_value:200},{name:"initialvalue",display_name:"Initial Value",type:"text",default_value:"0",description:"The default value set only the first time the widget is loaded."},{name:"autovaluesource",display_name:"Auto Updated Value",type:"calculated",description:"Slider will be updated upon the change of variables (e.g. other data sources)."},{name:"onStart",display_name:"onStart action",type:"script",description:"Add some Javascript here. You can access to a slider attribute using variables 'value' and 'percent'."},{name:"onSlide",display_name:"onSlide action",type:"script",description:"Add some Javascript here. You can access to a slider attribute using variables 'value' and 'percent'."},{name:"onStop",display_name:"onStop action",type:"script",description:"Add some Javascript here. You can access to a slider attribute using variables 'value' and 'percent'."},{name:"onInitial",display_name:"onInitial Action",type:"script",description:"JS code to run after a button is created"}],newInstance:function(e,t,i){t(new r(e,i))}});var r=function(n,o){var a=this;var i=n;var t=$(`<input id="${n.id}" type="range" min="${n.min}" max="${n.max}" step="${n.step}" value="${n.initialvalue||0}" />`);a.autoValue=0;var e=n.initialvalue||0;if(e>n.max)e=n.max;else if(e<n.min)e=n.min;var r=$(`<span style="float:left; user-select: none;" tabIndex="-1" >${n.caption||""}</span>`);var l=$(`<span style="float:right; user-select: none;">${e}</span>`);if(n.showvalue)l.show();else l.hide();a.linkAutoValue=n.autovaluesource&&n.autovaluesource.length>0;o.setCommand("onStart",i.onStart);o.setCommand("onStop",i.onStop);o.setCommand("onSlide",i.onSlide);o.setCommand("onInitial",i.onInitial);function s(e){if(u[e]){if(document.getElementById(n.id)){sliderObject[n.id].setFillColor(u[e][1])}}}o.on("ready",()=>{o.triggerAction("onInitial")});a.render=function(e){$(e).append(r).append(l).append(t);a.lastSlideCallback=0;a.lastSlideValue=undefined;a.nextSlideCallbackTimer=0;a.maxCallbackDuration=i.sensitivity||200;(function(){var e=document.getElementById(n.id);sliderObject[n.id]=rangeSlider.create(e,{onInit:function(){a.controlling=false},onSlideStart:function(e,t,i){let r=100*t;a.controlling=true;l.text(e);if(o.isSet("onStart")){o.triggerAction("onStart",{value:e,ratio:t,percent:r})}},onSlide:function(r,n,e){a.controlling=true;l.text(r);let s=100*n;if(o.isSet("onSlide")){if(Date.now()-a.lastSlideCallback>a.maxCallbackDuration){o.triggerAction("onSlide",{value:r,ratio:n,percent:s});a.lastSlideCallback=Date.now()}else{if(a.nextSlideCallbackTimer!=0){clearTimeout(a.nextSlideCallbackTimer);a.nextSlideCallbackTimer=0}let e=r;let t=n;let i=s;a.nextSlideCallbackTimer=setTimeout(()=>{if(a.lastSlideValue!=e){o.triggerAction("onSlide",{value:e,ratio:t,percent:i});a.lastSlideValue=e}a.lastSlideCallback=Date.now();a.nextSlideCallbackTimer=0},a.maxCallbackDuration-(Date.now()-a.lastSlideCallback))}}},onSlideEnd:function(e,t,i){let r=100*t;l.text(e);if(o.isSet("onStop")){o.triggerAction("onStop",{value:e,ratio:t,percent:r})}if(a.linkAutoValue){setTimeout(function(){sliderObject[n.id].update({value:a.autoValue});l.text(sliderObject[n.id].value);a.controlling=false},2e3)}else{a.controlling=false}}})})();s(n.color)};a.getHeight=function(){return 1};a.onSettingsChanged=function(e){i=e;s(e.color);r.text(e.caption?e.caption:"");if(e.showvalue)l.show();else l.hide();a.maxCallbackDuration=e.sensitivity;o.setCommand("onStart",i.onStart);o.setCommand("onStop",i.onStop);o.setCommand("onSlide",i.onSlide);var t=sliderObject[n.id].value;sliderObject[n.id].update({min:Number(e.min||0),max:Number(e.max||100),step:Number(e.step||1)});sliderObject[n.id].update({value:t});l.text(sliderObject[n.id].value);a.linkAutoValue=e.autovaluesource&&e.autovaluesource.length>0;if(a.linkAutoValue){sliderObject[n.id].update({value:a.autoValue});l.text(sliderObject[n.id].value)}};a.onCalculatedValueChanged=function(e,t){if(e=="autovaluesource"){if(a.controlling){a.autoValue=t}else{a.autoValue=t;sliderObject[n.id].update({value:t});l.text(sliderObject[n.id].value)}}};a.onSizeChanged=function(){a.onSettingsChanged(i)};a.onDispose=function(){}}})();(function(e){"use strict";if(typeof define==="function"&&define.amd){define([],e)}else if(typeof module==="object"&&module!==null&&module.exports){module.exports=e()}else{window["rangeSlider"]=e()}})(function(){"use strict";var n="eventListenerList";var s=new RegExp("/[\\n\\t]/","g");var a=100;var t=300;var i=50;function e(){var e=document.createElement("input");e.setAttribute("type","range");return e.type!=="text"}var l="rangeSlider",u=0,f=e(),c={polyfill:true,rangeClass:"rangeSlider",disabledClass:"rangeSlider--disabled",fillClass:"rangeSlider__fill",bufferClass:"rangeSlider__buffer",handleClass:"rangeSlider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"],min:null,max:null,step:null,value:null,buffer:null,stick:null,borderRadius:10};function r(e,t){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)}function o(t,i){i=i||100;return function(){if(!t.debouncing){var e=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,e);t.debouncing=true}clearTimeout(t.debounceTimeout);t.debounceTimeout=setTimeout(function(){t.debouncing=false},i);return t.lastReturnVal}}function h(e){if(e){return!!(e.offsetWidth===0||e.offsetHeight===0||e.open===false)}else{return 0}}function d(e){var t=[],i=e.parentNode;while(h(i)){t.push(i);i=i.parentNode}return t}function p(e,t){var i=d(e),r=i.length,n=[],s=e[t];function o(e){if(typeof e.open!=="undefined"){e.open=e.open?false:true}}if(r){for(var a=0;a<r;a++){n[a]=i[a].style.display;i[a].style.display="block";i[a].style.height="0";i[a].style.overflow="hidden";i[a].style.visibility="hidden";o(i[a])}s=e[t];for(var l=0;l<r;l++){o(i[l]);i[l].style.display=n[l];i[l].style.height="";i[l].style.overflow="";i[l].style.visibility=""}}return s}function g(e){return e===""+e}function m(e){return Object.prototype.toString.call(e)==="[object Array]"}function y(e){return e!==null&&e!==undefined&&(g(e)&&isFinite(parseFloat(e))||isFinite(e))}function v(){if(!arguments.length){return null}for(var e=0,t=arguments.length;e<t;e++){if(y(arguments[e])){return arguments[e]}}}function b(e){return Object.prototype.toString.call(e)==="[object Object]"}function w(e,t){var i={},r;for(r in e){i[r]=e[r]}for(r in t){i[r]=t[r]}return i}function _(e,t){for(var i in t){e.style[i]=t[i]}return e.style}function x(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")}function k(e,t){if(!x(e,t)){e.className+=" "+t}}function S(e,t){var i=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(x(e,t)){while(i.indexOf(" "+t+" ")>=0){i=i.replace(" "+t+" "," ")}e.className=i.replace(/^\s+|\s+$/g,"")}}function E(e,t,i){if(i){t(e)}while(e.parentNode&&!t(e)){e=e.parentNode}return e}function C(e,t,i){if(!g(t)){throw new TypeError("event name must be String")}if(!(e instanceof HTMLElement)){throw new TypeError("element must be HTMLElement")}t=t.trim();var r=document.createEvent("CustomEvent");r.initCustomEvent(t,false,false,i);e.dispatchEvent(r)}function A(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function I(t,e,i){e.forEach(function(e){if(!t[n]){t[n]={}}if(!t[n][e]){t[n][e]=[]}t.addEventListener(e,i,false);if(t[n][e].indexOf(i)<0){t[n][e].push(i)}})}function T(i,e,r){e.forEach(function(e){i.removeEventListener(e,r,false);var t;if(i[n]&&i[n][e]&&(t=i[n][e].indexOf(r))>-1){i[n][e].splice(t,1)}})}function B(e){if(!e[n]){return}var t=this;function i(e){if(e===t._startEventListener){this.el.removeEventListener(this.eventName,e,false)}}for(var r in e[n]){e[n][r].forEach(i,{eventName:r,el:e})}e[n]={}}function P(e,t){var i,r,n,s,o;this.element=e;this.options=w(c,t);this.polyfill=this.options.polyfill;this.onInit=this.options.onInit;this.onSlide=this.options.onSlide;this.onSlideStart=this.options.onSlideStart;this.onSlideEnd=this.options.onSlideEnd;this.onSlideEventsCount=-1;this.isInteractsNow=false;this.needTriggerEvents=false;if(!this.polyfill){if(f){return false}}this.options.buffer=this.options.buffer||parseFloat(this.element.getAttribute("data-buffer"));this.identifier="js-"+l+"-"+u++;this.min=v(this.options.min,parseFloat(this.element.getAttribute("min")),i=0);this.max=v(this.options.max,parseFloat(this.element.getAttribute("max")),r=a);this.value=v(this.options.value,this.element.value,parseFloat(this.element.value||this.min+(this.max-this.min)/2));this.step=v(this.options.step,parseFloat(this.element.getAttribute("step"))||(n=1));this.percent=null;if(m(this.options.stick)&&this.options.stick.length>=1){this.stick=this.options.stick}else if(s=this.element.getAttribute("stick")){o=s.split(" ");if(o.length>=1){this.stick=o.map(parseFloat)}}if(this.stick&&this.stick.length===1){this.stick.push(this.step*1.5)}this._updatePercentFromValue();this.toFixed=this._toFixed(this.step);this.fill=document.createElement("div");this.fill.className=this.options.fillClass;this.handle=document.createElement("div");this.handle.className=this.options.handleClass;this.range=document.createElement("div");this.range.className=this.options.rangeClass;this.range.id=this.identifier;this.range.appendChild(this.handle);this.range.appendChild(this.fill);if(this.options.bufferClass){this.buffer=document.createElement("div");this.buffer.className=this.options.bufferClass;this.range.appendChild(this.buffer)}if(y(this.options.value)){this._setValue(this.options.value,true);this.element.value=this.options.value}if(y(this.options.buffer)){this.element.setAttribute("data-buffer",this.options.buffer)}if(y(this.options.min)||i){this.element.setAttribute("min",""+this.min)}if(y(this.options.max)||r){this.element.setAttribute("max",""+this.max)}if(y(this.options.step)||n){this.element.setAttribute("step",""+this.step)}A(this.element,this.range);_(this.element,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"});this._handleDown=this._handleDown.bind(this);this._handleMove=this._handleMove.bind(this);this._handleEnd=this._handleEnd.bind(this);this._startEventListener=this._startEventListener.bind(this);this._changeEventListener=this._changeEventListener.bind(this);this._handleResize=this._handleResize.bind(this);this._init();window.addEventListener("resize",this._handleResize,false);I(document,this.options.startEvent,this._startEventListener);this.element.addEventListener("change",this._changeEventListener,false)}P.prototype.constructor=P;P.prototype._toFixed=function(e){return(e+"").replace(".","").length-1};P.prototype._init=function(){if(this.onInit&&typeof this.onInit==="function"){this.onInit()}this._update()};P.prototype._updatePercentFromValue=function(){this.percent=(this.value-this.min)/(this.max-this.min)};P.prototype._startEventListener=function(e,t){var i=this;var r=e.target;var n=false;E(r,function(e){return n=e.id===i.identifier&&!x(e,i.options.disabledClass)},true);if(n){this._handleDown(e,t)}};P.prototype._changeEventListener=function(e,t){if(t&&t.origin===this.identifier){return}var i=e.target.value,r=this._getPositionFromValue(i);this._setPosition(r)};P.prototype._update=function(){this.handleWidth=p(this.handle,"offsetWidth");this.rangeWidth=p(this.range,"offsetWidth");this.maxHandleX=this.rangeWidth-this.handleWidth;this.grabX=this.handleWidth/2;this.position=this._getPositionFromValue(this.value);if(this.element.disabled){k(this.range,this.options.disabledClass)}else{S(this.range,this.options.disabledClass)}this._setPosition(this.position);if(this.options.bufferClass&&this.options.buffer){this._setBufferPosition(this.options.buffer)}this._updatePercentFromValue();C(this.element,"change",{origin:this.identifier})};P.prototype._handleResize=function(){var e=this;return o(function(){r(function(){e._update()},t)},i)()};P.prototype._handleDown=function(e){this.isInteractsNow=true;I(document,this.options.moveEvent,this._handleMove);I(document,this.options.endEvent,this._handleEnd);if((" "+e.target.className+" ").replace(s," ").indexOf(this.options.handleClass)>-1){return}var t=this._getRelativePosition(e),i=this.range.getBoundingClientRect().left,r=this._getPositionFromNode(this.handle)-i;this._setPosition(t-this.grabX);if(t>=r&&t<r+this.handleWidth){this.grabX=t-r}this._updatePercentFromValue()};P.prototype._handleMove=function(e){this.isInteractsNow=true;var t=this._getRelativePosition(e);this._setPosition(t-this.grabX)};P.prototype._handleEnd=function(e){T(document,this.options.moveEvent,this._handleMove);T(document,this.options.endEvent,this._handleEnd);C(this.element,"change",{origin:this.identifier});if(this.isInteractsNow||this.needTriggerEvents){if(this.onSlideEnd&&typeof this.onSlideEnd==="function"){this.onSlideEnd(this.value,this.percent,this.position)}}this.onSlideEventsCount=0;this.isInteractsNow=false};P.prototype._cap=function(e,t,i){if(e<t){return t}if(e>i){return i}return e};P.prototype.setHandleColor=function(e){this.handle.style.background=e};P.prototype.setHandleClassName=function(e){this.handle.className=e};P.prototype.setFillColor=function(e){this.fill.style.background=e};P.prototype.setBackgroundColor=function(e){this.range.style.background=e};P.prototype._setPosition=function(e){var t,i,r,n,s;t=this._getValueFromPosition(this._cap(e,0,this.maxHandleX));if(this.stick){r=this.stick[0];n=this.stick[1]||.1;s=t%r;if(s<n){t=t-s}else if(Math.abs(r-s)<n){t=t-s+r}}i=this._getPositionFromValue(t);this.fill.style.width=i+this.grabX+"px";this.handle.style.left=i+"px";this._setValue(t);this.position=i;this.value=t;this._updatePercentFromValue();if(this.isInteractsNow||this.needTriggerEventss){if(this.onSlideStart&&typeof this.onSlideStart==="function"&&this.onSlideEventsCount===0){this.onSlideStart(this.value,this.percent,this.position)}if(this.onSlide&&typeof this.onSlide==="function"){this.onSlide(this.value,this.percent,this.position)}}this.onSlideEventsCount++};P.prototype._setBufferPosition=function(e){var t=true,i,r,n;if(isFinite(e)){e=parseFloat(e)}else if(g(e)){if(e.indexOf("px")>0){t=false}e=parseFloat(e)}else{console.warn("New position must be XXpx or XX%");return}if(isNaN(e)){console.warn("New position is NaN");return}if(!this.options.bufferClass){console.warn("You disabled buffer, it's className is empty");return}i=t?e:e/this.rangeWidth*100;if(i<0){i=0}if(i>100){i=100}this.options.buffer=i;r=this.options.borderRadius/this.rangeWidth*100;n=i-r;if(n<0){n=0}this.buffer.style.width=n+"%";this.buffer.style.left=r*.5+"%";this.element.setAttribute("data-buffer",i)};P.prototype._getPositionFromNode=function(e){var t=0;while(e!==null){t+=e.offsetLeft;e=e.offsetParent}return t};P.prototype._getRelativePosition=function(e){var t=this.range.getBoundingClientRect().left,i=0;if(typeof e.pageX!=="undefined"){i=e.touches&&e.touches.length?e.touches[0].pageX:e.pageX}else if(typeof e.originalEvent!=="undefined"){if(typeof e.originalEvent.clientX!=="undefined"){i=e.originalEvent.clientX}else if(e.originalEvent.touches&&e.originalEvent.touches[0]&&typeof e.originalEvent.touches[0].clientX!=="undefined"){i=e.originalEvent.touches[0].clientX}}else if(e.touches&&e.touches[0]&&typeof e.touches[0].clientX!=="undefined"){i=e.touches[0].clientX}else if(e.currentPoint&&typeof e.currentPoint.x!=="undefined"){i=e.currentPoint.x}return i-t};P.prototype._getPositionFromValue=function(e){var t,i;t=(e-this.min)/(this.max-this.min);i=t*this.maxHandleX;return i};P.prototype._getValueFromPosition=function(e){var t,i;t=e/(this.maxHandleX||1);i=this.step*Math.round(t*(this.max-this.min)/this.step)+this.min;return Number(Number(i).toFixed(this.toFixed))};P.prototype._setValue=function(e,t){if(e===this.value&&!t){return}this.element.value=e;this.value=e;C(this.element,"input",{origin:this.identifier})};P.prototype.update=function(e,t){if(t){this.needTriggerEvents=true}if(b(e)){if(y(e.min)){this.element.setAttribute("min",""+e.min);this.min=e.min}if(y(e.max)){this.element.setAttribute("max",""+e.max);this.max=e.max}if(y(e.step)){this.element.setAttribute("step",""+e.step);this.step=e.step;this.toFixed=this._toFixed(e.step)}if(y(e.buffer)){this._setBufferPosition(e.buffer)}if(y(e.value)){this._setValue(e.value)}}this._update();this.onSlideEventsCount=0;this.needTriggerEvents=false;return this};P.prototype.destroy=function(){B.call(this,document);window.removeEventListener("resize",this._handleResize,false);this.element.removeEventListener("change",this._changeEventListener,false);this.element.style.cssText="";delete this.element[l];if(this.range){this.range.parentNode.removeChild(this.range)}};P.create=function(e,i){function t(e){var t=e[l];if(!t){t=new P(e,i);e[l]=t}return t}if(e&&e.length){Array.prototype.slice.call(e).forEach(function(e){return t(e)})}else{return t(e)}};return P});(function(e){var t="0.3.4",h="hasOwnProperty",d=/[\.\/]/,p="*",o=function(){},m=function(e,t){return e-t},y,v,b={n:{}},w=function(e,t){var i=b,r=v,n=Array.prototype.slice.call(arguments,2),s=w.listeners(e),o=0,a=!1,l,u=[],f={},c=[],h=y,d=[];y=e,v=0;for(var p=0,g=s.length;p<g;p++)"zIndex"in s[p]&&(u.push(s[p].zIndex),s[p].zIndex<0&&(f[s[p].zIndex]=s[p]));u.sort(m);while(u[o]<0){l=f[u[o++]],c.push(l.apply(t,n));if(v){v=r;return c}}for(p=0;p<g;p++){l=s[p];if("zIndex"in l)if(l.zIndex==u[o]){c.push(l.apply(t,n));if(v)break;do{o++,l=f[u[o]],l&&c.push(l.apply(t,n));if(v)break}while(l)}else f[l.zIndex]=l;else{c.push(l.apply(t,n));if(v)break}}v=r,y=h;return c.length?c:null};w.listeners=function(e){var t=e.split(d),i=b,r,n,s,o,a,l,u,f,c=[i],h=[];for(o=0,a=t.length;o<a;o++){f=[];for(l=0,u=c.length;l<u;l++){i=c[l].n,n=[i[t[o]],i[p]],s=2;while(s--)r=n[s],r&&(f.push(r),h=h.concat(r.f||[]))}c=f}return h},w.on=function(e,t){var i=e.split(d),r=b;for(var n=0,s=i.length;n<s;n++)r=r.n,!r[i[n]]&&(r[i[n]]={n:{}}),r=r[i[n]];r.f=r.f||[];for(n=0,s=r.f.length;n<s;n++)if(r.f[n]==t)return o;r.f.push(t);return function(e){+e==+e&&(t.zIndex=+e)}},w.stop=function(){v=1},w.nt=function(e){if(e)return new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(y);return y},w.off=w.unbind=function(e,t){var i=e.split(d),r,n,s,o,a,l,u,f=[b];for(o=0,a=i.length;o<a;o++)for(l=0;l<f.length;l+=s.length-2){s=[l,1],r=f[l].n;if(i[o]!=p)r[i[o]]&&s.push(r[i[o]]);else for(n in r)r[h](n)&&s.push(r[n]);f.splice.apply(f,s)}for(o=0,a=f.length;o<a;o++){r=f[o];while(r.n){if(t){if(r.f){for(l=0,u=r.f.length;l<u;l++)if(r.f[l]==t){r.f.splice(l,1);break}!r.f.length&&delete r.f}for(n in r.n)if(r.n[h](n)&&r.n[n].f){var c=r.n[n].f;for(l=0,u=c.length;l<u;l++)if(c[l]==t){c.splice(l,1);break}!c.length&&delete r.n[n].f}}else{delete r.f;for(n in r.n)r.n[h](n)&&r.n[n].f&&delete r.n[n].f}r=r.n}}},w.once=function(t,i){var r=function(){var e=i.apply(this,arguments);w.unbind(t,r);return e};return w.on(t,r)},w.version=t,w.toString=function(){return"You are running Eve "+t},typeof module!="undefined"&&module.exports?module.exports=w:typeof define!="undefined"?define("eve",[],function(){return w}):e.eve=w})(this),function(){function o(e){for(var t=0;t<z.length;t++)z[t].el.paper==e&&z.splice(t--,1)}function k(e,t,i,r,n,s){i=q(i);var o,a,l,u=[],f,c,h,d=e.ms,p={},g={},m={};if(r)for(v=0,b=z.length;v<b;v++){var y=z[v];if(y.el.id==t.id&&y.anim==e){y.percent!=i?(z.splice(v,1),l=1):a=y,t.attr(y.totalOrigin);break}}else r=+g;for(var v=0,b=e.percents.length;v<b;v++){if(e.percents[v]==i||e.percents[v]>r*e.top){i=e.percents[v],c=e.percents[v-1]||0,d=d/e.top*(i-c),f=e.percents[v+1],o=e.anim[i];break}r&&t.attr(e.anim[e.percents[v]])}if(!!o){if(!a){for(var w in o)if(o[F](w))if(ke[F](w)||t.paper.customAttributes[F](w)){p[w]=t.attr(w),p[w]==null&&(p[w]=xe[w]),g[w]=o[w];switch(ke[w]){case D:m[w]=(g[w]-p[w])/d;break;case"colour":p[w]=L.getRGB(p[w]);var _=L.getRGB(g[w]);m[w]={r:(_.r-p[w].r)/d,g:(_.g-p[w].g)/d,b:(_.b-p[w].b)/d};break;case"path":var x=U(p[w],g[w]),k=x[1];p[w]=x[0],m[w]=[];for(v=0,b=p[w].length;v<b;v++){m[w][v]=[0];for(var S=1,E=p[w][v].length;S<E;S++)m[w][v][S]=(k[v][S]-p[w][v][S])/d}break;case"transform":var C=t._,A=pt(C[w],g[w]);if(A){p[w]=A.from,g[w]=A.to,m[w]=[],m[w].real=!0;for(v=0,b=p[w].length;v<b;v++){m[w][v]=[p[w][v][0]];for(S=1,E=p[w][v].length;S<E;S++)m[w][v][S]=(g[w][v][S]-p[w][v][S])/d}}else{var I=t.matrix||new N,T={_:{transform:C.transform},getBBox:function(){return t.getBBox(1)}};p[w]=[I.a,I.b,I.c,I.d,I.e,I.f],ht(T,g[w]),g[w]=T._.transform,m[w]=[(T.matrix.a-I.a)/d,(T.matrix.b-I.b)/d,(T.matrix.c-I.c)/d,(T.matrix.d-I.d)/d,(T.matrix.e-I.e)/d,(T.matrix.f-I.f)/d]}break;case"csv":var B=j(o[w])[Q](J),P=j(p[w])[Q](J);if(w=="clip-rect"){p[w]=P,m[w]=[],v=P.length;while(v--)m[w][v]=(B[v]-p[w][v])/d}g[w]=B;break;default:B=[][$](o[w]),P=[][$](p[w]),m[w]=[],v=t.paper.customAttributes[w].length;while(v--)m[w][v]=((B[v]||0)-(P[v]||0))/d}}var O=o.easing,M=L.easing_formulas[O];if(!M){M=j(O).match(ve);if(M&&M.length==5){var R=M;M=function(e){return V(e,+R[1],+R[2],+R[3],+R[4],d)}}else M=Ne}h=o.start||e.start||+new Date,y={anim:e,percent:i,timestamp:h,start:h+(e.del||0),status:0,initstatus:r||0,stop:!1,ms:d,easing:M,from:p,diff:m,to:g,el:t,callback:o.callback,prev:c,next:f,repeat:s||e.times,origin:t.attr(),totalOrigin:n},z.push(y);if(r&&!a&&!l){y.stop=!0,y.start=new Date-d*r;if(z.length==1)return Ot()}l&&(y.start=new Date-y.ms*r),z.length==1&&Pt(Ot)}else a.initstatus=r,a.start=new Date-a.ms*r;eve("raphael.anim.start."+t.id,t,e)}}function h(e,t){var i=[],r={};this.ms=t,this.times=1;if(e){for(var n in e)e[F](n)&&(r[q(n)]=e[n],i.push(q(n)));i.sort(Me)}this.anim=r,this.top=i[i.length-1],this.percents=i}function V(e,t,i,r,n,s){function o(e,t){var i,r,n,s,o,a;for(n=e,a=0;a<8;a++){s=l(n)-e;if(Y(s)<t)return n;o=(3*c*n+2*f)*n+u;if(Y(o)<1e-6)break;n=n-s/o}i=0,r=1,n=e;if(n<i)return i;if(n>r)return r;while(i<r){s=l(n);if(Y(s-e)<t)return n;e>s?i=n:r=n,n=(r-i)/2+i}return n}function a(e,t){var i=o(e,t);return((p*i+d)*i+h)*i}function l(e){return((c*e+f)*e+u)*e}var u=3*t,f=3*(r-t)-u,c=1-u-f,h=3*i,d=3*(n-i)-h,p=1-h-d;return a(e,1/(200*s))}function a(){return this.x+S+this.y+S+this.width+" � "+this.height}function f(){return this.x+S+this.y}function N(e,t,i,r,n,s){e!=null?(this.a=+e,this.b=+t,this.c=+i,this.d=+r,this.e=+n,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function c(e,t,i){e=L._path2curve(e),t=L._path2curve(t);var r,n,s,o,a,l,u,f,c,h,d=i?0:[];for(var p=0,g=e.length;p<g;p++){var m=e[p];if(m[0]=="M")r=a=m[1],n=l=m[2];else{m[0]=="C"?(c=[r,n].concat(m.slice(1)),r=c[6],n=c[7]):(c=[r,n,r,n,a,l,a,l],r=a,n=l);for(var y=0,v=t.length;y<v;y++){var b=t[y];if(b[0]=="M")s=u=b[1],o=f=b[2];else{b[0]=="C"?(h=[s,o].concat(b.slice(1)),s=h[6],o=h[7]):(h=[s,o,s,o,u,f,u,f],s=u,o=f);var w=I(c,h,i);if(i)d+=w;else{for(var _=0,x=w.length;_<x;_++)w[_].segment1=p,w[_].segment2=y,w[_].bez1=c,w[_].bez2=h;d=d.concat(w)}}}}}return d}function I(e,t,i){var r=L.bezierBBox(e),n=L.bezierBBox(t);if(!L.isBBoxIntersect(r,n))return i?0:[];var s=E.apply(0,e),o=E.apply(0,t),a=~~(s/5),l=~~(o/5),u=[],f=[],c={},h=i?0:[];for(var d=0;d<a+1;d++){var p=L.findDotsAtSegment.apply(L,e.concat(d/a));u.push({x:p.x,y:p.y,t:d/a})}for(d=0;d<l+1;d++)p=L.findDotsAtSegment.apply(L,t.concat(d/l)),f.push({x:p.x,y:p.y,t:d/l});for(d=0;d<a;d++)for(var g=0;g<l;g++){var m=u[d],y=u[d+1],v=f[g],b=f[g+1],w=Y(y.x-m.x)<.001?"y":"x",_=Y(b.x-v.x)<.001?"y":"x",x=T(m.x,m.y,y.x,y.y,v.x,v.y,b.x,b.y);if(x){if(c[x.x.toFixed(4)]==x.y.toFixed(4))continue;c[x.x.toFixed(4)]=x.y.toFixed(4);var k=m.t+Y((x[w]-m[w])/(y[w]-m[w]))*(y.t-m.t),S=v.t+Y((x[_]-v[_])/(b[_]-v[_]))*(b.t-v.t);k>=0&&k<=1&&S>=0&&S<=1&&(i?h++:h.push({x:x.x,y:x.y,t1:k,t2:S}))}}return h}function d(e,t){return I(e,t,1)}function y(e,t){return I(e,t)}function T(e,t,i,r,n,s,o,a){if(!(_(e,i)<C(n,o)||C(e,i)>_(n,o)||_(t,r)<C(s,a)||C(t,r)>_(s,a))){var l=(e*r-t*i)*(n-o)-(e-i)*(n*a-s*o),u=(e*r-t*i)*(s-a)-(t-r)*(n*a-s*o),f=(e-i)*(s-a)-(t-r)*(n-o);if(!f)return;var c=l/f,h=u/f,d=+c.toFixed(2),p=+h.toFixed(2);if(d<+C(e,i).toFixed(2)||d>+_(e,i).toFixed(2)||d<+C(n,o).toFixed(2)||d>+_(n,o).toFixed(2)||p<+C(t,r).toFixed(2)||p>+_(t,r).toFixed(2)||p<+C(s,a).toFixed(2)||p>+_(s,a).toFixed(2))return;return{x:c,y:h}}}function B(e,t,i,r,n,s,o,a,l){if(!(l<0||E(e,t,i,r,n,s,o,a)<l)){var u=1,f=u/2,c=u-f,h,d=.01;h=E(e,t,i,r,n,s,o,a,c);while(Y(h-l)>d)f/=2,c+=(h<l?1:-1)*f,h=E(e,t,i,r,n,s,o,a,c);return c}}function E(e,t,i,r,n,s,o,a,l){l==null&&(l=1),l=l>1?1:l<0?0:l;var u=l/2,f=12,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0;for(var p=0;p<f;p++){var g=u*c[p]+u,m=P(g,e,i,n,o),y=P(g,t,r,s,a),v=m*m+y*y;d+=h[p]*K.sqrt(v)}return u*d}function P(e,t,i,r,n){var s=-3*t+9*i-9*r+3*n,o=e*s+6*t-12*i+6*r;return e*o-3*t+3*i}function O(e,t){var i=[];for(var r=0,n=e.length;n-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?n-4==r?s[3]={x:+e[0],y:+e[1]}:n-2==r&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[n-2],y:+e[n-1]}:n-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]}),i.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return i}function M(){return this.hex}function H(n,s,o){function a(){var e=Array.prototype.slice.call(arguments,0),t=e.join("?"),i=a.cache=a.cache||{},r=a.count=a.count||[];if(i[F](t)){R(r,t);return o?o(i[t]):i[t]}r.length>=1e3&&delete i[r.shift()],r.push(t),i[t]=n[m](s,e);return o?o(i[t]):i[t]}return a}function R(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function W(e){if(Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[F](i)&&(t[i]=W(e[i]));return t}function L(e){if(L.is(e,"function"))return X?e():eve.on("raphael.DOMload",e);if(L.is(e,v))return L._engine.create[m](L,e.splice(0,3+L.is(e[0],D))).add(e);var t=Array.prototype.slice.call(arguments,0);if(L.is(t[t.length-1],"function")){var i=t.pop();return X?i.call(L._engine.create[m](L,t)):eve.on("raphael.DOMload",function(){i.call(L._engine.create[m](L,t))})}return L._engine.create[m](L,arguments)}L.version="2.1.0",L.eve=eve;var X,J=/[, ]+/,Z={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},ee=/\{(\d+)\}/g,te="prototype",F="hasOwnProperty",p={doc:document,win:window},ie={was:Object.prototype[F].call(p.win,"Raphael"),is:p.win.Raphael},re=function(){this.ca=this.customAttributes={}},e,ne="appendChild",m="apply",$="concat",se="createTouch"in p.doc,x="",S=" ",j=String,Q="split",oe="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[Q](S),ae={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},le=j.prototype.toLowerCase,K=Math,_=K.max,C=K.min,Y=K.abs,A=K.pow,G=K.PI,D="number",ue="string",v="array",fe="toString",ce="fill",he=Object.prototype.toString,de={},pe="push",ge=L._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,me=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,ye={NaN:1,Infinity:1,"-Infinity":1},ve=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,be=K.round,we="setAttribute",q=parseFloat,u=parseInt,_e=j.prototype.toUpperCase,xe=L._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ke=L._availableAnimAttrs={blur:D,"clip-rect":"csv",cx:D,cy:D,fill:"colour","fill-opacity":D,"font-size":D,height:D,opacity:D,path:"path",r:D,rx:D,ry:D,stroke:"colour","stroke-opacity":D,"stroke-width":D,transform:"transform",width:D,x:D,y:D},Se=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,Ee=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,Ce={hs:1,rg:1},Ae=/,?([achlmqrstvxz]),?/gi,Ie=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,Te=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,Be=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,Pe=L._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,n={},Oe=function(e,t){return e.key-t.key},Me=function(e,t){return q(e)-q(t)},Re=function(){},Ne=function(e){return e},Le=L._rectPath=function(e,t,i,r,n){if(n)return[["M",e+n,t],["l",i-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-i,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];return[["M",e,t],["l",i,0],["l",0,r],["l",-i,0],["z"]]},Fe=function(e,t,i,r){r==null&&(r=i);return[["M",e,t],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]]},je=L._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return Fe(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return Fe(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return Le(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return Le(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return Le(t.x,t.y,t.width,t.height)}},De=L.mapPath=function(e,t){if(!t)return e;var i,r,n,s,o,a,l;e=U(e);for(n=0,o=e.length;n<o;n++){l=e[n];for(s=1,a=l.length;s<a;s+=2)i=t.x(l[s],l[s+1]),r=t.y(l[s],l[s+1]),l[s]=i,l[s+1]=r}return e};L._g=p,L.type=p.win.SVGAngle||p.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(L.type=="VML"){var qe=p.doc.createElement("div"),Ue;qe.innerHTML='<v:shape adj="1"/>',Ue=qe.firstChild,Ue.style.behavior="url(#default#VML)";if(!Ue||typeof Ue.adj!="object")return L.type=x;qe=null}L.svg=!(L.vml=L.type=="VML"),L._Paper=re,L.fn=e=re.prototype=L.prototype,L._id=0,L._oid=0,L.is=function(e,t){t=le.call(t);if(t=="finite")return!ye[F](+e);if(t=="array")return e instanceof Array;return t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||t=="array"&&Array.isArray&&Array.isArray(e)||he.call(e).slice(8,-1).toLowerCase()==t},L.angle=function(e,t,i,r,n,s){if(n==null){var o=e-i,a=t-r;if(!o&&!a)return 0;return(180+K.atan2(-a,-o)*180/G+360)%360}return L.angle(e,t,n,s)-L.angle(i,r,n,s)},L.rad=function(e){return e%360*G/180},L.deg=function(e){return e*180/G%360},L.snapTo=function(e,t,i){i=L.is(i,"finite")?i:10;if(L.is(e,v)){var r=e.length;while(r--)if(Y(e[r]-t)<=i)return e[r]}else{e=+e;var n=t%e;if(n<i)return t-n;if(n>e-i)return t-n+e}return t};var ze=L.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=K.random()*16|0,i=e=="x"?t:t&3|8;return i.toString(16)});L.setWindow=function(e){eve("raphael.setWindow",L,p.win,e),p.win=e,p.doc=p.win.document,L._engine.initWin&&L._engine.initWin(p.win)};var Ve=function(e){if(L.vml){var i=/^\s+|\s+$/g,r;try{var t=new ActiveXObject("htmlfile");t.write("<body>"),t.close(),r=t.body}catch(e){r=createPopup().document.body}var n=r.createTextRange();Ve=H(function(e){try{r.style.color=j(e).replace(i,x);var t=n.queryCommandValue("ForeColor");t=(t&255)<<16|t&65280|(t&16711680)>>>16;return"#"+("000000"+t.toString(16)).slice(-6)}catch(e){return"none"}})}else{var s=p.doc.createElement("i");s.title="Rapha�l Colour Picker",s.style.display="none",p.doc.body.appendChild(s),Ve=H(function(e){s.style.color=e;return p.doc.defaultView.getComputedStyle(s,x).getPropertyValue("color")})}return Ve(e)},We=function(){return"hsb("+[this.h,this.s,this.b]+")"},He=function(){return"hsl("+[this.h,this.s,this.l]+")"},$e=function(){return this.hex},Qe=function(e,t,i){t==null&&L.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(i=e.b,t=e.g,e=e.r);if(t==null&&L.is(e,ue)){var r=L.getRGB(e);e=r.r,t=r.g,i=r.b}if(e>1||t>1||i>1)e/=255,t/=255,i/=255;return[e,t,i]},Ke=function(e,t,i,r){e*=255,t*=255,i*=255;var n={r:e,g:t,b:i,hex:L.rgb(e,t,i),toString:$e};L.is(r,"finite")&&(n.opacity=r);return n};L.color=function(e){var t;L.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=L.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):L.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=L.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(L.is(e,"string")&&(e=L.getRGB(e)),L.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=L.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=L.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=$e;return e},L.hsb2rgb=function(e,t,i,r){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,e=e.h,r=e.o),e*=360;var n,s,o,a,l;e=e%360/60,l=i*t,a=l*(1-Y(e%2-1)),n=s=o=i-l,e=~~e,n+=[l,a,0,0,a,l][e],s+=[a,l,l,a,0,0][e],o+=[0,0,a,l,l,a][e];return Ke(n,s,o,r)},L.hsl2rgb=function(e,t,i,r){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h);if(e>1||t>1||i>1)e/=360,t/=100,i/=100;e*=360;var n,s,o,a,l;e=e%360/60,l=2*t*(i<.5?i:1-i),a=l*(1-Y(e%2-1)),n=s=o=i-l/2,e=~~e,n+=[l,a,0,0,a,l][e],s+=[a,l,l,a,0,0][e],o+=[0,0,a,l,l,a][e];return Ke(n,s,o,r)},L.rgb2hsb=function(e,t,i){i=Qe(e,t,i),e=i[0],t=i[1],i=i[2];var r,n,s,o;s=_(e,t,i),o=s-C(e,t,i),r=o==0?null:s==e?(t-i)/o:s==t?(i-e)/o+2:(e-t)/o+4,r=(r+360)%6*60/360,n=o==0?0:o/s;return{h:r,s:n,b:s,toString:We}},L.rgb2hsl=function(e,t,i){i=Qe(e,t,i),e=i[0],t=i[1],i=i[2];var r,n,s,o,a,l;o=_(e,t,i),a=C(e,t,i),l=o-a,r=l==0?null:o==e?(t-i)/l:o==t?(i-e)/l+2:(e-t)/l+4,r=(r+360)%6*60/360,s=(o+a)/2,n=l==0?0:s<.5?l/(2*s):l/(2-2*s);return{h:r,s:n,l:s,toString:He}},L._path2string=function(){return this.join(",").replace(Ae,"$1")};var Ye=L._preload=function(e,t){var i=p.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){t.call(this),this.onload=null,p.doc.body.removeChild(this)},i.onerror=function(){p.doc.body.removeChild(this)},p.doc.body.appendChild(i),i.src=e};L.getRGB=H(function(e){if(!e||!!((e=j(e)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:M};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:M};!Ce[F](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Ve(e));var t,i,r,n,s,o,a,l=e.match(me);if(l){l[2]&&(n=u(l[2].substring(5),16),r=u(l[2].substring(3,5),16),i=u(l[2].substring(1,3),16)),l[3]&&(n=u((o=l[3].charAt(3))+o,16),r=u((o=l[3].charAt(2))+o,16),i=u((o=l[3].charAt(1))+o,16)),l[4]&&(a=l[4][Q](Ee),i=q(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),r=q(a[1]),a[1].slice(-1)=="%"&&(r*=2.55),n=q(a[2]),a[2].slice(-1)=="%"&&(n*=2.55),l[1].toLowerCase().slice(0,4)=="rgba"&&(s=q(a[3])),a[3]&&a[3].slice(-1)=="%"&&(s/=100));if(l[5]){a=l[5][Q](Ee),i=q(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),r=q(a[1]),a[1].slice(-1)=="%"&&(r*=2.55),n=q(a[2]),a[2].slice(-1)=="%"&&(n*=2.55),(a[0].slice(-3)=="deg"||a[0].slice(-1)=="�")&&(i/=360),l[1].toLowerCase().slice(0,4)=="hsba"&&(s=q(a[3])),a[3]&&a[3].slice(-1)=="%"&&(s/=100);return L.hsb2rgb(i,r,n,s)}if(l[6]){a=l[6][Q](Ee),i=q(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),r=q(a[1]),a[1].slice(-1)=="%"&&(r*=2.55),n=q(a[2]),a[2].slice(-1)=="%"&&(n*=2.55),(a[0].slice(-3)=="deg"||a[0].slice(-1)=="�")&&(i/=360),l[1].toLowerCase().slice(0,4)=="hsla"&&(s=q(a[3])),a[3]&&a[3].slice(-1)=="%"&&(s/=100);return L.hsl2rgb(i,r,n,s)}l={r:i,g:r,b:n,toString:M},l.hex="#"+(16777216|n|r<<8|i<<16).toString(16).slice(1),L.is(s,"finite")&&(l.opacity=s);return l}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:M}},L),L.hsb=H(function(e,t,i){return L.hsb2rgb(e,t,i).hex}),L.hsl=H(function(e,t,i){return L.hsl2rgb(e,t,i).hex}),L.rgb=H(function(e,t,i){return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)}),L.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},i=this.hsb2rgb(t.h,t.s,t.b);t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b}));return i.hex},L.getColor.reset=function(){delete this.start},L.parsePathString=function(e){if(!e)return null;var t=b(e);if(t.arr)return w(t.arr);var s={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},o=[];L.is(e,v)&&L.is(e[0],v)&&(o=w(e)),o.length||j(e).replace(Ie,function(e,t,i){var r=[],n=t.toLowerCase();i.replace(Be,function(e,t){t&&r.push(+t)}),n=="m"&&r.length>2&&(o.push([t][$](r.splice(0,2))),n="l",t=t=="m"?"l":"L");if(n=="r")o.push([t][$](r));else while(r.length>=s[n]){o.push([t][$](r.splice(0,s[n])));if(!s[n])break}}),o.toString=L._path2string,t.arr=w(o);return o},L.parseTransformString=H(function(e){if(!e)return null;var t={r:3,s:4,t:2,m:6},s=[];L.is(e,v)&&L.is(e[0],v)&&(s=w(e)),s.length||j(e).replace(Te,function(e,t,i){var r=[],n=le.call(t);i.replace(Be,function(e,t){t&&r.push(+t)}),s.push([t][$](r))}),s.toString=L._path2string;return s});var b=function(t){var i=b.ps=b.ps||{};i[t]?i[t].sleep=100:i[t]={sleep:100},setTimeout(function(){for(var e in i)i[F](e)&&e!=t&&(i[e].sleep--,!i[e].sleep&&delete i[e])});return i[t]};L.findDotsAtSegment=function(e,t,i,r,n,s,o,a,l){var u=1-l,f=A(u,3),c=A(u,2),h=l*l,d=h*l,p=f*e+c*3*l*i+u*3*l*l*n+d*o,g=f*t+c*3*l*r+u*3*l*l*s+d*a,m=e+2*l*(i-e)+h*(n-2*i+e),y=t+2*l*(r-t)+h*(s-2*r+t),v=i+2*l*(n-i)+h*(o-2*n+i),b=r+2*l*(s-r)+h*(a-2*s+r),w=u*e+l*i,_=u*t+l*r,x=u*n+l*o,k=u*s+l*a,S=90-K.atan2(m-v,y-b)*180/G;(m>v||y<b)&&(S+=180);return{x:p,y:g,m:{x:m,y:y},n:{x:v,y:b},start:{x:w,y:_},end:{x:x,y:k},alpha:S}},L.bezierBBox=function(e,t,i,r,n,s,o,a){L.is(e,"array")||(e=[e,t,i,r,n,s,o,a]);var l=rt.apply(null,e);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},L.isPointInsideBBox=function(e,t,i){return t>=e.x&&t<=e.x2&&i>=e.y&&i<=e.y2},L.isBBoxIntersect=function(e,t){var i=L.isPointInsideBBox;return i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},L.pathIntersection=function(e,t){return c(e,t)},L.pathIntersectionNumber=function(e,t){return c(e,t,1)},L.isPointInsidePath=function(e,t,i){var r=L.pathBBox(e);return L.isPointInsideBBox(r,t,i)&&c(e,[["M",t,i],["H",r.x2+10]],1)%2==1},L._removedFactory=function(e){return function(){eve("raphael.log",null,"Rapha�l: you are calling to method �"+e+"� of removed object",e)}};var Ge=L.pathBBox=function(e){var t=b(e);if(t.bbox)return t.bbox;if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=U(e);var i=0,r=0,n=[],s=[],o;for(var a=0,l=e.length;a<l;a++){o=e[a];if(o[0]=="M")i=o[1],r=o[2],n.push(i),s.push(r);else{var u=rt(i,r,o[1],o[2],o[3],o[4],o[5],o[6]);n=n[$](u.min.x,u.max.x),s=s[$](u.min.y,u.max.y),i=o[5],r=o[6]}}var f=C[m](0,n),c=C[m](0,s),h=_[m](0,n),d=_[m](0,s),p={x:f,y:c,x2:h,y2:d,width:h-f,height:d-c};t.bbox=W(p);return p},w=function(e){var t=W(e);t.toString=L._path2string;return t},Xe=L._pathToRelative=function(e){var t=b(e);if(t.rel)return w(t.rel);if(!L.is(e,v)||!L.is(e&&e[0],v))e=L.parsePathString(e);var i=[],r=0,n=0,s=0,o=0,a=0;e[0][0]=="M"&&(r=e[0][1],n=e[0][2],s=r,o=n,a++,i.push(["M",r,n]));for(var l=a,u=e.length;l<u;l++){var f=i[l]=[],c=e[l];if(c[0]!=le.call(c[0])){f[0]=le.call(c[0]);switch(f[0]){case"a":f[1]=c[1],f[2]=c[2],f[3]=c[3],f[4]=c[4],f[5]=c[5],f[6]=+(c[6]-r).toFixed(3),f[7]=+(c[7]-n).toFixed(3);break;case"v":f[1]=+(c[1]-n).toFixed(3);break;case"m":s=c[1],o=c[2];default:for(var h=1,d=c.length;h<d;h++)f[h]=+(c[h]-(h%2?r:n)).toFixed(3)}}else{f=i[l]=[],c[0]=="m"&&(s=c[1]+r,o=c[2]+n);for(var p=0,g=c.length;p<g;p++)i[l][p]=c[p]}var m=i[l].length;switch(i[l][0]){case"z":r=s,n=o;break;case"h":r+=+i[l][m-1];break;case"v":n+=+i[l][m-1];break;default:r+=+i[l][m-2],n+=+i[l][m-1]}}i.toString=L._path2string,t.rel=w(i);return i},Je=L._pathToAbsolute=function(e){var t=b(e);if(t.abs)return w(t.abs);if(!L.is(e,v)||!L.is(e&&e[0],v))e=L.parsePathString(e);if(!e||!e.length)return[["M",0,0]];var i=[],r=0,n=0,s=0,o=0,a=0;e[0][0]=="M"&&(r=+e[0][1],n=+e[0][2],s=r,o=n,a++,i[0]=["M",r,n]);var l=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z";for(var u,f,c=a,h=e.length;c<h;c++){i.push(u=[]),f=e[c];if(f[0]!=_e.call(f[0])){u[0]=_e.call(f[0]);switch(u[0]){case"A":u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=+(f[6]+r),u[7]=+(f[7]+n);break;case"V":u[1]=+f[1]+n;break;case"H":u[1]=+f[1]+r;break;case"R":var d=[r,n][$](f.slice(1));for(var p=2,g=d.length;p<g;p++)d[p]=+d[p]+r,d[++p]=+d[p]+n;i.pop(),i=i[$](O(d,l));break;case"M":s=+f[1]+r,o=+f[2]+n;default:for(p=1,g=f.length;p<g;p++)u[p]=+f[p]+(p%2?r:n)}}else if(f[0]=="R")d=[r,n][$](f.slice(1)),i.pop(),i=i[$](O(d,l)),u=["R"][$](f.slice(-2));else for(var m=0,y=f.length;m<y;m++)u[m]=f[m];switch(u[0]){case"Z":r=s,n=o;break;case"H":r=u[1];break;case"V":n=u[1];break;case"M":s=u[u.length-2],o=u[u.length-1];default:r=u[u.length-2],n=u[u.length-1]}}i.toString=L._path2string,t.abs=w(i);return i},Ze=function(e,t,i,r){return[e,t,i,r,i,r]},et=function(e,t,i,r,n,s){var o=1/3,a=2/3;return[o*e+a*i,o*t+a*r,o*n+a*i,o*s+a*r,n,s]},tt=function(e,t,i,r,n,s,o,a,l,u){var f=G*120/180,c=G/180*(+n||0),h=[],d,p=H(function(e,t,i){var r=e*K.cos(i)-t*K.sin(i),n=e*K.sin(i)+t*K.cos(i);return{x:r,y:n}});if(!u){d=p(e,t,-c),e=d.x,t=d.y,d=p(a,l,-c),a=d.x,l=d.y;var L=K.cos(G/180*n),F=K.sin(G/180*n),g=(e-a)/2,m=(t-l)/2,y=g*g/(i*i)+m*m/(r*r);y>1&&(y=K.sqrt(y),i=y*i,r=y*r);var v=i*i,b=r*r,w=(s==o?-1:1)*K.sqrt(Y((v*b-v*m*m-b*g*g)/(v*m*m+b*g*g))),_=w*i*m/r+(e+a)/2,x=w*-r*g/i+(t+l)/2,k=K.asin(((t-x)/r).toFixed(9)),S=K.asin(((l-x)/r).toFixed(9));k=e<_?G-k:k,S=a<_?G-S:S,k<0&&(k=G*2+k),S<0&&(S=G*2+S),o&&k>S&&(k=k-G*2),!o&&S>k&&(S=S-G*2)}else k=u[0],S=u[1],_=u[2],x=u[3];var E=S-k;if(Y(E)>f){var C=S,j=a,D=l;S=k+f*(o&&S>k?1:-1),a=_+i*K.cos(S),l=x+r*K.sin(S),h=tt(a,l,i,r,n,0,o,j,D,[S,C,_,x])}E=S-k;var q=K.cos(k),U=K.sin(k),z=K.cos(S),V=K.sin(S),A=K.tan(E/4),I=4/3*i*A,T=4/3*r*A,B=[e,t],P=[e+I*U,t-T*q],O=[a+I*V,l-T*z],M=[a,l];P[0]=2*B[0]-P[0],P[1]=2*B[1]-P[1];if(u)return[P,O,M][$](h);h=[P,O,M][$](h).join()[Q](",");var R=[];for(var N=0,W=h.length;N<W;N++)R[N]=N%2?p(h[N-1],h[N],c).y:p(h[N],h[N+1],c).x;return R},it=function(e,t,i,r,n,s,o,a,l){var u=1-l;return{x:A(u,3)*e+A(u,2)*3*l*i+u*3*l*l*n+A(l,3)*o,y:A(u,3)*t+A(u,2)*3*l*r+u*3*l*l*s+A(l,3)*a}},rt=H(function(e,t,i,r,n,s,o,a){var l=n-2*i+e-(o-2*n+i),u=2*(i-e)-2*(n-i),f=e-i,c=(-u+K.sqrt(u*u-4*l*f))/2/l,h=(-u-K.sqrt(u*u-4*l*f))/2/l,d=[t,a],p=[e,o],g;Y(c)>"1e12"&&(c=.5),Y(h)>"1e12"&&(h=.5),c>0&&c<1&&(g=it(e,t,i,r,n,s,o,a,c),p.push(g.x),d.push(g.y)),h>0&&h<1&&(g=it(e,t,i,r,n,s,o,a,h),p.push(g.x),d.push(g.y)),l=s-2*r+t-(a-2*s+r),u=2*(r-t)-2*(s-r),f=t-r,c=(-u+K.sqrt(u*u-4*l*f))/2/l,h=(-u-K.sqrt(u*u-4*l*f))/2/l,Y(c)>"1e12"&&(c=.5),Y(h)>"1e12"&&(h=.5),c>0&&c<1&&(g=it(e,t,i,r,n,s,o,a,c),p.push(g.x),d.push(g.y)),h>0&&h<1&&(g=it(e,t,i,r,n,s,o,a,h),p.push(g.x),d.push(g.y));return{min:{x:C[m](0,p),y:C[m](0,d)},max:{x:_[m](0,p),y:_[m](0,d)}}}),U=L._path2curve=H(function(e,t){var i=!t&&b(e);if(!t&&i.curve)return w(i.curve);var s=Je(e),o=t&&Je(t),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(e,t){var i,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][$](tt[m](0,[t.x,t.y][$](e.slice(1))));break;case"S":i=t.x+(t.x-(t.bx||t.x)),r=t.y+(t.y-(t.by||t.y)),e=["C",i,r][$](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][$](et(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][$](et(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][$](Ze(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][$](Ze(t.x,t.y,e[1],t.y));break;case"V":e=["C"][$](Ze(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][$](Ze(t.x,t.y,t.X,t.Y))}return e},l=function(e,t){if(e[t].length>7){e[t].shift();var i=e[t];while(i.length)e.splice(t++,0,["C"][$](i.splice(0,6)));e.splice(t,1),c=_(s.length,o&&o.length||0)}},u=function(e,t,i,r,n){e&&t&&e[n][0]=="M"&&t[n][0]!="M"&&(t.splice(n,0,["M",r.x,r.y]),i.bx=0,i.by=0,i.x=e[n][1],i.y=e[n][2],c=_(s.length,o&&o.length||0))};for(var f=0,c=_(s.length,o&&o.length||0);f<c;f++){s[f]=a(s[f],r),l(s,f),o&&(o[f]=a(o[f],n)),o&&l(o,f),u(s,o,r,n,f),u(o,s,n,r,f);var h=s[f],d=o&&o[f],p=h.length,g=o&&d.length;r.x=h[p-2],r.y=h[p-1],r.bx=q(h[p-4])||r.x,r.by=q(h[p-3])||r.y,n.bx=o&&(q(d[g-4])||n.x),n.by=o&&(q(d[g-3])||n.y),n.x=o&&d[g-2],n.y=o&&d[g-1]}o||(i.curve=w(s));return o?[s,o]:s},null,w),nt=L._parseDots=H(function(e){var t=[];for(var i=0,r=e.length;i<r;i++){var n={},s=e[i].match(/^([^:]*):?([\d\.]*)/);n.color=L.getRGB(s[1]);if(n.color.error)return null;n.color=n.color.hex,s[2]&&(n.offset=s[2]+"%"),t.push(n)}for(i=1,r=t.length-1;i<r;i++)if(!t[i].offset){var o=q(t[i-1].offset||0),a=0;for(var l=i+1;l<r;l++)if(t[l].offset){a=t[l].offset;break}a||(a=100,l=r),a=q(a);var u=(a-o)/(l-i+1);for(;i<l;i++)o+=u,t[i].offset=o+"%"}return t}),st=L._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},ot=L._tofront=function(e,t){t.top!==e&&(st(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},at=L._toback=function(e,t){t.bottom!==e&&(st(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},lt=L._insertafter=function(e,t,i){st(e,i),t==i.top&&(i.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},ut=L._insertbefore=function(e,t,i){st(e,i),t==i.bottom&&(i.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},ft=L.toMatrix=function(e,t){var i=Ge(e),r={_:{transform:x},getBBox:function(){return i}};ht(r,t);return r.matrix},ct=L.transformPath=function(e,t){return De(e,ft(e,t))},ht=L._extractTransform=function(e,t){if(t==null)return e._.transform;t=j(t).replace(/\.{3}|\u2026/g,e._.transform||x);var i=L.parseTransformString(t),r=0,n=0,s=0,o=1,a=1,l=e._,u=new N;l.transform=i||[];if(i)for(var f=0,c=i.length;f<c;f++){var h=i[f],d=h.length,p=j(h[0]).toLowerCase(),g=h[0]!=p,m=g?u.invert():0,y,v,b,w,_;p=="t"&&d==3?g?(y=m.x(0,0),v=m.y(0,0),b=m.x(h[1],h[2]),w=m.y(h[1],h[2]),u.translate(b-y,w-v)):u.translate(h[1],h[2]):p=="r"?d==2?(_=_||e.getBBox(1),u.rotate(h[1],_.x+_.width/2,_.y+_.height/2),r+=h[1]):d==4&&(g?(b=m.x(h[2],h[3]),w=m.y(h[2],h[3]),u.rotate(h[1],b,w)):u.rotate(h[1],h[2],h[3]),r+=h[1]):p=="s"?d==2||d==3?(_=_||e.getBBox(1),u.scale(h[1],h[d-1],_.x+_.width/2,_.y+_.height/2),o*=h[1],a*=h[d-1]):d==5&&(g?(b=m.x(h[3],h[4]),w=m.y(h[3],h[4]),u.scale(h[1],h[2],b,w)):u.scale(h[1],h[2],h[3],h[4]),o*=h[1],a*=h[2]):p=="m"&&d==7&&u.add(h[1],h[2],h[3],h[4],h[5],h[6]),l.dirtyT=1,e.matrix=u}e.matrix=u,l.sx=o,l.sy=a,l.deg=r,l.dx=n=u.e,l.dy=s=u.f,o==1&&a==1&&!r&&l.bbox?(l.bbox.x+=+n,l.bbox.y+=+s):l.dirtyT=1},dt=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},pt=L._equaliseTransform=function(e,t){t=j(t).replace(/\.{3}|\u2026/g,e),e=L.parseTransformString(e)||[],t=L.parseTransformString(t)||[];var i=_(e.length,t.length),r=[],n=[],s=0,o,a,l,u;for(;s<i;s++){l=e[s]||dt(t[s]),u=t[s]||dt(l);if(l[0]!=u[0]||l[0].toLowerCase()=="r"&&(l[2]!=u[2]||l[3]!=u[3])||l[0].toLowerCase()=="s"&&(l[3]!=u[3]||l[4]!=u[4]))return;r[s]=[],n[s]=[];for(o=0,a=_(l.length,u.length);o<a;o++)o in l&&(r[s][o]=l[o]),o in u&&(n[s][o]=u[o])}return{from:r,to:n}};L._getContainer=function(e,t,i,r){var n;n=r==null&&!L.is(e,"object")?p.doc.getElementById(e):e;if(n!=null){if(n.tagName)return t==null?{container:n,width:n.style.pixelWidth||n.offsetWidth,height:n.style.pixelHeight||n.offsetHeight}:{container:n,width:t,height:i};return{container:1,x:e,y:t,width:i,height:r}}},L.pathToRelative=Xe,L._engine={},L.path2curve=U,L.matrix=function(e,t,i,r,n,s){return new N(e,t,i,r,n,s)},function(e){function n(e){var t=K.sqrt(s(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}function s(e){return e[0]*e[0]+e[1]*e[1]}e.add=function(e,t,i,r,n,s){var o=[[],[],[]],a=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],l=[[e,i,n],[t,r,s],[0,0,1]],u,f,c,h;e&&e instanceof N&&(l=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]);for(u=0;u<3;u++)for(f=0;f<3;f++){h=0;for(c=0;c<3;c++)h+=a[u][c]*l[c][f];o[u][f]=h}this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new N(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new N(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,i,r){t==null&&(t=e),(i||r)&&this.add(1,0,0,1,i,r),this.add(e,0,0,t,0,0),(i||r)&&this.add(1,0,0,1,-i,-r)},e.rotate=function(e,t,i){e=L.rad(e),t=t||0,i=i||0;var r=+K.cos(e).toFixed(9),n=+K.sin(e).toFixed(9);this.add(r,n,-n,r,t,i),this.add(1,0,0,1,-t,-i)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[j.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return L.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var t=[[this.a,this.c],[this.b,this.d]];e.scalex=K.sqrt(s(t[0])),n(t[0]),e.shear=t[0][0]*t[1][0]+t[0][1]*t[1][1],t[1]=[t[1][0]-t[0][0]*e.shear,t[1][1]-t[0][1]*e.shear],e.scaley=K.sqrt(s(t[1])),n(t[1]),e.shear/=e.scaley;var i=-t[0][1],r=t[1][1];r<0?(e.rotate=L.deg(K.acos(r)),i<0&&(e.rotate=360-e.rotate)):e.rotate=L.deg(K.asin(i)),e.isSimple=!+e.shear.toFixed(9)&&(e.scalex.toFixed(9)==e.scaley.toFixed(9)||!e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate;return e},e.toTransformString=function(e){var t=e||this[Q]();if(t.isSimple){t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4);return(t.dx||t.dy?"t"+[t.dx,t.dy]:x)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:x)+(t.rotate?"r"+[t.rotate,0,0]:x)}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(N.prototype);var gt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(gt&&gt[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&gt&&gt[1]<8?e.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:e.safari=Re;var mt=function(){this.returnValue=!1},yt=function(){return this.originalEvent.preventDefault()},vt=function(){this.cancelBubble=!0},bt=function(){return this.originalEvent.stopPropagation()},wt=function(){if(p.doc.addEventListener)return function(l,u,f,c){var e=se&&ae[u]?ae[u]:u,t=function(e){var t=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,i=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft,r=e.clientX+i,n=e.clientY+t;if(se&&ae[F](u))for(var s=0,o=e.targetTouches&&e.targetTouches.length;s<o;s++)if(e.targetTouches[s].target==l){var a=e;e=e.targetTouches[s],e.originalEvent=a,e.preventDefault=yt,e.stopPropagation=bt;break}return f.call(c,e,r,n)};l.addEventListener(e,t,!1);return function(){l.removeEventListener(e,t,!1);return!0}};if(p.doc.attachEvent)return function(e,t,s,o){var i=function(e){e=e||p.win.event;var t=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,i=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft,r=e.clientX+i,n=e.clientY+t;e.preventDefault=e.preventDefault||mt,e.stopPropagation=e.stopPropagation||vt;return s.call(o,e,r,n)};e.attachEvent("on"+t,i);var r=function(){e.detachEvent("on"+t,i);return!0};return r}}(),g=[],_t=function(e){var t=e.clientX,i=e.clientY,r=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,n=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft,s,o=g.length;while(o--){s=g[o];if(se){var a=e.touches.length,l;while(a--){l=e.touches[a];if(l.identifier==s.el._drag.id){t=l.clientX,i=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else e.preventDefault();var u=s.el.node,f,c=u.nextSibling,h=u.parentNode,d=u.style.display;p.win.opera&&h.removeChild(u),u.style.display="none",f=s.el.paper.getElementByPoint(t,i),u.style.display=d,p.win.opera&&(c?h.insertBefore(u,c):h.appendChild(u)),f&&eve("raphael.drag.over."+s.el.id,s.el,f),t+=n,i+=r,eve("raphael.drag.move."+s.el.id,s.move_scope||s.el,t-s.el._drag.x,i-s.el._drag.y,t,i,e)}},xt=function(e){L.unmousemove(_t).unmouseup(xt);var t=g.length,i;while(t--)i=g[t],i.el._drag={},eve("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,e);g=[]},s=L.el={};for(var kt=oe.length;kt--;)(function(r){L[r]=s[r]=function(e,t){L.is(e,"function")&&(this.events=this.events||[],this.events.push({name:r,f:e,unbind:wt(this.shape||this.node||p.doc,r,e,t||this)}));return this},L["un"+r]=s["un"+r]=function(e){var t=this.events||[],i=t.length;while(i--)if(t[i].name==r&&t[i].f==e){t[i].unbind(),t.splice(i,1),!t.length&&delete this.events;return this}return this}})(oe[kt]);s.data=function(e,t){var i=n[this.id]=n[this.id]||{};if(arguments.length==1){if(L.is(e,"object")){for(var r in e)e[F](r)&&this.data(r,e[r]);return this}eve("raphael.data.get."+this.id,this,i[e],e);return i[e]}i[e]=t,eve("raphael.data.set."+this.id,this,t,e);return this},s.removeData=function(e){e==null?n[this.id]={}:n[this.id]&&delete n[this.id][e];return this},s.hover=function(e,t,i,r){return this.mouseover(e,i).mouseout(t,r||i)},s.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var t=[];s.drag=function(r,n,s,o,a,l){function e(e){(e.originalEvent||e).preventDefault();var t=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,i=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft;this._drag.x=e.clientX+i,this._drag.y=e.clientY+t,this._drag.id=e.identifier,!g.length&&L.mousemove(_t).mouseup(xt),g.push({el:this,move_scope:o,start_scope:a,end_scope:l}),n&&eve.on("raphael.drag.start."+this.id,n),r&&eve.on("raphael.drag.move."+this.id,r),s&&eve.on("raphael.drag.end."+this.id,s),eve("raphael.drag.start."+this.id,a||o||this,e.clientX+i,e.clientY+t,e)}this._drag={},t.push({el:this,start:e}),this.mousedown(e);return this},s.onDragOver=function(e){e?eve.on("raphael.drag.over."+this.id,e):eve.unbind("raphael.drag.over."+this.id)},s.undrag=function(){var e=t.length;while(e--)t[e].el==this&&(this.unmousedown(t[e].start),t.splice(e,1),eve.unbind("raphael.drag.*."+this.id));!t.length&&L.unmousemove(_t).unmouseup(xt)},e.circle=function(e,t,i){var r=L._engine.circle(this,e||0,t||0,i||0);this.__set__&&this.__set__.push(r);return r},e.rect=function(e,t,i,r,n){var s=L._engine.rect(this,e||0,t||0,i||0,r||0,n||0);this.__set__&&this.__set__.push(s);return s},e.ellipse=function(e,t,i,r){var n=L._engine.ellipse(this,e||0,t||0,i||0,r||0);this.__set__&&this.__set__.push(n);return n},e.path=function(e){e&&!L.is(e,ue)&&!L.is(e[0],v)&&(e+=x);var t=L._engine.path(L.format[m](L,arguments),this);this.__set__&&this.__set__.push(t);return t},e.image=function(e,t,i,r,n){var s=L._engine.image(this,e||"about:blank",t||0,i||0,r||0,n||0);this.__set__&&this.__set__.push(s);return s},e.text=function(e,t,i){var r=L._engine.text(this,e||0,t||0,j(i));this.__set__&&this.__set__.push(r);return r},e.set=function(e){!L.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new l(e);this.__set__&&this.__set__.push(t);return t},e.setStart=function(e){this.__set__=e||this.set()},e.setFinish=function(e){var t=this.__set__;delete this.__set__;return t},e.setSize=function(e,t){return L._engine.setSize.call(this,e,t)},e.setViewBox=function(e,t,i,r,n){return L._engine.setViewBox.call(this,e,t,i,r,n)},e.top=e.bottom=null,e.raphael=L;var St=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,r=i.body,n=i.documentElement,s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,a=t.top+(p.win.pageYOffset||n.scrollTop||r.scrollTop)-s,l=t.left+(p.win.pageXOffset||n.scrollLeft||r.scrollLeft)-o;return{y:a,x:l}};e.getElementByPoint=function(e,t){var i=this,r=i.canvas,n=p.doc.elementFromPoint(e,t);if(p.win.opera&&n.tagName=="svg"){var s=St(r),o=r.createSVGRect();o.x=e-s.x,o.y=t-s.y,o.width=o.height=1;var a=r.getIntersectionList(o,null);a.length&&(n=a[a.length-1])}if(!n)return null;while(n.parentNode&&n!=r.parentNode&&!n.raphael)n=n.parentNode;n==i.canvas.parentNode&&(n=r),n=n&&n.raphael?i.getById(n.raphaelid):null;return n},e.getById=function(e){var t=this.bottom;while(t){if(t.id==e)return t;t=t.next}return null},e.forEach=function(e,t){var i=this.bottom;while(i){if(e.call(t,i)===!1)return this;i=i.next}return this},e.getElementsByPoint=function(t,i){var r=this.set();this.forEach(function(e){e.isPointInside(t,i)&&r.push(e)});return r},s.isPointInside=function(e,t){var i=this.realPath=this.realPath||je[this.type](this);return L.isPointInsidePath(i,e,t)},s.getBBox=function(e){if(this.removed)return{};var t=this._;if(e){if(t.dirty||!t.bboxwt)this.realPath=je[this.type](this),t.bboxwt=Ge(this.realPath),t.bboxwt.toString=a,t.dirty=0;return t.bboxwt}if(t.dirty||t.dirtyT||!t.bbox){if(t.dirty||!this.realPath)t.bboxwt=0,this.realPath=je[this.type](this);t.bbox=Ge(De(this.realPath,this.matrix)),t.bbox.toString=a,t.dirty=t.dirtyT=0}return t.bbox},s.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(e);return e},s.glow=function(e){if(this.type=="text")return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},i=t.width/2,r=this.paper,n=r.set(),s=this.realPath||je[this.type](this);s=this.matrix?De(s,this.matrix):s;for(var o=1;o<i+1;o++)n.push(r.path(s).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/i*o).toFixed(3),opacity:+(t.opacity/i).toFixed(3)}));return n.insertBefore(this).translate(t.offsetx,t.offsety)};var Et={},Ct=function(e,t,i,r,n,s,o,a,l){return l==null?E(e,t,i,r,n,s,o,a):L.findDotsAtSegment(e,t,i,r,n,s,o,a,B(e,t,i,r,n,s,o,a,l))},At=function(d,p){return function(e,t,i){e=U(e);var r,n,s,o,a="",l={},u,f=0;for(var c=0,h=e.length;c<h;c++){s=e[c];if(s[0]=="M")r=+s[1],n=+s[2];else{o=Ct(r,n,s[1],s[2],s[3],s[4],s[5],s[6]);if(f+o>t){if(p&&!l.start){u=Ct(r,n,s[1],s[2],s[3],s[4],s[5],s[6],t-f),a+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y];if(i)return a;l.start=a,a=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,s[5],s[6]].join(),f+=o,r=+s[5],n=+s[6];continue}if(!d&&!p){u=Ct(r,n,s[1],s[2],s[3],s[4],s[5],s[6],t-f);return{x:u.x,y:u.y,alpha:u.alpha}}}f+=o,r=+s[5],n=+s[6]}a+=s.shift()+s}l.end=a,u=d?f:p?l:L.findDotsAtSegment(r,n,s[0],s[1],s[2],s[3],s[4],s[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha});return u}},It=At(1),Tt=At(),Bt=At(0,1);L.getTotalLength=It,L.getPointAtLength=Tt,L.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return Bt(e,t).end;var r=Bt(e,i,1);return t?Bt(r,t).end:r},s.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return It(this.attrs.path)}},s.getPointAtLength=function(e){if(this.type=="path")return Tt(this.attrs.path,e)},s.getSubpath=function(e,t){if(this.type=="path")return L.getSubpath(this.attrs.path,e,t)};var i=L.easing_formulas={linear:function(e){return e},"<":function(e){return A(e,1.7)},">":function(e){return A(e,.48)},"<>":function(e){var t=.48-e/1.04,i=K.sqrt(.1734+t*t),r=i-t,n=A(Y(r),1/3)*(r<0?-1:1),s=-i-t,o=A(Y(s),1/3)*(s<0?-1:1),a=n+o+.5;return(1-a)*3*a*a+a*a*a},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e=e-1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){if(e==!!e)return e;return A(2,-10*e)*K.sin((e-.075)*2*G/.3)+1},bounce:function(e){var t=7.5625,i=2.75,r;e<1/i?r=t*e*e:e<2/i?(e-=1.5/i,r=t*e*e+.75):e<2.5/i?(e-=2.25/i,r=t*e*e+.9375):(e-=2.625/i,r=t*e*e+.984375);return r}};i.easeIn=i["ease-in"]=i["<"],i.easeOut=i["ease-out"]=i[">"],i.easeInOut=i["ease-in-out"]=i["<>"],i["back-in"]=i.backIn,i["back-out"]=i.backOut;var z=[],Pt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Ot=function(){var e=+new Date,t=0;for(;t<z.length;t++){var i=z[t];if(i.el.removed||i.paused)continue;var r=e-i.start,n=i.ms,s=i.easing,o=i.from,a=i.diff,l=i.to,u=i.t,f=i.el,c={},h,d={},p;i.initstatus?(r=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*n,i.status=i.initstatus,delete i.initstatus,i.stop&&z.splice(t--,1)):i.status=(i.prev+(i.percent-i.prev)*(r/n))/i.anim.top;if(r<0)continue;if(r<n){var g=s(r/n);for(var m in o)if(o[F](m)){switch(ke[m]){case D:h=+o[m]+g*n*a[m];break;case"colour":h="rgb("+[Mt(be(o[m].r+g*n*a[m].r)),Mt(be(o[m].g+g*n*a[m].g)),Mt(be(o[m].b+g*n*a[m].b))].join(",")+")";break;case"path":h=[];for(var y=0,v=o[m].length;y<v;y++){h[y]=[o[m][y][0]];for(var b=1,w=o[m][y].length;b<w;b++)h[y][b]=+o[m][y][b]+g*n*a[m][y][b];h[y]=h[y].join(S)}h=h.join(S);break;case"transform":if(a[m].real){h=[];for(y=0,v=o[m].length;y<v;y++){h[y]=[o[m][y][0]];for(b=1,w=o[m][y].length;b<w;b++)h[y][b]=o[m][y][b]+g*n*a[m][y][b]}}else{var _=function(e){return+o[m][e]+g*n*a[m][e]};h=[["m",_(0),_(1),_(2),_(3),_(4),_(5)]]}break;case"csv":if(m=="clip-rect"){h=[],y=4;while(y--)h[y]=+o[m][y]+g*n*a[m][y]}break;default:var x=[][$](o[m]);h=[],y=f.paper.customAttributes[m].length;while(y--)h[y]=+x[y]+g*n*a[m][y]}c[m]=h}f.attr(c),function(e,t,i){setTimeout(function(){eve("raphael.anim.frame."+e,t,i)})}(f.id,f,i.anim)}else{(function(e,t,i){setTimeout(function(){eve("raphael.anim.frame."+t.id,t,i),eve("raphael.anim.finish."+t.id,t,i),L.is(e,"function")&&e.call(t)})})(i.callback,f,i.anim),f.attr(l),z.splice(t--,1);if(i.repeat>1&&!i.next){for(p in l)l[F](p)&&(d[p]=i.totalOrigin[p]);i.el.attr(d),k(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&k(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}L.svg&&f&&f.paper&&f.paper.safari(),z.length&&Pt(Ot)},Mt=function(e){return e>255?255:e<0?0:e};s.animateWith=function(e,t,i,r,n,s){var o=this;if(o.removed){s&&s.call(o);return o}var a=i instanceof h?i:L.animation(i,r,n,s),l,u;k(a,o,a.percents[0],null,o.attr());for(var f=0,c=z.length;f<c;f++)if(z[f].anim==t&&z[f].el==e){z[c-1].start=z[f].start;break}return o},s.onAnimation=function(e){e?eve.on("raphael.anim.frame."+this.id,e):eve.unbind("raphael.anim.frame."+this.id);return this},h.prototype.delay=function(e){var t=new h(this.anim,this.ms);t.times=this.times,t.del=+e||0;return t},h.prototype.repeat=function(e){var t=new h(this.anim,this.ms);t.del=this.del,t.times=K.floor(_(e,0))||1;return t},L.animation=function(e,t,i,r){if(e instanceof h)return e;if(L.is(i,"function")||!i)r=r||i||null,i=null;e=Object(e),t=+t||0;var n={},s,o;for(o in e)e[F](o)&&q(o)!=o&&q(o)+"%"!=o&&(s=!0,n[o]=e[o]);if(!s)return new h(e,t);i&&(n.easing=i),r&&(n.callback=r);return new h({100:n},t)},s.animate=function(e,t,i,r){var n=this;if(n.removed){r&&r.call(n);return n}var s=e instanceof h?e:L.animation(e,t,i,r);k(s,n,s.percents[0],null,n.attr());return n},s.setTime=function(e,t){e&&t!=null&&this.status(e,C(t,e.ms)/e.ms);return this},s.status=function(e,t){var i=[],r=0,n,s;if(t!=null){k(e,this,-1,C(t,1));return this}n=z.length;for(;r<n;r++){s=z[r];if(s.el.id==this.id&&(!e||s.anim==e)){if(e)return s.status;i.push({anim:s.anim,status:s.status})}}if(e)return 0;return i},s.pause=function(e){for(var t=0;t<z.length;t++)z[t].el.id==this.id&&(!e||z[t].anim==e)&&eve("raphael.anim.pause."+this.id,this,z[t].anim)!==!1&&(z[t].paused=!0);return this},s.resume=function(e){for(var t=0;t<z.length;t++)if(z[t].el.id==this.id&&(!e||z[t].anim==e)){var i=z[t];eve("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},s.stop=function(e){for(var t=0;t<z.length;t++)z[t].el.id==this.id&&(!e||z[t].anim==e)&&eve("raphael.anim.stop."+this.id,this,z[t].anim)!==!1&&z.splice(t--,1);return this},eve.on("raphael.remove",o),eve.on("raphael.clear",o),s.toString=function(){return"Rapha�l�s object"};var l=function(e){this.items=[],this.length=0,this.type="set";if(e)for(var t=0,i=e.length;t<i;t++)e[t]&&(e[t].constructor==s.constructor||e[t].constructor==l)&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},r=l.prototype;r.push=function(){var e,t;for(var i=0,r=arguments.length;i<r;i++)e=arguments[i],e&&(e.constructor==s.constructor||e.constructor==l)&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},r.pop=function(){this.length&&delete this[this.length--];return this.items.pop()},r.forEach=function(e,t){for(var i=0,r=this.items.length;i<r;i++)if(e.call(t,this.items[i],i)===!1)return this;return this};for(var Rt in s)s[F](Rt)&&(r[Rt]=function(i){return function(){var t=arguments;return this.forEach(function(e){e[i][m](e,t)})}}(Rt));r.attr=function(e,t){if(e&&L.is(e,v)&&L.is(e[0],"object"))for(var i=0,r=e.length;i<r;i++)this.items[i].attr(e[i]);else for(var n=0,s=this.items.length;n<s;n++)this.items[n].attr(e,t);return this},r.clear=function(){while(this.length)this.pop()},r.splice=function(e,t,i){e=e<0?_(this.length+e,0):e,t=_(0,C(this.length-e,t));var r=[],n=[],s=[],o;for(o=2;o<arguments.length;o++)s.push(arguments[o]);for(o=0;o<t;o++)n.push(this[e+o]);for(;o<this.length-e;o++)r.push(this[e+o]);var a=s.length;for(o=0;o<a+r.length;o++)this.items[e+o]=this[e+o]=o<a?s[o]:r[o-a];o=this.items.length=this.length-=t-a;while(this[o])delete this[o++];return new l(n)},r.exclude=function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]==e){this.splice(t,1);return!0}},r.animate=function(e,t,i,r){(L.is(i,"function")||!i)&&(r=i||null);var n=this.items.length,s=n,o,a=this,l;if(!n)return this;r&&(l=function(){!--n&&r.call(a)}),i=L.is(i,ue)?i:l;var u=L.animation(e,t,i,l);o=this.items[--s].animate(u);while(s--)this.items[s]&&!this.items[s].removed&&this.items[s].animateWith(o,u,u);return this},r.insertAfter=function(e){var t=this.items.length;while(t--)this.items[t].insertAfter(e);return this},r.getBBox=function(){var e=[],t=[],i=[],r=[];for(var n=this.items.length;n--;)if(!this.items[n].removed){var s=this.items[n].getBBox();e.push(s.x),t.push(s.y),i.push(s.x+s.width),r.push(s.y+s.height)}e=C[m](0,e),t=C[m](0,t),i=_[m](0,i),r=_[m](0,r);return{x:e,y:t,x2:i,y2:r,width:i-e,height:r-t}},r.clone=function(e){e=new l;for(var t=0,i=this.items.length;t<i;t++)e.push(this.items[t].clone());return e},r.toString=function(){return"Rapha�l�s set"},L.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},i=e.face["font-family"];for(var r in e.face)e.face[F](r)&&(t.face[r]=e.face[r]);this.fonts[i]?this.fonts[i].push(t):this.fonts[i]=[t];if(!e.svg){t.face["units-per-em"]=u(e.face["units-per-em"],10);for(var n in e.glyphs)if(e.glyphs[F](n)){var s=e.glyphs[n];t.glyphs[n]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"};if(s.k)for(var o in s.k)s[F](o)&&(t.glyphs[n].k[o]=s.k[o])}}return e},e.getFont=function(e,t,i,r){r=r||"normal",i=i||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400;if(!!L.fonts){var n=L.fonts[e];if(!n){var s=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,x)+"(\\s|$)","i");for(var o in L.fonts)if(L.fonts[F](o)&&s.test(o)){n=L.fonts[o];break}}var a;if(n)for(var l=0,u=n.length;l<u;l++){a=n[l];if(a.face["font-weight"]==t&&(a.face["font-style"]==i||!a.face["font-style"])&&a.face["font-stretch"]==r)break}return a}},e.print=function(e,t,i,r,n,s,o){s=s||"middle",o=_(C(o||0,1),-1);var a=j(i)[Q](x),l=0,u=0,f=x,c;L.is(r,i)&&(r=this.getFont(r));if(r){c=(n||16)/r.face["units-per-em"];var h=r.face.bbox[Q](J),d=+h[0],p=h[3]-h[1],g=0,m=+h[1]+(s=="baseline"?p+ +r.face.descent:p/2);for(var y=0,v=a.length;y<v;y++){if(a[y]=="\n")l=0,w=0,u=0,g+=p;else{var b=u&&r.glyphs[a[y-1]]||{},w=r.glyphs[a[y]];l+=u?(b.w||r.w)+(b.k&&b.k[a[y]]||0)+r.w*o:0,u=1}w&&w.d&&(f+=L.transformPath(w.d,["t",l*c,g*c,"s",c,c,d,m,"t",(e-d)/c,(t-m)/c]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},e.add=function(e){if(L.is(e,"array")){var t=this.set(),i=0,r=e.length,n;for(;i<r;i++)n=e[i]||{},Z[F](n.type)&&t.push(this[n.type]().attr(n))}return t},L.format=function(e,t){var i=L.is(t,v)?[0][$](t):arguments;e&&L.is(e,ue)&&i.length-1&&(e=e.replace(ee,function(e,t){return i[++t]==null?x:i[t]}));return e||x},L.fullfill=function(){var t=/\{([^\}]+)\}/g,r=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,t,i){var s=i;t.replace(r,function(e,t,i,r,n){t=t||r,s&&(t in s&&(s=s[t]),typeof s=="function"&&n&&(s=s()))}),s=(s==null||s==i?e:s)+"";return s};return function(e,i){return String(e).replace(t,function(e,t){return n(e,t,i)})}}(),L.ninja=function(){ie.was?p.win.Raphael=ie.is:delete Raphael;return L},L.st=r,function(e,t,i){function r(){/in/.test(e.readyState)?setTimeout(r,9):L.eve("raphael.DOMload")}e.readyState==null&&e.addEventListener&&(e.addEventListener(t,i=function(){e.removeEventListener(t,i,!1),e.readyState="complete"},!1),e.readyState="loading"),r()}(document,"DOMContentLoaded"),ie.was?p.win.Raphael=L:Raphael=L,eve.on("raphael.DOMload",function(){X=!0})}(),window.Raphael.svg&&function(E){var C="hasOwnProperty",A=String,m=parseFloat,w=parseInt,y=Math,_=y.max,x=y.abs,v=y.pow,k=/[, ]+/,h=E.eve,I="",f=" ",S="http://www.w3.org/1999/xlink",T={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},B={};E.toString=function(){return"Your browser supports SVG.\nYou are running Rapha�l "+this.version};var P=function(e,t){if(t){typeof e=="string"&&(e=P(e));for(var i in t)t[C](i)&&(i.substring(0,6)=="xlink:"?e.setAttributeNS(S,i.substring(6),A(t[i])):e.setAttribute(i,A(t[i])))}else e=E._g.doc.createElementNS("http://www.w3.org/2000/svg",e),e.style&&(e.style.webkitTapHighlightColor="rgba(0,0,0,0)");return e},O=function(e,t){var n="linear",i=e.id+t,s=.5,o=.5,r=e.node,a=e.paper,l=r.style,u=E._g.doc.getElementById(i);if(!u){t=A(t).replace(E._radial_gradient,function(e,t,i){n="radial";if(t&&i){s=m(t),o=m(i);var r=(o>.5)*2-1;v(s-.5,2)+v(o-.5,2)>.25&&(o=y.sqrt(.25-v(s-.5,2))*r+.5)&&o!=.5&&(o=o.toFixed(5)-1e-5*r)}return I}),t=t.split(/\s*\-\s*/);if(n=="linear"){var f=t.shift();f=-m(f);if(isNaN(f))return null;var c=[0,0,y.cos(E.rad(f)),y.sin(E.rad(f))],h=1/(_(x(c[2]),x(c[3]))||1);c[2]*=h,c[3]*=h,c[2]<0&&(c[0]=-c[2],c[2]=0),c[3]<0&&(c[1]=-c[3],c[3]=0)}var d=E._parseDots(t);if(!d)return null;i=i.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&i!=e.gradient.id&&(a.defs.removeChild(e.gradient),delete e.gradient);if(!e.gradient){u=P(n+"Gradient",{id:i}),e.gradient=u,P(u,n=="radial"?{fx:s,fy:o}:{x1:c[0],y1:c[1],x2:c[2],y2:c[3],gradientTransform:e.matrix.invert()}),a.defs.appendChild(u);for(var p=0,g=d.length;p<g;p++)u.appendChild(P("stop",{offset:d[p].offset?d[p].offset:p?"100%":"0%","stop-color":d[p].color||"#fff"}))}}P(r,{fill:"url(#"+i+")",opacity:1,"fill-opacity":1}),l.fill=I,l.opacity=1,l.fillOpacity=1;return 1},M=function(e){var t=e.getBBox(1);P(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},R=function(e,t,i){if(e.type=="path"){var r=A(t).toLowerCase().split("-"),n=e.paper,s=i?"end":"start",o=e.node,a=e.attrs,l=a["stroke-width"],u=r.length,f="classic",c,h,d,p,g,m=3,y=3,v=5;while(u--)switch(r[u]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":f=r[u];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":m=5;break;case"short":m=2}f=="open"?(m+=2,y+=2,v+=2,d=1,p=i?4:1,g={fill:"none",stroke:a.stroke}):(p=d=m/2,g={fill:a.stroke,stroke:"none"}),e._.arrows?i?(e._.arrows.endPath&&B[e._.arrows.endPath]--,e._.arrows.endMarker&&B[e._.arrows.endMarker]--):(e._.arrows.startPath&&B[e._.arrows.startPath]--,e._.arrows.startMarker&&B[e._.arrows.startMarker]--):e._.arrows={};if(f!="none"){var b="raphael-marker-"+f,w="raphael-marker-"+s+f+m+y;E._g.doc.getElementById(b)?B[b]++:(n.defs.appendChild(P(P("path"),{"stroke-linecap":"round",d:T[f],id:b})),B[b]=1);var _=E._g.doc.getElementById(w),x;_?(B[w]++,x=_.getElementsByTagName("use")[0]):(_=P(P("marker"),{id:w,markerHeight:y,markerWidth:m,orient:"auto",refX:p,refY:y/2}),x=P(P("use"),{"xlink:href":"#"+b,transform:(i?"rotate(180 "+m/2+" "+y/2+") ":I)+"scale("+m/v+","+y/v+")","stroke-width":(1/((m/v+y/v)/2)).toFixed(4)}),_.appendChild(x),n.defs.appendChild(_),B[w]=1),P(x,g);var k=d*(f!="diamond"&&f!="oval");i?(c=e._.arrows.startdx*l||0,h=E.getTotalLength(a.path)-k*l):(c=k*l,h=E.getTotalLength(a.path)-(e._.arrows.enddx*l||0)),g={},g["marker-"+s]="url(#"+w+")";if(h||c)g.d=Raphael.getSubpath(a.path,c,h);P(o,g),e._.arrows[s+"Path"]=b,e._.arrows[s+"Marker"]=w,e._.arrows[s+"dx"]=k,e._.arrows[s+"Type"]=f,e._.arrows[s+"String"]=t}else i?(c=e._.arrows.startdx*l||0,h=E.getTotalLength(a.path)-c):(c=0,h=E.getTotalLength(a.path)-(e._.arrows.enddx*l||0)),e._.arrows[s+"Path"]&&P(o,{d:Raphael.getSubpath(a.path,c,h)}),delete e._.arrows[s+"Path"],delete e._.arrows[s+"Marker"],delete e._.arrows[s+"dx"],delete e._.arrows[s+"Type"],delete e._.arrows[s+"String"];for(g in B)if(B[C](g)&&!B[g]){var S=E._g.doc.getElementById(g);S&&S.parentNode.removeChild(S)}}},a={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},N=function(e,t,i){t=a[A(t).toLowerCase()];if(t){var r=e.attrs["stroke-width"]||"1",n={round:r,square:r,butt:0}[e.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,s=[],o=t.length;while(o--)s[o]=t[o]*r+(o%2?1:-1)*n;P(e.node,{"stroke-dasharray":s.join(",")})}},d=function(r,e){var t=r.node,i=r.attrs,n=t.style.visibility;t.style.visibility="hidden";for(var s in e)if(e[C](s)){if(!E._availableAttrs[C](s))continue;var o=e[s];i[s]=o;switch(s){case"blur":r.blur(o);break;case"href":case"title":case"target":var a=t.parentNode;if(a.tagName.toLowerCase()!="a"){var l=P("a");a.insertBefore(l,t),l.appendChild(t),a=l}s=="target"?a.setAttributeNS(S,"show",o=="blank"?"new":o):a.setAttributeNS(S,s,o);break;case"cursor":t.style.cursor=o;break;case"transform":r.transform(o);break;case"arrow-start":R(r,o);break;case"arrow-end":R(r,o,1);break;case"clip-rect":var u=A(o).split(k);if(u.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var f=P("clipPath"),c=P("rect");f.id=E.createUUID(),P(c,{x:u[0],y:u[1],width:u[2],height:u[3]}),f.appendChild(c),r.paper.defs.appendChild(f),P(t,{"clip-path":"url(#"+f.id+")"}),r.clip=c}if(!o){var h=t.getAttribute("clip-path");if(h){var d=E._g.doc.getElementById(h.replace(/(^url\(#|\)$)/g,I));d&&d.parentNode.removeChild(d),P(t,{"clip-path":I}),delete r.clip}}break;case"path":r.type=="path"&&(P(t,{d:o?i.path=E._pathToAbsolute(o):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&R(r,r._.arrows.startString),"endString"in r._.arrows&&R(r,r._.arrows.endString,1)));break;case"width":t.setAttribute(s,o),r._.dirty=1;if(i.fx)s="x",o=i.x;else break;case"x":i.fx&&(o=-i.x-(i.width||0));case"rx":if(s=="rx"&&r.type=="rect")break;case"cx":t.setAttribute(s,o),r.pattern&&M(r),r._.dirty=1;break;case"height":t.setAttribute(s,o),r._.dirty=1;if(i.fy)s="y",o=i.y;else break;case"y":i.fy&&(o=-i.y-(i.height||0));case"ry":if(s=="ry"&&r.type=="rect")break;case"cy":t.setAttribute(s,o),r.pattern&&M(r),r._.dirty=1;break;case"r":r.type=="rect"?P(t,{rx:o,ry:o}):t.setAttribute(s,o),r._.dirty=1;break;case"src":r.type=="image"&&t.setAttributeNS(S,"href",o);break;case"stroke-width":if(r._.sx!=1||r._.sy!=1)o/=_(x(r._.sx),x(r._.sy))||1;r.paper._vbSize&&(o*=r.paper._vbSize),t.setAttribute(s,o),i["stroke-dasharray"]&&N(r,i["stroke-dasharray"],e),r._.arrows&&("startString"in r._.arrows&&R(r,r._.arrows.startString),"endString"in r._.arrows&&R(r,r._.arrows.endString,1));break;case"stroke-dasharray":N(r,o,e);break;case"fill":var p=A(o).match(E._ISURL);if(p){f=P("pattern");var g=P("image");f.id=E.createUUID(),P(f,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),P(g,{x:0,y:0,"xlink:href":p[1]}),f.appendChild(g),function(i){E._preload(p[1],function(){var e=this.offsetWidth,t=this.offsetHeight;P(i,{width:e,height:t}),P(g,{width:e,height:t}),r.paper.safari()})}(f),r.paper.defs.appendChild(f),P(t,{fill:"url(#"+f.id+")"}),r.pattern=f,r.pattern&&M(r);break}var m=E.getRGB(o);if(!m.error)delete e.gradient,delete i.gradient,!E.is(i.opacity,"undefined")&&E.is(e.opacity,"undefined")&&P(t,{opacity:i.opacity}),!E.is(i["fill-opacity"],"undefined")&&E.is(e["fill-opacity"],"undefined")&&P(t,{"fill-opacity":i["fill-opacity"]});else if((r.type=="circle"||r.type=="ellipse"||A(o).charAt()!="r")&&O(r,o)){if("opacity"in i||"fill-opacity"in i){var y=E._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,I));if(y){var v=y.getElementsByTagName("stop");P(v[v.length-1],{"stop-opacity":("opacity"in i?i.opacity:1)*("fill-opacity"in i?i["fill-opacity"]:1)})}}i.gradient=o,i.fill="none";break}m[C]("opacity")&&P(t,{"fill-opacity":m.opacity>1?m.opacity/100:m.opacity});case"stroke":m=E.getRGB(o),t.setAttribute(s,m.hex),s=="stroke"&&m[C]("opacity")&&P(t,{"stroke-opacity":m.opacity>1?m.opacity/100:m.opacity}),s=="stroke"&&r._.arrows&&("startString"in r._.arrows&&R(r,r._.arrows.startString),"endString"in r._.arrows&&R(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||A(o).charAt()!="r")&&O(r,o);break;case"opacity":i.gradient&&!i[C]("stroke-opacity")&&P(t,{"stroke-opacity":o>1?o/100:o});case"fill-opacity":if(i.gradient){y=E._g.doc.getElementById(t.getAttribute("fill").replace(/^url\(#|\)$/g,I)),y&&(v=y.getElementsByTagName("stop"),P(v[v.length-1],{"stop-opacity":o}));break};default:s=="font-size"&&(o=w(o,10)+"px");var b=s.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});t.style[b]=o,r._.dirty=1,t.setAttribute(s,o)}}L(r,e),t.style.visibility=n},p=1.2,L=function(e,t){if(e.type=="text"&&!!(t[C]("text")||t[C]("font")||t[C]("font-size")||t[C]("x")||t[C]("y"))){var i=e.attrs,r=e.node,n=r.firstChild?w(E._g.doc.defaultView.getComputedStyle(r.firstChild,I).getPropertyValue("font-size"),10):10;if(t[C]("text")){i.text=t.text;while(r.firstChild)r.removeChild(r.firstChild);var s=A(t.text).split("\n"),o=[],a;for(var l=0,u=s.length;l<u;l++)a=P("tspan"),l&&P(a,{dy:n*p,x:i.x}),a.appendChild(E._g.doc.createTextNode(s[l])),r.appendChild(a),o[l]=a}else{o=r.getElementsByTagName("tspan");for(l=0,u=o.length;l<u;l++)l?P(o[l],{dy:n*p,x:i.x}):P(o[0],{dy:0})}P(r,{x:i.x,y:i.y}),e._.dirty=1;var f=e._getBBox(),c=i.y-(f.y+f.height/2);c&&E.is(c,"finite")&&P(o[0],{dy:c})}},l=function(e,t){var i=0,r=0;this[0]=this.node=e,e.raphael=!0,this.id=E._oid++,e.raphaelid=this.id,this.matrix=E.matrix(),this.realPath=null,this.paper=t,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},e=E.el;l.prototype=e,e.constructor=l,E._engine.path=function(e,t){var i=P("path");t.canvas&&t.canvas.appendChild(i);var r=new l(i,t);r.type="path",d(r,{fill:"none",stroke:"#000",path:e});return r},e.rotate=function(e,t,i){if(this.removed)return this;e=A(e).split(k),e.length-1&&(t=m(e[1]),i=m(e[2])),e=m(e[0]),i==null&&(t=i);if(t==null||i==null){var r=this.getBBox(1);t=r.x+r.width/2,i=r.y+r.height/2}this.transform(this._.transform.concat([["r",e,t,i]]));return this},e.scale=function(e,t,i,r){if(this.removed)return this;e=A(e).split(k),e.length-1&&(t=m(e[1]),i=m(e[2]),r=m(e[3])),e=m(e[0]),t==null&&(t=e),r==null&&(i=r);if(i==null||r==null)var n=this.getBBox(1);i=i==null?n.x+n.width/2:i,r=r==null?n.y+n.height/2:r,this.transform(this._.transform.concat([["s",e,t,i,r]]));return this},e.translate=function(e,t){if(this.removed)return this;e=A(e).split(k),e.length-1&&(t=m(e[1])),e=m(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]]));return this},e.transform=function(e){var t=this._;if(e==null)return t.transform;E._extractTransform(this,e),this.clip&&P(this.clip,{transform:this.matrix.invert()}),this.pattern&&M(this),this.node&&P(this.node,{transform:this.matrix});if(t.sx!=1||t.sy!=1){var i=this.attrs[C]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},e.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this},e.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this},e.remove=function(){if(!this.removed&&!!this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),h.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),E._tear(this,e),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var t in this)this[t]=typeof this[t]=="function"?E._removedFactory(t):null;this.removed=!0}},e._getBBox=function(){if(this.node.style.display=="none"){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(e){}finally{t=t||{}}e&&this.hide();return t},e.attr=function(e,t){if(this.removed)return this;if(e==null){var i={};for(var r in this.attrs)this.attrs[C](r)&&(i[r]=this.attrs[r]);i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform;return i}if(t==null&&E.is(e,"string")){if(e=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(e=="transform")return this._.transform;var n=e.split(k),s={};for(var o=0,a=n.length;o<a;o++)e=n[o],e in this.attrs?s[e]=this.attrs[e]:E.is(this.paper.customAttributes[e],"function")?s[e]=this.paper.customAttributes[e].def:s[e]=E._availableAttrs[e];return a-1?s:s[n[0]]}if(t==null&&E.is(e,"array")){s={};for(o=0,a=e.length;o<a;o++)s[e[o]]=this.attr(e[o]);return s}if(t!=null){var l={};l[e]=t}else e!=null&&E.is(e,"object")&&(l=e);for(var u in l)h("raphael.attr."+u+"."+this.id,this,l[u]);for(u in this.paper.customAttributes)if(this.paper.customAttributes[C](u)&&l[C](u)&&E.is(this.paper.customAttributes[u],"function")){var f=this.paper.customAttributes[u].apply(this,[].concat(l[u]));this.attrs[u]=l[u];for(var c in f)f[C](c)&&(l[c]=f[c])}d(this,l);return this},e.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;e.top!=this&&E._tofront(this,e);return this},e.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;e.tagName.toLowerCase()=="a"?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),E._toback(this,this.paper);var t=this.paper;return this},e.insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode.appendChild(this.node),E._insertafter(this,e,this.paper);return this},e.insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;t.parentNode.insertBefore(this.node,t),E._insertbefore(this,e,this.paper);return this},e.blur=function(e){var t=this;if(+e!==0){var i=P("filter"),r=P("feGaussianBlur");t.attrs.blur=e,i.id=E.createUUID(),P(r,{stdDeviation:+e||1.5}),i.appendChild(r),t.paper.defs.appendChild(i),t._blur=i,P(t.node,{filter:"url(#"+i.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter")},E._engine.circle=function(e,t,i,r){var n=P("circle");e.canvas&&e.canvas.appendChild(n);var s=new l(n,e);s.attrs={cx:t,cy:i,r:r,fill:"none",stroke:"#000"},s.type="circle",P(n,s.attrs);return s},E._engine.rect=function(e,t,i,r,n,s){var o=P("rect");e.canvas&&e.canvas.appendChild(o);var a=new l(o,e);a.attrs={x:t,y:i,width:r,height:n,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},a.type="rect",P(o,a.attrs);return a},E._engine.ellipse=function(e,t,i,r,n){var s=P("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new l(s,e);o.attrs={cx:t,cy:i,rx:r,ry:n,fill:"none",stroke:"#000"},o.type="ellipse",P(s,o.attrs);return o},E._engine.image=function(e,t,i,r,n,s){var o=P("image");P(o,{x:i,y:r,width:n,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(S,"href",t),e.canvas&&e.canvas.appendChild(o);var a=new l(o,e);a.attrs={x:i,y:r,width:n,height:s,src:t},a.type="image";return a},E._engine.text=function(e,t,i,r){var n=P("text");e.canvas&&e.canvas.appendChild(n);var s=new l(n,e);s.attrs={x:t,y:i,"text-anchor":"middle",text:r,font:E._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",d(s,s.attrs);return s},E._engine.setSize=function(e,t){this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this},E._engine.create=function(){var e=E._getContainer.apply(0,arguments),t=e&&e.container,i=e.x,r=e.y,n=e.width,s=e.height;if(!t)throw new Error("SVG container not found.");var o=P("svg"),a="overflow:hidden;",l;i=i||0,r=r||0,n=n||512,s=s||342,P(o,{height:s,version:1.1,width:n,xmlns:"http://www.w3.org/2000/svg"}),t==1?(o.style.cssText=a+"position:absolute;left:"+i+"px;top:"+r+"px",E._g.doc.body.appendChild(o),l=1):(o.style.cssText=a+"position:relative",t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o)),t=new E._Paper,t.width=n,t.height=s,t.canvas=o,t.clear(),t._left=t._top=0,l&&(t.renderfix=function(){}),t.renderfix();return t},E._engine.setViewBox=function(e,t,i,r,n){h("raphael.setViewBox",this,this._viewBox,[e,t,i,r,n]);var s=_(i/this.width,r/this.height),o=this.top,a=n?"meet":"xMinYMin",l,u;e==null?(this._vbSize&&(s=1),delete this._vbSize,l="0 0 "+this.width+f+this.height):(this._vbSize=s,l=e+f+t+f+i+f+r),P(this.canvas,{viewBox:l,preserveAspectRatio:a});while(s&&o)u="stroke-width"in o.attrs?o.attrs["stroke-width"]:1,o.attr({"stroke-width":u}),o._.dirty=1,o._.dirtyT=1,o=o.prev;this._viewBox=[e,t,i,r,!!n];return this},E.prototype.renderfix=function(){var t=this.canvas,e=t.style,i;try{i=t.getScreenCTM()||t.createSVGMatrix()}catch(e){i=t.createSVGMatrix()}var r=-i.e%1,n=-i.f%1;if(r||n)r&&(this._left=(this._left+r)%1,e.left=this._left+"px"),n&&(this._top=(this._top+n)%1,e.top=this._top+"px")},E.prototype.clear=function(){E.eve("raphael.clear",this);var e=this.canvas;while(e.firstChild)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=P("desc")).appendChild(E._g.doc.createTextNode("Created with Rapha�l "+E.version)),e.appendChild(this.desc),e.appendChild(this.defs=P("defs"))},E.prototype.remove=function(){h("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=typeof this[e]=="function"?E._removedFactory(e):null};var t=E.st;for(var i in e)e[C](i)&&!t[C](i)&&(t[i]=function(i){return function(){var t=arguments;return this.forEach(function(e){e[i].apply(e,t)})}}(i))}(window.Raphael),window.Raphael.vml&&function(N){var L="hasOwnProperty",F=String,j=parseFloat,p=Math,D=p.round,q=p.max,U=p.min,v=p.abs,z="fill",V=/[, ]+/,h=N.eve,r=" progid:DXImageTransform.Microsoft",W=" ",H="",c={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},d=/([clmz]),?([^clmz]*)/gi,n=/ progid:\S+Blur\([^\)]+\)/g,g=/-?[^,\s-]+/g,f="position:absolute;left:0;top:0;width:1px;height:1px",$=21600,Q={path:1,rect:1,image:1},K={circle:1,ellipse:1},Y=function(e){var t=/[ahqstv]/gi,i=N._pathToAbsolute;F(e).match(t)&&(i=N._path2curve),t=/[clmz]/g;if(i==N._pathToAbsolute&&!F(e).match(t)){var r=F(e).replace(d,function(e,t,i){var r=[],n=t.toLowerCase()=="m",s=c[t];i.replace(g,function(e){n&&r.length==2&&(s+=r+c[t=="m"?"l":"L"],r=[]),r.push(D(e*$))});return s+r});return r}var n=i(e),s,o;r=[];for(var a=0,l=n.length;a<l;a++){s=n[a],o=n[a][0].toLowerCase(),o=="z"&&(o="x");for(var u=1,f=s.length;u<f;u++)o+=D(s[u]*$)+(u!=f-1?",":H);r.push(o)}return r.join(W)},b=function(e,t,i){var r=N.matrix();r.rotate(-e,.5,.5);return{dx:r.x(t,i),dy:r.y(t,i)}},G=function(e,t,i,r,n,s){var o=e._,a=e.matrix,l=o.fillpos,u=e.node,f=u.style,c=1,h="",d,p=$/t,g=$/i;f.visibility="hidden";if(!!t&&!!i){u.coordsize=v(p)+W+v(g),f.rotation=s*(t*i<0?-1:1);if(s){var m=b(s,r,n);r=m.dx,n=m.dy}t<0&&(h+="x"),i<0&&(h+=" y")&&(c=-1),f.flip=h,u.coordorigin=r*-p+W+n*-g;if(l||o.fillsize){var y=u.getElementsByTagName(z);y=y&&y[0],u.removeChild(y),l&&(m=b(s,a.x(l[0],l[1]),a.y(l[0],l[1])),y.position=m.dx*c+W+m.dy*c),o.fillsize&&(y.size=o.fillsize[0]*v(t)+W+o.fillsize[1]*v(i)),u.appendChild(y)}f.visibility="visible"}};N.toString=function(){return"Your browser doesn�t support SVG. Falling down to VML.\nYou are running Rapha�l "+this.version};var X=function(e,t,i){var r=F(t).toLowerCase().split("-"),n=i?"end":"start",s=r.length,o="classic",a="medium",l="medium";while(s--)switch(r[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=r[s];break;case"wide":case"narrow":l=r[s];break;case"long":case"short":a=r[s]}var u=e.node.getElementsByTagName("stroke")[0];u[n+"arrow"]=o,u[n+"arrowlength"]=a,u[n+"arrowwidth"]=l},m=function(e,t){e.attrs=e.attrs||{};var i=e.node,r=e.attrs,n=i.style,s,o=Q[e.type]&&(t.x!=r.x||t.y!=r.y||t.width!=r.width||t.height!=r.height||t.cx!=r.cx||t.cy!=r.cy||t.rx!=r.rx||t.ry!=r.ry||t.r!=r.r),a=K[e.type]&&(r.cx!=t.cx||r.cy!=t.cy||r.r!=t.r||r.rx!=t.rx||r.ry!=t.ry),l=e;for(var u in t)t[L](u)&&(r[u]=t[u]);o&&(r.path=N._getPath[e.type](e),e._.dirty=1),t.href&&(i.href=t.href),t.title&&(i.title=t.title),t.target&&(i.target=t.target),t.cursor&&(n.cursor=t.cursor),"blur"in t&&e.blur(t.blur);if(t.path&&e.type=="path"||o)i.path=Y(~F(r.path).toLowerCase().indexOf("r")?N._pathToAbsolute(r.path):r.path),e.type=="image"&&(e._.fillpos=[r.x,r.y],e._.fillsize=[r.width,r.height],G(e,1,1,0,0,0));"transform"in t&&e.transform(t.transform);if(a){var f=+r.cx,c=+r.cy,h=+r.rx||+r.r||0,d=+r.ry||+r.r||0;i.path=N.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",D((f-h)*$),D((c-d)*$),D((f+h)*$),D((c+d)*$),D(f*$))}if("clip-rect"in t){var p=F(t["clip-rect"]).split(V);if(p.length==4){p[2]=+p[2]+ +p[0],p[3]=+p[3]+ +p[1];var g=i.clipRect||N._g.doc.createElement("div"),m=g.style;m.clip=N.format("rect({1}px {2}px {3}px {0}px)",p),i.clipRect||(m.position="absolute",m.top=0,m.left=0,m.width=e.paper.width+"px",m.height=e.paper.height+"px",i.parentNode.insertBefore(g,i),g.appendChild(i),i.clipRect=g)}t["clip-rect"]||i.clipRect&&(i.clipRect.style.clip="auto")}if(e.textpath){var y=e.textpath.style;t.font&&(y.font=t.font),t["font-family"]&&(y.fontFamily='"'+t["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,H)+'"'),t["font-size"]&&(y.fontSize=t["font-size"]),t["font-weight"]&&(y.fontWeight=t["font-weight"]),t["font-style"]&&(y.fontStyle=t["font-style"])}"arrow-start"in t&&X(l,t["arrow-start"]),"arrow-end"in t&&X(l,t["arrow-end"],1);if(t.opacity!=null||t["stroke-width"]!=null||t.fill!=null||t.src!=null||t.stroke!=null||t["stroke-width"]!=null||t["stroke-opacity"]!=null||t["fill-opacity"]!=null||t["stroke-dasharray"]!=null||t["stroke-miterlimit"]!=null||t["stroke-linejoin"]!=null||t["stroke-linecap"]!=null){var v=i.getElementsByTagName(z),b=!1;v=v&&v[0],!v&&(b=v=Z(z)),e.type=="image"&&t.src&&(v.src=t.src),t.fill&&(v.on=!0);if(v.on==null||t.fill=="none"||t.fill===null)v.on=!1;if(v.on&&t.fill){var w=F(t.fill).match(N._ISURL);if(w){v.parentNode==i&&i.removeChild(v),v.rotate=!0,v.src=w[1],v.type="tile";var _=e.getBBox(1);v.position=_.x+W+_.y,e._.fillpos=[_.x,_.y],N._preload(w[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else v.color=N.getRGB(t.fill).hex,v.src=H,v.type="solid",N.getRGB(t.fill).error&&(l.type in{circle:1,ellipse:1}||F(t.fill).charAt()!="r")&&J(l,t.fill,v)&&(r.fill="none",r.gradient=t.fill,v.rotate=!1)}if("fill-opacity"in t||"opacity"in t){var x=((+r["fill-opacity"]+1||2)-1)*((+r.opacity+1||2)-1)*((+N.getRGB(t.fill).o+1||2)-1);x=U(q(x,0),1),v.opacity=x,v.src&&(v.color="none")}i.appendChild(v);var k=i.getElementsByTagName("stroke")&&i.getElementsByTagName("stroke")[0],S=!1;!k&&(S=k=Z("stroke"));if(t.stroke&&t.stroke!="none"||t["stroke-width"]||t["stroke-opacity"]!=null||t["stroke-dasharray"]||t["stroke-miterlimit"]||t["stroke-linejoin"]||t["stroke-linecap"])k.on=!0;(t.stroke=="none"||t.stroke===null||k.on==null||t.stroke==0||t["stroke-width"]==0)&&(k.on=!1);var E=N.getRGB(t.stroke);k.on&&t.stroke&&(k.color=E.hex),x=((+r["stroke-opacity"]+1||2)-1)*((+r.opacity+1||2)-1)*((+E.o+1||2)-1);var C=(j(t["stroke-width"])||1)*.75;x=U(q(x,0),1),t["stroke-width"]==null&&(C=r["stroke-width"]),t["stroke-width"]&&(k.weight=C),C&&C<1&&(x*=C)&&(k.weight=1),k.opacity=x,t["stroke-linejoin"]&&(k.joinstyle=t["stroke-linejoin"]||"miter"),k.miterlimit=t["stroke-miterlimit"]||8,t["stroke-linecap"]&&(k.endcap=t["stroke-linecap"]=="butt"?"flat":t["stroke-linecap"]=="square"?"square":"round");if(t["stroke-dasharray"]){var A={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};k.dashstyle=A[L](t["stroke-dasharray"])?A[t["stroke-dasharray"]]:H}S&&i.appendChild(k)}if(l.type=="text"){l.paper.canvas.style.display=H;var I=l.paper.span,T=100,B=r.font&&r.font.match(/\d+(?:\.\d*)?(?=px)/);n=I.style,r.font&&(n.font=r.font),r["font-family"]&&(n.fontFamily=r["font-family"]),r["font-weight"]&&(n.fontWeight=r["font-weight"]),r["font-style"]&&(n.fontStyle=r["font-style"]),B=j(r["font-size"]||B&&B[0])||10,n.fontSize=B*T+"px",l.textpath.string&&(I.innerHTML=F(l.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var P=I.getBoundingClientRect();l.W=r.w=(P.right-P.left)/T,l.H=r.h=(P.bottom-P.top)/T,l.X=r.x,l.Y=r.y+l.H/2,("x"in t||"y"in t)&&(l.path.v=N.format("m{0},{1}l{2},{1}",D(r.x*$),D(r.y*$),D(r.x*$)+1));var O=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var M=0,R=O.length;M<R;M++)if(O[M]in t){l._.dirty=1;break}switch(r["text-anchor"]){case"start":l.textpath.style["v-text-align"]="left",l.bbx=l.W/2;break;case"end":l.textpath.style["v-text-align"]="right",l.bbx=-l.W/2;break;default:l.textpath.style["v-text-align"]="center",l.bbx=0}l.textpath.style["v-text-kern"]=!0}},J=function(e,t,i){e.attrs=e.attrs||{};var r=e.attrs,n=Math.pow,s,o,a="linear",l=".5 .5";e.attrs.gradient=t,t=F(t).replace(N._radial_gradient,function(e,t,i){a="radial",t&&i&&(t=j(t),i=j(i),n(t-.5,2)+n(i-.5,2)>.25&&(i=p.sqrt(.25-n(t-.5,2))*((i>.5)*2-1)+.5),l=t+W+i);return H}),t=t.split(/\s*\-\s*/);if(a=="linear"){var u=t.shift();u=-j(u);if(isNaN(u))return null}var f=N._parseDots(t);if(!f)return null;e=e.shape||e.node;if(f.length){e.removeChild(i),i.on=!0,i.method="none",i.color=f[0].color,i.color2=f[f.length-1].color;var c=[];for(var h=0,d=f.length;h<d;h++)f[h].offset&&c.push(f[h].offset+W+f[h].color);i.colors=c.length?c.join():"0% "+i.color,a=="radial"?(i.type="gradientTitle",i.focus="100%",i.focussize="0 0",i.focusposition=l,i.angle=0):(i.type="gradient",i.angle=(270-u)%360),e.appendChild(i)}return 1},y=function(e,t){this[0]=this.node=e,e.raphael=!0,this.id=N._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=t,this.matrix=N.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},e=N.el;y.prototype=e,e.constructor=y,e.transform=function(e){if(e==null)return this._.transform;var t=this.paper._viewBoxShift,i=t?"s"+[t.scale,t.scale]+"-1-1t"+[t.dx,t.dy]:H,r;t&&(r=e=F(e).replace(/\.{3}|\u2026/g,this._.transform||H)),N._extractTransform(this,i+e);var n=this.matrix.clone(),s=this.skew,o=this.node,a,l=~F(this.attrs.fill).indexOf("-"),u=!F(this.attrs.fill).indexOf("url(");n.translate(-.5,-.5);if(u||l||this.type=="image"){s.matrix="1 0 0 1",s.offset="0 0",a=n.split();if(l&&a.noRotation||!a.isSimple){o.style.filter=n.toFilter();var f=this.getBBox(),c=this.getBBox(1),h=f.x-c.x,d=f.y-c.y;o.coordorigin=h*-$+W+d*-$,G(this,1,1,h,d,0)}else o.style.filter=H,G(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate)}else o.style.filter=H,s.matrix=F(n),s.offset=n.offset();r&&(this._.transform=r);return this},e.rotate=function(e,t,i){if(this.removed)return this;if(e!=null){e=F(e).split(V),e.length-1&&(t=j(e[1]),i=j(e[2])),e=j(e[0]),i==null&&(t=i);if(t==null||i==null){var r=this.getBBox(1);t=r.x+r.width/2,i=r.y+r.height/2}this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]]));return this}},e.translate=function(e,t){if(this.removed)return this;e=F(e).split(V),e.length-1&&(t=j(e[1])),e=j(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]]));return this},e.scale=function(e,t,i,r){if(this.removed)return this;e=F(e).split(V),e.length-1&&(t=j(e[1]),i=j(e[2]),r=j(e[3]),isNaN(i)&&(i=null),isNaN(r)&&(r=null)),e=j(e[0]),t==null&&(t=e),r==null&&(i=r);if(i==null||r==null)var n=this.getBBox(1);i=i==null?n.x+n.width/2:i,r=r==null?n.y+n.height/2:r,this.transform(this._.transform.concat([["s",e,t,i,r]])),this._.dirtyT=1;return this},e.hide=function(){!this.removed&&(this.node.style.display="none");return this},e.show=function(){!this.removed&&(this.node.style.display=H);return this},e._getBBox=function(){if(this.removed)return{};return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},e.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),N.eve.unbind("raphael.*.*."+this.id),N._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]=typeof this[e]=="function"?N._removedFactory(e):null;this.removed=!0}},e.attr=function(e,t){if(this.removed)return this;if(e==null){var i={};for(var r in this.attrs)this.attrs[L](r)&&(i[r]=this.attrs[r]);i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform;return i}if(t==null&&N.is(e,"string")){if(e==z&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var n=e.split(V),s={};for(var o=0,a=n.length;o<a;o++)e=n[o],e in this.attrs?s[e]=this.attrs[e]:N.is(this.paper.customAttributes[e],"function")?s[e]=this.paper.customAttributes[e].def:s[e]=N._availableAttrs[e];return a-1?s:s[n[0]]}if(this.attrs&&t==null&&N.is(e,"array")){s={};for(o=0,a=e.length;o<a;o++)s[e[o]]=this.attr(e[o]);return s}var l;t!=null&&(l={},l[e]=t),t==null&&N.is(e,"object")&&(l=e);for(var u in l)h("raphael.attr."+u+"."+this.id,this,l[u]);if(l){for(u in this.paper.customAttributes)if(this.paper.customAttributes[L](u)&&l[L](u)&&N.is(this.paper.customAttributes[u],"function")){var f=this.paper.customAttributes[u].apply(this,[].concat(l[u]));this.attrs[u]=l[u];for(var c in f)f[L](c)&&(l[c]=f[c])}l.text&&this.type=="text"&&(this.textpath.string=l.text),m(this,l)}return this},e.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&N._tofront(this,this.paper);return this},e.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),N._toback(this,this.paper));return this},e.insertAfter=function(e){if(this.removed)return this;e.constructor==N.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),N._insertafter(this,e,this.paper);return this},e.insertBefore=function(e){if(this.removed)return this;e.constructor==N.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),N._insertbefore(this,e,this.paper);return this},e.blur=function(e){var t=this.node.runtimeStyle,i=t.filter;i=i.replace(n,H),+e!==0?(this.attrs.blur=e,t.filter=i+W+r+".Blur(pixelradius="+(+e||1.5)+")",t.margin=N.format("-{0}px 0 0 -{0}px",D(+e||1.5))):(t.filter=i,t.margin=0,delete this.attrs.blur)},N._engine.path=function(e,t){var i=Z("shape");i.style.cssText=f,i.coordsize=$+W+$,i.coordorigin=t.coordorigin;var r=new y(i,t),n={fill:"none",stroke:"#000"};e&&(n.path=e),r.type="path",r.path=[],r.Path=H,m(r,n),t.canvas.appendChild(i);var s=Z("skew");s.on=!0,i.appendChild(s),r.skew=s,r.transform(H);return r},N._engine.rect=function(e,t,i,r,n,s){var o=N._rectPath(t,i,r,n,s),a=e.path(o),l=a.attrs;a.X=l.x=t,a.Y=l.y=i,a.W=l.width=r,a.H=l.height=n,l.r=s,l.path=o,a.type="rect";return a},N._engine.ellipse=function(e,t,i,r,n){var s=e.path(),o=s.attrs;s.X=t-r,s.Y=i-n,s.W=r*2,s.H=n*2,s.type="ellipse",m(s,{cx:t,cy:i,rx:r,ry:n});return s},N._engine.circle=function(e,t,i,r){var n=e.path(),s=n.attrs;n.X=t-r,n.Y=i-r,n.W=n.H=r*2,n.type="circle",m(n,{cx:t,cy:i,r:r});return n},N._engine.image=function(e,t,i,r,n,s){var o=N._rectPath(i,r,n,s),a=e.path(o).attr({stroke:"none"}),l=a.attrs,u=a.node,f=u.getElementsByTagName(z)[0];l.src=t,a.X=l.x=i,a.Y=l.y=r,a.W=l.width=n,a.H=l.height=s,l.path=o,a.type="image",f.parentNode==u&&u.removeChild(f),f.rotate=!0,f.src=t,f.type="tile",a._.fillpos=[i,r],a._.fillsize=[n,s],u.appendChild(f),G(a,1,1,0,0,0);return a},N._engine.text=function(e,t,i,r){var n=Z("shape"),s=Z("path"),o=Z("textpath");t=t||0,i=i||0,r=r||"",s.v=N.format("m{0},{1}l{2},{1}",D(t*$),D(i*$),D(t*$)+1),s.textpathok=!0,o.string=F(r),o.on=!0,n.style.cssText=f,n.coordsize=$+W+$,n.coordorigin="0 0";var a=new y(n,e),l={fill:"#000",stroke:"none",font:N._availableAttrs.font,text:r};a.shape=n,a.path=s,a.textpath=o,a.type="text",a.attrs.text=F(r),a.attrs.x=t,a.attrs.y=i,a.attrs.w=1,a.attrs.h=1,m(a,l),n.appendChild(o),n.appendChild(s),e.canvas.appendChild(n);var u=Z("skew");u.on=!0,n.appendChild(u),a.skew=u,a.transform(H);return a},N._engine.setSize=function(e,t){var i=this.canvas.style;this.width=e,this.height=t,e==+e&&(e+="px"),t==+t&&(t+="px"),i.width=e,i.height=t,i.clip="rect(0 "+e+" "+t+" 0)",this._viewBox&&N._engine.setViewBox.apply(this,this._viewBox);return this},N._engine.setViewBox=function(e,t,i,r,n){N.eve("raphael.setViewBox",this,this._viewBox,[e,t,i,r,n]);var s=this.width,o=this.height,a=1/q(i/s,r/o),l,u;n&&(l=o/r,u=s/i,i*l<s&&(e-=(s-i*l)/2/l),r*u<o&&(t-=(o-r*u)/2/u)),this._viewBox=[e,t,i,r,!!n],this._viewBoxShift={dx:-e,dy:-t,scale:a},this.forEach(function(e){e.transform("...")});return this};var Z;N._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),Z=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(e){Z=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},N._engine.initWin(N._g.win),N._engine.create=function(){var e=N._getContainer.apply(0,arguments),t=e.container,i=e.height,r,n=e.width,s=e.x,o=e.y;if(!t)throw new Error("VML container not found.");var a=new N._Paper,l=a.canvas=N._g.doc.createElement("div"),u=l.style;s=s||0,o=o||0,n=n||512,i=i||342,a.width=n,a.height=i,n==+n&&(n+="px"),i==+i&&(i+="px"),a.coordsize=$*1e3+W+$*1e3,a.coordorigin="0 0",a.span=N._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(a.span),u.cssText=N.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,i),t==1?(N._g.doc.body.appendChild(l),u.left=s+"px",u.top=o+"px",u.position="absolute"):t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l),a.renderfix=function(){};return a},N.prototype.clear=function(){N.eve("raphael.clear",this),this.canvas.innerHTML=H,this.span=N._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},N.prototype.remove=function(){N.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=typeof this[e]=="function"?N._removedFactory(e):null;return!0};var t=N.st;for(var i in e)e[L](i)&&!t[L](i)&&(t[i]=function(i){return function(){var t=arguments;return this.forEach(function(e){e[i].apply(e,t)})}}(i))}(window.Raphael);JustGage=function(e){var B=this;if(e===null||e===undefined){console.log("* justgage: Make sure to pass options to the constructor!");return false}var t;if(e.id!==null&&e.id!==undefined){t=document.getElementById(e.id);if(!t){console.log("* justgage: No element with id : %s found",e.id);return false}}else if(e.parentNode!==null&&e.parentNode!==undefined){t=e.parentNode}else{console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor.");return false}var i=t.dataset?t.dataset:{};var r=e.defaults!==null&&e.defaults!==undefined?e.defaults:false;if(r!==false){e=extend({},e,r);delete e.defaults}B.config={id:e.id,value:kvLookup("value",e,i,0,"float"),defaults:kvLookup("defaults",e,i,0,false),parentNode:kvLookup("parentNode",e,i,null),width:kvLookup("width",e,i,null),height:kvLookup("height",e,i,null),title:kvLookup("title",e,i,""),titleFontColor:kvLookup("titleFontColor",e,i,"#999999"),titleFontFamily:kvLookup("titleFontFamily",e,i,"sans-serif"),titlePosition:kvLookup("titlePosition",e,i,"above"),valueFontColor:kvLookup("valueFontColor",e,i,"#010101"),valueFontFamily:kvLookup("valueFontFamily",e,i,"Arial"),symbol:kvLookup("symbol",e,i,""),min:kvLookup("min",e,i,0,"float"),minTxt:kvLookup("minTxt",e,i,false),max:kvLookup("max",e,i,100,"float"),maxTxt:kvLookup("maxTxt",e,i,false),reverse:kvLookup("reverse",e,i,false),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",e,i,0),textRenderer:kvLookup("textRenderer",e,i,null),onAnimationEnd:kvLookup("onAnimationEnd",e,i,null),gaugeWidthScale:kvLookup("gaugeWidthScale",e,i,1),gaugeColor:kvLookup("gaugeColor",e,i,"#edebeb"),label:kvLookup("label",e,i,""),labelFontColor:kvLookup("labelFontColor",e,i,"#b3b3b3"),shadowOpacity:kvLookup("shadowOpacity",e,i,.2),shadowSize:kvLookup("shadowSize",e,i,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",e,i,3),levelColors:kvLookup("levelColors",e,i,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",e,i,700),startAnimationType:kvLookup("startAnimationType",e,i,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",e,i,700),refreshAnimationType:kvLookup("refreshAnimationType",e,i,">"),donutStartAngle:kvLookup("donutStartAngle",e,i,90),valueMinFontSize:kvLookup("valueMinFontSize",e,i,16),titleMinFontSize:kvLookup("titleMinFontSize",e,i,10),labelMinFontSize:kvLookup("labelMinFontSize",e,i,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",e,i,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",e,i,10),hideValue:kvLookup("hideValue",e,i,false),hideMinMax:kvLookup("hideMinMax",e,i,false),hideInnerShadow:kvLookup("hideInnerShadow",e,i,false),humanFriendly:kvLookup("humanFriendly",e,i,false),noGradient:kvLookup("noGradient",e,i,false),donut:kvLookup("donut",e,i,false),relativeGaugeSize:kvLookup("relativeGaugeSize",e,i,false),counter:kvLookup("counter",e,i,false),decimals:kvLookup("decimals",e,i,0),customSectors:kvLookup("customSectors",e,i,[]),formatNumber:kvLookup("formatNumber",e,i,false),pointer:kvLookup("pointer",e,i,false),pointerOptions:kvLookup("pointerOptions",e,i,[])};var n,s,o,a,l,u,f,c,h,d,p,g,m,y,v,b,w,_,x,k,S,E;if(B.config.value>B.config.max)B.config.value=B.config.max;if(B.config.value<B.config.min)B.config.value=B.config.min;B.originalValue=kvLookup("value",e,i,-1,"float");if(B.config.id!==null&&document.getElementById(B.config.id)!==null){B.canvas=Raphael(B.config.id,"100%","100%")}else if(B.config.parentNode!==null){B.canvas=Raphael(B.config.parentNode,"100%","100%")}if(B.config.relativeGaugeSize===true){B.canvas.setViewBox(0,0,200,150,true)}if(B.config.relativeGaugeSize===true){n=200;s=150}else if(B.config.width!==null&&B.config.height!==null){n=B.config.width;s=B.config.height}else if(B.config.parentNode!==null){B.canvas.setViewBox(0,0,200,150,true);n=200;s=150}else{n=getStyle(document.getElementById(B.config.id),"width").slice(0,-2)*1;s=getStyle(document.getElementById(B.config.id),"height").slice(0,-2)*1}if(B.config.donut===true){if(n>s){a=s;o=a}else if(n<s){o=n;a=o;if(a>s){l=a/s;a=a/l;o=a/l}}else{o=n;a=o}u=(n-o)/2;f=(s-a)/2;c=a/8>10?a/10:10;h=u+o/2;d=f+a/11;p=a/6.4>16?a/5.4:18;g=u+o/2;if(B.config.label!==""){m=f+a/1.85}else{m=f+a/1.7}y=a/16>10?a/16:10;v=u+o/2;b=m+y;w=a/16>10?a/16:10;_=u+o/10+o/6.666666666666667*B.config.gaugeWidthScale/2;x=b;k=a/16>10?a/16:10;S=u+o-o/10-o/6.666666666666667*B.config.gaugeWidthScale/2;E=b}else{if(n>s){a=s;o=a*1.25;if(o>n){l=o/n;o=o/l;a=a/l}}else if(n<s){o=n;a=o/1.25;if(a>s){l=a/s;a=a/l;o=a/l}}else{o=n;a=o*.75}u=(n-o)/2;f=(s-a)/2;if(B.config.titlePosition==="below"){f-=a/6.4}c=a/8>B.config.titleMinFontSize?a/10:B.config.titleMinFontSize;h=u+o/2;d=f+(B.config.titlePosition==="below"?a*1.07:a/6.4);p=a/6.5>B.config.valueMinFontSize?a/6.5:B.config.valueMinFontSize;g=u+o/2;m=f+a/1.275;y=a/16>B.config.labelMinFontSize?a/16:B.config.labelMinFontSize;v=u+o/2;b=m+p/2+5;w=a/16>B.config.minLabelMinFontSize?a/16:B.config.minLabelMinFontSize;_=u+o/10+o/6.666666666666667*B.config.gaugeWidthScale/2;x=b;k=a/16>B.config.maxLabelMinFontSize?a/16:B.config.maxLabelMinFontSize;S=u+o-o/10-o/6.666666666666667*B.config.gaugeWidthScale/2;E=b}B.params={canvasW:n,canvasH:s,widgetW:o,widgetH:a,dx:u,dy:f,titleFontSize:c,titleX:h,titleY:d,valueFontSize:p,valueX:g,valueY:m,labelFontSize:y,labelX:v,labelY:b,minFontSize:w,minX:_,minY:x,maxFontSize:k,maxX:S,maxY:E};n,s,o,a,l,u,f,c,h,d,p,g,m,y,v,b,w,_,x,k,S,E=null;B.canvas.customAttributes.pki=function(e,t,i,r,n,s,o,a,l,u){var f,c,h,d,p,g,m,y,v,b;if(l){f=(1-2*(e-t)/(i-t))*Math.PI;c=r/2-r/7;h=c-r/6.666666666666667*a;d=r/2+s;p=n/1.95+o;g=d+c*Math.cos(f);m=p-c*Math.sin(f);y=d+h*Math.cos(f);v=p-h*Math.sin(f);b="M"+(d-h)+","+p+" ";b+="L"+(d-c)+","+p+" ";if(e>(i-t)/2){b+="A"+c+","+c+" 0 0 1 "+(d+c)+","+p+" "}b+="A"+c+","+c+" 0 0 1 "+g+","+m+" ";b+="L"+y+","+v+" ";if(e>(i-t)/2){b+="A"+h+","+h+" 0 0 0 "+(d+h)+","+p+" "}b+="A"+h+","+h+" 0 0 0 "+(d-h)+","+p+" ";b+="Z ";return{path:b}}else{f=(1-(e-t)/(i-t))*Math.PI;c=r/2-r/10;h=c-r/6.666666666666667*a;d=r/2+s;p=n/1.25+o;g=d+c*Math.cos(f);m=p-c*Math.sin(f);y=d+h*Math.cos(f);v=p-h*Math.sin(f);b="M"+(d-h)+","+p+" ";b+="L"+(d-c)+","+p+" ";b+="A"+c+","+c+" 0 0 1 "+g+","+m+" ";b+="L"+y+","+v+" ";b+="A"+h+","+h+" 0 0 0 "+(d-h)+","+p+" ";b+="Z ";return{path:b}}f,c,h,d,p,g,m,y,v,b=null};B.canvas.customAttributes.ndl=function(e,t,i,r,n,s,o,a,l){var u=r*3.5/100;var f=r/15;var c=r/100;if(B.config.pointerOptions.toplength!=null&&B.config.pointerOptions.toplength!=undefined)u=B.config.pointerOptions.toplength;if(B.config.pointerOptions.bottomlength!=null&&B.config.pointerOptions.bottomlength!=undefined)f=B.config.pointerOptions.bottomlength;if(B.config.pointerOptions.bottomwidth!=null&&B.config.pointerOptions.bottomwidth!=undefined)c=B.config.pointerOptions.bottomwidth;var h,d,p,g,m,y,v,b,w,_,x,k,S,E,C,A,I,T;if(l){h=(1-2*(e-t)/(i-t))*Math.PI;d=r/2-r/7;p=d-r/6.666666666666667*a;g=r/2+s;m=n/1.95+o;y=r/2+s+d*Math.cos(h);v=n-(n-m)-d*Math.sin(h);b=r/2+s+p*Math.cos(h);w=n-(n-m)-p*Math.sin(h);_=y+u*Math.cos(h);x=v-u*Math.sin(h);k=b-f*Math.cos(h);S=w+f*Math.sin(h);E=k+c*Math.sin(h);C=S+c*Math.cos(h);A=k-c*Math.sin(h);I=S-c*Math.cos(h);T="M"+E+","+C+" ";T+="L"+A+","+I+" ";T+="L"+_+","+x+" ";T+="Z ";return{path:T}}else{h=(1-(e-t)/(i-t))*Math.PI;d=r/2-r/10;p=d-r/6.666666666666667*a;g=r/2+s;m=n/1.25+o;y=r/2+s+d*Math.cos(h);v=n-(n-m)-d*Math.sin(h);b=r/2+s+p*Math.cos(h);w=n-(n-m)-p*Math.sin(h);_=y+u*Math.cos(h);x=v-u*Math.sin(h);k=b-f*Math.cos(h);S=w+f*Math.sin(h);E=k+c*Math.sin(h);C=S+c*Math.cos(h);A=k-c*Math.sin(h);I=S-c*Math.cos(h);T="M"+E+","+C+" ";T+="L"+A+","+I+" ";T+="L"+_+","+x+" ";T+="Z ";return{path:T}}h,d,p,g,m,y,v,b,w,_,x,k,S,E,C,A,I,T=null};B.gauge=B.canvas.path().attr({stroke:"none",fill:B.config.gaugeColor,pki:[B.config.max,B.config.min,B.config.max,B.params.widgetW,B.params.widgetH,B.params.dx,B.params.dy,B.config.gaugeWidthScale,B.config.donut,B.config.reverse]});B.level=B.canvas.path().attr({stroke:"none",fill:getColor(B.config.value,(B.config.value-B.config.min)/(B.config.max-B.config.min),B.config.levelColors,B.config.noGradient,B.config.customSectors),pki:[B.config.min,B.config.min,B.config.max,B.params.widgetW,B.params.widgetH,B.params.dx,B.params.dy,B.config.gaugeWidthScale,B.config.donut,B.config.reverse]});if(B.config.donut){B.level.transform("r"+B.config.donutStartAngle+", "+(B.params.widgetW/2+B.params.dx)+", "+(B.params.widgetH/1.95+B.params.dy))}if(B.config.pointer){B.needle=B.canvas.path().attr({stroke:B.config.pointerOptions.stroke!==null&&B.config.pointerOptions.stroke!==undefined?B.config.pointerOptions.stroke:"none","stroke-width":B.config.pointerOptions.stroke_width!==null&&B.config.pointerOptions.stroke_width!==undefined?B.config.pointerOptions.stroke_width:0,"stroke-linecap":B.config.pointerOptions.stroke_linecap!==null&&B.config.pointerOptions.stroke_linecap!==undefined?B.config.pointerOptions.stroke_linecap:"square",fill:B.config.pointerOptions.color!==null&&B.config.pointerOptions.color!==undefined?B.config.pointerOptions.color:"#000000",ndl:[B.config.min,B.config.min,B.config.max,B.params.widgetW,B.params.widgetH,B.params.dx,B.params.dy,B.config.gaugeWidthScale,B.config.donut]});if(B.config.donut){B.needle.transform("r"+B.config.donutStartAngle+", "+(B.params.widgetW/2+B.params.dx)+", "+(B.params.widgetH/1.95+B.params.dy))}}B.txtTitle=B.canvas.text(B.params.titleX,B.params.titleY,B.config.title);B.txtTitle.attr({"font-size":B.params.titleFontSize,"font-weight":"bold","font-family":B.config.titleFontFamily,fill:B.config.titleFontColor,"fill-opacity":"1"});setDy(B.txtTitle,B.params.titleFontSize,B.params.titleY);B.txtValue=B.canvas.text(B.params.valueX,B.params.valueY,0);B.txtValue.attr({"font-size":B.params.valueFontSize,"font-weight":"bold","font-family":B.config.valueFontFamily,fill:B.config.valueFontColor,"fill-opacity":"0"});setDy(B.txtValue,B.params.valueFontSize,B.params.valueY);B.txtLabel=B.canvas.text(B.params.labelX,B.params.labelY,B.config.label);B.txtLabel.attr({"font-size":B.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:B.config.labelFontColor,"fill-opacity":"0"});setDy(B.txtLabel,B.params.labelFontSize,B.params.labelY);var C=B.config.min;if(B.config.reverse){C=B.config.max}B.txtMinimum=C;if(B.config.minTxt){B.txtMinimum=B.config.minTxt}else if(B.config.humanFriendly){B.txtMinimum=humanFriendlyNumber(C,B.config.humanFriendlyDecimal)}else if(B.config.formatNumber){B.txtMinimum=formatNumber(C)}B.txtMin=B.canvas.text(B.params.minX,B.params.minY,B.txtMinimum);B.txtMin.attr({"font-size":B.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:B.config.labelFontColor,"fill-opacity":B.config.hideMinMax||B.config.donut?"0":"1"});setDy(B.txtMin,B.params.minFontSize,B.params.minY);var A=B.config.max;if(B.config.reverse){A=B.config.min}B.txtMaximum=A;if(B.config.maxTxt){B.txtMaximum=B.config.maxTxt}else if(B.config.humanFriendly){B.txtMaximum=humanFriendlyNumber(A,B.config.humanFriendlyDecimal)}else if(B.config.formatNumber){B.txtMaximum=formatNumber(A)}B.txtMax=B.canvas.text(B.params.maxX,B.params.maxY,B.txtMaximum);B.txtMax.attr({"font-size":B.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:B.config.labelFontColor,"fill-opacity":B.config.hideMinMax||B.config.donut?"0":"1"});setDy(B.txtMax,B.params.maxFontSize,B.params.maxY);var I=B.canvas.canvas.childNodes[1];var T="http://www.w3.org/2000/svg";if(ie!=="undefined"&&ie<9){}else if(ie!=="undefined"){onCreateElementNsReady(function(){B.generateShadow(T,I)})}else{B.generateShadow(T,I)}I,T=null;if(B.config.textRenderer){B.originalValue=B.config.textRenderer(B.originalValue)}else if(B.config.humanFriendly){B.originalValue=humanFriendlyNumber(B.originalValue,B.config.humanFriendlyDecimal)+B.config.symbol}else if(B.config.formatNumber){B.originalValue=formatNumber(B.originalValue)+B.config.symbol}else{B.originalValue=(B.originalValue*1).toFixed(B.config.decimals)+B.config.symbol}if(B.config.counter===true){eve.on("raphael.anim.frame."+B.level.id,function(){var e=B.level.attr("pki")[0];if(B.config.reverse){e=B.config.max*1+B.config.min*1-B.level.attr("pki")[0]*1}if(B.config.textRenderer){B.txtValue.attr("text",B.config.textRenderer(Math.floor(e)))}else if(B.config.humanFriendly){B.txtValue.attr("text",humanFriendlyNumber(Math.floor(e),B.config.humanFriendlyDecimal)+B.config.symbol)}else if(B.config.formatNumber){B.txtValue.attr("text",formatNumber(Math.floor(e))+B.config.symbol)}else{B.txtValue.attr("text",(e*1).toFixed(B.config.decimals)+B.config.symbol)}setDy(B.txtValue,B.params.valueFontSize,B.params.valueY);e=null});eve.on("raphael.anim.finish."+B.level.id,function(){B.txtValue.attr({text:B.originalValue});setDy(B.txtValue,B.params.valueFontSize,B.params.valueY)})}else{eve.on("raphael.anim.start."+B.level.id,function(){B.txtValue.attr({text:B.originalValue});setDy(B.txtValue,B.params.valueFontSize,B.params.valueY)})}var P=B.config.value;if(B.config.reverse){P=B.config.max*1+B.config.min*1-B.config.value*1}B.level.animate({pki:[P,B.config.min,B.config.max,B.params.widgetW,B.params.widgetH,B.params.dx,B.params.dy,B.config.gaugeWidthScale,B.config.donut,B.config.reverse]},B.config.startAnimationTime,B.config.startAnimationType,B.config.onAnimationEnd);if(B.config.pointer){B.needle.animate({ndl:[P,B.config.min,B.config.max,B.params.widgetW,B.params.widgetH,B.params.dx,B.params.dy,B.config.gaugeWidthScale,B.config.donut]},B.config.startAnimationTime,B.config.startAnimationType)}B.txtValue.animate({"fill-opacity":B.config.hideValue?"0":"1"},B.config.startAnimationTime,B.config.startAnimationType);B.txtLabel.animate({"fill-opacity":"1"},B.config.startAnimationTime,B.config.startAnimationType)};JustGage.prototype.refresh=function(e,t){var i=this;var r,n,t=t||null;if(t!==null){i.config.max=t;i.txtMaximum=i.config.max;if(i.config.maxTxt){i.txtMaximum=i.config.maxTxt}else if(i.config.humanFriendly){i.txtMaximum=humanFriendlyNumber(i.config.max,i.config.humanFriendlyDecimal)}else if(i.config.formatNumber){i.txtMaximum=formatNumber(i.config.max)}if(!i.config.reverse){i.txtMax.attr({text:i.txtMaximum});setDy(i.txtMax,i.params.maxFontSize,i.params.maxY)}else{i.txtMin.attr({text:i.txtMaximum});i.txtMax.attr({text:i.txtMinimum});setDy(i.txtMin,i.params.minFontSize,i.params.minY);setDy(i.txtMax,i.params.minFontSize,i.params.minY)}}r=e;if(e*1>i.config.max*1){e=i.config.max*1}if(e*1<i.config.min*1){e=i.config.min*1}n=getColor(e,(e-i.config.min)/(i.config.max-i.config.min),i.config.levelColors,i.config.noGradient,i.config.customSectors);if(i.config.textRenderer){r=i.config.textRenderer(r)}else if(i.config.humanFriendly){r=humanFriendlyNumber(r,i.config.humanFriendlyDecimal)+i.config.symbol}else if(i.config.formatNumber){r=formatNumber((r*1).toFixed(i.config.decimals))+i.config.symbol}else{r=(r*1).toFixed(i.config.decimals)+i.config.symbol}i.originalValue=r;i.config.value=e*1;if(!i.config.counter){i.txtValue.attr({text:r});setDy(i.txtValue,i.params.valueFontSize,i.params.valueY)}var s=i.config.value;if(i.config.reverse){s=i.config.max*1+i.config.min*1-i.config.value*1}i.level.animate({pki:[s,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut,i.config.reverse],fill:n},i.config.refreshAnimationTime,i.config.refreshAnimationType,i.config.onAnimationEnd);if(i.config.pointer){i.needle.animate({ndl:[s,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut]},i.config.refreshAnimationTime,i.config.refreshAnimationType)}i,r,n,t=null};JustGage.prototype.destroy=function(){document.getElementById(this.config.id).innerHTML=""};JustGage.prototype.generateShadow=function(e,t){var i=this;var r="inner-shadow-"+i.config.id;var n,s,o,a,l,u,f;n=document.createElementNS(e,"filter");n.setAttribute("id",r);t.appendChild(n);s=document.createElementNS(e,"feOffset");s.setAttribute("dx",0);s.setAttribute("dy",i.config.shadowVerticalOffset);n.appendChild(s);o=document.createElementNS(e,"feGaussianBlur");o.setAttribute("result","offset-blur");o.setAttribute("stdDeviation",i.config.shadowSize);n.appendChild(o);a=document.createElementNS(e,"feComposite");a.setAttribute("operator","out");a.setAttribute("in","SourceGraphic");a.setAttribute("in2","offset-blur");a.setAttribute("result","inverse");n.appendChild(a);l=document.createElementNS(e,"feFlood");l.setAttribute("flood-color","black");l.setAttribute("flood-opacity",i.config.shadowOpacity);l.setAttribute("result","color");n.appendChild(l);u=document.createElementNS(e,"feComposite");u.setAttribute("operator","in");u.setAttribute("in","color");u.setAttribute("in2","inverse");u.setAttribute("result","shadow");n.appendChild(u);f=document.createElementNS(e,"feComposite");f.setAttribute("operator","over");f.setAttribute("in","shadow");f.setAttribute("in2","SourceGraphic");n.appendChild(f);if(!i.config.hideInnerShadow){i.canvas.canvas.childNodes[2].setAttribute("filter","url("+window.location.pathname+"#"+r+")");i.canvas.canvas.childNodes[3].setAttribute("filter","url("+window.location.pathname+"#"+r+")")}n,s,o,a,l,u,f=null};function kvLookup(e,t,i,r,n,s){var o=r;var a=false;if(!(e===null||e===undefined)){if(i!==null&&i!==undefined&&typeof i==="object"&&e in i){o=i[e];a=true}else if(t!==null&&t!==undefined&&typeof t==="object"&&e in t){o=t[e];a=true}else{o=r}if(a===true){if(n!==null&&n!==undefined){switch(n){case"int":o=parseInt(o,10);break;case"float":o=parseFloat(o);break;default:break}}}}return o}function getColor(e,t,i,r,n){var s,o,a,l,u,f,c,h,d,p,g,m,y,v;var r=r||n.length>0;if(n.length>0){for(var b=0;b<n.length;b++){if(e>=n[b].lo&&e<=n[b].hi){return n[b].color}}}s=i.length;if(s===1)return i[0];o=r?1/s:1/(s-1);a=[];for(b=0;b<i.length;b++){l=r?o*(b+1):o*b;u=parseInt(cutHex(i[b]).substring(0,2),16);f=parseInt(cutHex(i[b]).substring(2,4),16);c=parseInt(cutHex(i[b]).substring(4,6),16);a[b]={pct:l,color:{r:u,g:f,b:c}}}if(t===0){return"rgb("+[a[0].color.r,a[0].color.g,a[0].color.b].join(",")+")"}for(var w=0;w<a.length;w++){if(t<=a[w].pct){if(r){return"rgb("+[a[w].color.r,a[w].color.g,a[w].color.b].join(",")+")"}else{h=a[w-1];d=a[w];p=d.pct-h.pct;g=(t-h.pct)/p;m=1-g;y=g;v={r:Math.floor(h.color.r*m+d.color.r*y),g:Math.floor(h.color.g*m+d.color.g*y),b:Math.floor(h.color.b*m+d.color.b*y)};return"rgb("+[v.r,v.g,v.b].join(",")+")"}}}}function setDy(e,t,i){if((!ie||ie>9)&&e.node.firstChild.attributes.dy){e.node.firstChild.attributes.dy.value=0}}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function cutHex(e){return e.charAt(0)=="#"?e.substring(1,7):e}function humanFriendlyNumber(e,t=2){const i=Math.pow(10,Number(t));const r=" KMGTPE";let n=0;const s=1e3;while((e>=s||e<=-s)&&++n<r.length)e=e/s;n=n>=r.length?r.length-1:n;return Math.round(e*i)/i+r[n]}function formatNumber(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return t.join(".")}function getStyle(e,t){var i="";if(document.defaultView&&document.defaultView.getComputedStyle){i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t)}else if(e.currentStyle){t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});i=e.currentStyle[t]}return i}function onCreateElementNsReady(e){if(document.createElementNS!==undefined){e()}else{setTimeout(function(){onCreateElementNsReady(e)},100)}}var ie=function(){var e,t=3,i=document.createElement("div"),r=i.getElementsByTagName("i");while(i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",r[0]);return t>4?t:e}();function extend(e){e=e||{};for(var t=1;t<arguments.length;t++){if(!arguments[t])continue;for(var i in arguments[t]){if(arguments[t].hasOwnProperty(i))e[i]=arguments[t][i]}}return e}(function(){let i={};freeboard.loadWidgetPlugin({type_name:"Chart",display_name:"Chart",description:"",fill_size:true,settings:[{name:"title",display_name:"Title",type:"text"},{name:"datasource",display_name:"Data Source",type:"calculated",description:""},{name:"filter",display_name:"Filter",type:"taginput",description:"Data fields separated with comma e.g. temp,humid,light. Blank means display all fields.",option:{allowDuplicates:false,availableTags:["A","B","C"],tagType:"string",source:s=>{return new Promise(async(r,e)=>{let n;if(s.currentSettings.datasource){let e=new RegExp('#\\[([^#\\]]*)\\]\\["feed"\\]',"i");n=s.currentSettings.datasource.match(e);if(n&&n[1]){let e=n[1].replaceAll('"',"");let t=await getFeedAttribute({feedname:e});r(t);return}let t=new RegExp('#\\[([^#\\]]*)\\]\\["shadow"\\]',"i");n=s.currentSettings.datasource.match(t);if(n&&n[1]){let e=n[1].replaceAll('"',"");let t=await getShadowAttribute({devicealias:e});r(t);return}let i=new RegExp('#\\[([^#\\]]*)\\]\\["msg"\\]',"i");n=s.currentSettings.datasource.match(i);if(n&&n[1]){let e=n[1].replaceAll('"',"");r([]);return}}else{r([]);return}})},transform:(t,i)=>{if(t.currentSettings.datasource){let e=new RegExp('#\\[([^#\\]]*)\\]\\["msg"\\]',"i");p=t.currentSettings.datasource.match(e);if(typeof i=="string"&&p&&p[1]){return i.replaceAll("/",".")}}return i}}},{name:"query_range_duration",display_name:"Query from the last",type:"text",default_value:"6",required:false},{name:"query_range_unit",display_name:"",type:"option",description:"Display data points on the last ... ago.",options:[{name:"Second",value:"second"},{name:"Minute",value:"minute"},{name:"Hour",value:"hour"},{name:"Day",value:"day"},{name:"Month",value:"month"},{name:"Year",value:"year"}],default_value:"hour"},{name:"stricttimerange",display_name:"Strict Time Range",type:"boolean",default_value:false},{name:"mode",display_name:"Plot Mode",type:"option",options:[{name:"Normal",value:"normal"},{name:"Auto Slide",value:"autoslide"},{name:"Continuous",value:"continuous"}]},{name:"type",display_name:"Type of Chart",type:"option",options:[{name:"Line",value:"line"},{name:"Step",value:"step"}]},{name:"xaxis",display_name:"X axis title",type:"text"},{name:"yaxis",display_name:"Y axis title",type:"text"},{name:"yzero",display_name:"begin at 0",type:"boolean"},{name:"marker",display_name:"Maker",type:"boolean",default_value:true},{name:"colors",display_name:"Line Colors",type:"taginput",default_value:"",option:{allowDuplicates:true,availableTags:["red","green","blue"],tagType:"color"}},{name:"totalyaxis",display_name:"No. of Y-Axis",type:"slider",min:1,max:4,default_value:1},{name:"height_block",display_name:"Blocks Height",type:"slider",min:3,max:10,default_value:3}],newInstance:function(e,t){i=e;t(new r(e))}});const b=["#64AFFB","#FF8888","#22AA00","#CC5588"];var r=function(e){let i=[];let l={};let u={};let f={};let c={};let t={};function o(){i=[];l={};u={};f={};c={};t={}}let h=this;o();h.widgetID=randomString(8);let d=e;if(d.height_block>30){d.height_block=Math.round(Number(d.height_block)/60)}var r=$(`<div id="chart_${h.widgetID}"></div>`);h.msgdata=[];h.shadowdata=[];h.statusdata=[];let a=false;function p(a){if(!a&&i){a=i}if(a){i=a;let e=d.query_range_duration;let t=d.query_range_unit;let n;if(d.filter){let e=d.filter||"";n=e.split(",")}else{n=null}let s=dayjs().subtract(e,t).unix()*1e3;let o=[];for(let r=0;r<a.length;r++){let i=[];if(n&&n.indexOf(a[r].name)<0)continue;if(a[r].data){let t=a[r].name;if(u[t]==undefined){u[t]=null}for(let e=0;e<a[r].data.length;e++){if(s<=a[r].data[e].x&&a[r].data[e].x<=Date.now()+15e3){if(i.length==0){f[t]=a[r].data[e].y;if(u[t]!=f[t]){l[t]=u[t];u[t]=f[t]}}i.push(a[r].data[e]);f[t]=a[r].data[e].y;c[name]=a[r].data[e].x}}if(i.length==0){l[name]=u[name];u[t];i.push({x:s,y:u[t]})}if(d.mode=="continuous"){if(f[t]!=undefined){if(!c[name]||c[name]<Date.now()){i.push({x:Date.now(),y:f[t]})}}else{if(!c[name]||c[name]<Date.now()){i.push({x:Date.now(),y:l[t]})}}}else if(d.stricttimerange){if(!c[name]||c[name]<Date.now()){i.push({x:Date.now(),y:null})}}}else{i.push({x:s,y:null});i.push({x:Date.now(),y:null})}o.push({data:i,name:a[r].name})}h.chart.updateSeries(o)}}let s={title:{text:"",offsetX:0,offsetY:1,style:{color:"#999"}},labels:{show:true,style:{colors:"#999"}},forceNiceScale:true};let g={chart:{type:"line",height:"100%",animations:{enabled:false},toolbar:{show:false},redrawOnParentResize:false},colors:b,title:{text:"",align:"left",margin:10,offsetX:0,offsetY:0,floating:false,style:{fontSize:"14px",fontWeight:"regular",fontFamily:undefined,color:"gray"}},stroke:{show:true,curve:"straight",lineCap:"butt",width:2,dashArray:0},markers:{size:2,shape:"circle",strokeWidth:0,showNullDataPoints:false,hover:{size:undefined,sizeOffset:2}},legend:{labels:{colors:"#999"}},grid:{show:true,borderColor:"#ddd",strokeDashArray:4,position:"back",xaxis:{lines:{show:true}},yaxis:{lines:{show:true}},row:{colors:undefined,opacity:.5},column:{colors:undefined,opacity:.5},padding:{top:0,right:6,bottom:0,left:10}},series:[],xaxis:{type:"datetime",title:{text:"Chart",offsetX:0,offsetY:1,style:{color:"#999",cssClass:"apexcharts-xaxis-title"}},min:undefined,max:undefined,axisBorder:{show:true,color:"#999"},axisTicks:{colors:"#999"},labels:{show:true,rotate:0,rotateAlways:false,hideOverlappingLabels:true,showDuplicates:false,trim:false,minHeight:undefined,maxHeight:120,style:{colors:"#999",fontSize:"10px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-xaxis-label"},offsetX:0,offsetY:-3,format:undefined,formatter:undefined,datetimeUTC:false,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm"}},tooltip:{enabled:false}},tooltip:{x:{format:"dd/MM/yy HH:mm"},y:{formatter:function(e,{series:t,seriesIndex:i,dataPointIndex:r,w:n}){return e}},marker:{show:true},shared:false,intersect:false}};function m(i,r){if(r.marker)i.markers.size=2;else i.markers.size=0;i.title.text=r.title||"";if(r.type=="step")i.stroke.curve="stepline";else i.stroke.curve="straight";let n=Number(r.totalyaxis);if(n>1){i.yaxis=[];for(let t=0;t<n;t++){let e=JSON.parse(JSON.stringify(s));if(t==n-1){e.title.text=r.yaxis}else{e.title.text=""}if(r.yzero){for(let e in i.yaxis){i.yaxis[e].min=0}}else{for(let e in i.yaxis){delete i.yaxis[e].min}}i.yaxis.push(e)}}else{let e={...s};e.title.text=r.yaxis;i.yaxis=e}i.xaxis.title.text=r.xaxis}function n(e,t){let i=document.querySelector("#"+e);if(i){delete h.chart;h.chart=new ApexCharts(i,{...t});h.chart.render()}}function y(){if(np_theme=="default"){g.grid.borderColor="#444";g.xaxis.axisBorder.color="#444"}else{g.grid.borderColor="#ddd";g.xaxis.axisBorder.color="#ddd"}h.render()}h.render=function(e){if(!a){a=true;h.onSettingsChanged(d)}if(e){h.containerElement=e;$(e).append(r)}r.css({height:60*Number(d.height_block)+"px"});n(`chart_${h.widgetID}`,g)};h.getHeight=function(){let e=Number(d.height_block);return e};function v(t,i){let r=0;let n=0,s=0;if(!t)return null;for(let e=0;e<t.length;e++){if(t.charAt(e)=="["){r++;if(r==2*i-1){n=e}}if(t.charAt(e)=="]"){r++;if(r==2*i){s=e;break}}}let e=t.substring(n+1,s).replace('"',"").replace('"',"");return e}emitter.on("DASH_RESOURCE_LOADED",function(){h.onSettingsChanged(d)});h.onSizeChanged=function(){p()};h.onSettingsChanged=function(r){if(!r.filter){r.filter=""}a=true;o();let n=r.query_range_duration;let s=r.query_range_unit;if(r.datasource||r.datasource==""){let i=v(d.datasource,1);if(i){if(r.datasource.match(new RegExp('#\\[([^#\\]]*)\\]\\["feed"\\]',"i"))){h.dstype="feed";let e=r.filter.trim();let t=null;if(e)t=e.split(",");setTimeout(()=>{emitter.emit("FEED_DATA_RANGE_CONFIG",{since_duration:Number(n),since_unit:s,alias:i,filter:t})},500)}else if(r.datasource.match(new RegExp('#\\[([^#\\]]*)\\]\\["shadow"\\]',"i"))){h.dstype="shadow"}else if(r.datasource.match(new RegExp('#\\[([^#\\]]*)\\]\\["msg"\\]',"i"))){h.dstype="msg"}else if(r.datasource.match(new RegExp('#\\[([^#\\]]*)\\]\\["status"\\]',"i"))){h.dstype="status"}}}if(r.colors){let e=r.colors.replace(/\s/g,"").split(",");if(e&&e.length>0){g.colors=e}}m(g,r);d=r;h.render();if(h.timer){clearInterval(h.timer);h.timer=0}if(d.mode=="autoslide"||d.mode=="continuous"){h.timer=setInterval(()=>{p()},1e3)}};h.onCalculatedValueChanged=function(e,t,r){if(t&&t.length>0){if(h.dstype=="feed"){h.feeddata=t;p(t)}else if(h.dstype=="shadow"){diffPathValue=allObjectPathValue(r);if(Object.keys(diffPathValue).length>0){for(let i in diffPathValue){if(true){let t=null;for(let e of h.shadowdata){if(e.name==i){t=e;break}}if(t){t.data.push({x:Date.now(),y:Number(diffPathValue[i])})}else{h.shadowdata.push({name:i,data:[{x:Date.now(),y:Number(diffPathValue[i])}]})}}}p(h.shadowdata)}}else if(h.dstype=="msg"){let e=[];if(d.filter.trim()){e=d.filter.trim().split(",")}if(r&&Object.keys(r).length>0){for(let i in r){if(e.length==0||e.indexOf(i)>=0){if(r[i]!=undefined){let t=null;for(let e of h.msgdata){if(e.name==i){t=e;break}}if(t){t.data.push({x:Date.now(),y:Number(r[i])})}else{h.msgdata.push({name:i,data:[{x:Date.now(),y:Number(r[i])}]})}}}}}p(h.msgdata)}else if(h.dstype=="status"){if(r&&r.status!=undefined){let e=h.statusdata[0];if(e){e.data.push({x:Date.now(),y:Number(r["status"])})}else{h.statusdata.push({name:"status",data:[{x:Date.now(),y:Number(r["status"])}]})}}p(h.statusdata)}}};h.onDispose=function(){if(h.timer){clearInterval(h.timer);h.timer=0}h.chart.destroy()};freeboard.on("theme_changed",function(){y();p(h.feeddata)});y()}})();